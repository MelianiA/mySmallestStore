"use strict";(self.webpackChunkmyStore=self.webpackChunkmyStore||[]).push([[179],{2011:(rt,Ce,k)=>{k.d(Ce,{Dh:()=>he,GT:()=>ge,cc:()=>Te,hO:()=>qe,on:()=>j,pX:()=>J,xv:()=>le});var f=k(5e3),K=k(127),O=k(5813);rt=k.hmd(rt);const ue=["ngOnDestroy"],J=(we,Xe,ze,Ie={})=>new Proxy(we,{get:(_e,ve)=>ze.runOutsideAngular(()=>{var He;if(we[ve])return(null===(He=null==Ie?void 0:Ie.spy)||void 0===He?void 0:He.get)&&Ie.spy.get(ve,we[ve]),we[ve];if(ue.indexOf(ve)>-1)return()=>{};const je=Xe.toPromise().then(te=>{const z=te&&te[ve];return"function"==typeof z?z.bind(te):z&&z.then?z.then(ne=>ze.run(()=>ne)):ze.run(()=>z)});return new Proxy(()=>{},{get:(te,z)=>je[z],apply:(te,z,ne)=>je.then(me=>{var ie;const Re=me&&me(...ne);return(null===(ie=null==Ie?void 0:Ie.spy)||void 0===ie?void 0:ie.apply)&&Ie.spy.apply(ve,ne,Re),Re})})})}),ge=(we,Xe)=>{Xe.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Ie=>{Object.defineProperty(we.prototype,Ie,Object.getOwnPropertyDescriptor(ze.prototype||ze,Ie))})})};class oe{constructor(Xe){return Xe}}const he=new f.OlP("angularfire2.app.options"),le=new f.OlP("angularfire2.app.name");function j(we,Xe,ze){const _e="object"==typeof ze&&ze||{};_e.name=_e.name||"string"==typeof ze&&ze||"[DEFAULT]";const He=K.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Xe.runOutsideAngular(()=>K.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new oe(He)}const $=(we,...Xe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)},Q={provide:oe,useFactory:j,deps:[he,f.R0b,[new f.FiY,le]]};let qe=(()=>{class we{constructor(ze){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",f.q4F.full,ze.toString())}static initializeApp(ze,Ie){return{ngModule:we,providers:[{provide:he,useValue:ze},{provide:le,useValue:Ie}]}}}return we.\u0275fac=function(ze){return new(ze||we)(f.LFG(f.Lbi))},we.\u0275mod=f.oAB({type:we}),we.\u0275inj=f.cJS({providers:[Q]}),we})();function Te(we,Xe,ze,Ie,_e){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===we)||[];if(ve)return function Ne(we,Xe){try{return we.toString()===Xe.toString()}catch(ze){return we===Xe}}(_e,He)||(fe("error",`${Xe} was already initialized on the ${ze} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:He})),ve;{const je=Ie();return globalThis.\u0275AngularfireInstanceCache.push([we,je,_e]),je}}const Fe=!!rt.hot,fe=(we,...Xe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,Ce,k)=>{k.d(Ce,{q4:()=>Al,iC:()=>Nl,fc:()=>Fn,HU:()=>Cu,vb:()=>Kc,JM:()=>qs});var f=k(5e3),K=k(5867),O=k(5861),ue=k(9681),J=k(2090),ge=k(4859),oe=k(1877);const he="@firebase/installations",$="w:0.5.8",Q="FIS_v2",we=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(I){return I instanceof J.ZR&&I.code.includes("request-failed")}function ze({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ie(I){return{token:I.token,requestStatus:2,expiresIn:ne(I.expiresIn),creationTime:Date.now()}}function _e(I,C){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,C){const F=(yield C.json()).error;return we.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function je(I,{refreshToken:C}){const M=He(I);return M.append("Authorization",function me(I){return`${Q} ${I}`}(C)),M}function te(I){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function ne(I){return Number(I.replace("s","000"))}function ie(I,C){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:M}){const F=ze(I),W=He(I),X=C.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&W.append("x-firebase-client",_t)}const Se={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Q,appId:I.appId,sdkVersion:$})},Qe=yield te(()=>fetch(F,Se));if(Qe.ok){const _t=yield Qe.json();return{fid:_t.fid||M,registrationStatus:2,refreshToken:_t.refreshToken,authToken:Ie(_t.authToken)}}throw yield _e("Create Installation",Qe)})).apply(this,arguments)}function ae(I){return new Promise(C=>{setTimeout(C,I)})}const Kt=/^[cdef][\w-]{21}$/;function it(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function ht(I){return function wt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Kt.test(M)?M:""}catch(I){return""}}function sn(I){return`${I.appName}!${I.appId}`}const on=new Map;function gi(I,C){const M=sn(I);Yt(M,C),function $t(I,C){const M=function Qr(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=I=>{Yt(I.data.key,I.data.fid)}),nr}();M&&M.postMessage({key:I,fid:C}),function Is(){0===on.size&&nr&&(nr.close(),nr=null)}()}(M,C)}function Yt(I,C){const M=on.get(I);if(M)for(const F of M)F(C)}let nr=null;const Ar="firebase-installations-store";let Xi=null;function es(){return Xi||(Xi=(0,J.X3)("firebase-installations-database",1,(I,C)=>{0===C&&I.createObjectStore(Ar)})),Xi}function ot(I,C){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(I,C){const M=sn(I),W=(yield es()).transaction(Ar,"readwrite"),X=W.objectStore(Ar),Ae=yield X.get(M);return yield X.put(C,M),yield W.complete,(!Ae||Ae.fid!==C.fid)&&gi(I,C.fid),C})).apply(this,arguments)}function Wn(I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(I){const C=sn(I),F=(yield es()).transaction(Ar,"readwrite");yield F.objectStore(Ar).delete(C),yield F.complete})).apply(this,arguments)}function Jr(I,C){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(I,C){const M=sn(I),W=(yield es()).transaction(Ar,"readwrite"),X=W.objectStore(Ar),Ae=yield X.get(M),Se=C(Ae);return void 0===Se?yield X.delete(M):yield X.put(Se,M),yield W.complete,Se&&(!Ae||Ae.fid!==Se.fid)&&gi(I,Se.fid),Se})).apply(this,arguments)}function fn(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(I){let C;const M=yield Jr(I.appConfig,F=>{const W=Ds(F),X=ma(I,W);return C=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function Ds(I){return jt(I||{fid:it(),registrationStatus:0})}function ma(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ht(I,C){return tt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:yt(I)}:{installationEntry:C}}function tt(){return(tt=(0,O.Z)(function*(I,C){try{const M=yield ie(I,C);return ot(I.appConfig,M)}catch(M){throw Xe(M)&&409===M.customData.serverCode?yield Wn(I.appConfig):yield ot(I.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function yt(I){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(I){let C=yield Ri(I.appConfig);for(;1===C.registrationStatus;)yield ae(100),C=yield Ri(I.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield fn(I);return F||M}return C})).apply(this,arguments)}function Ri(I){return Jr(I,C=>{if(!C)throw we.create("installation-not-found");return jt(C)})}function jt(I){return function ro(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function pr(I,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},M){const F=at(I,M),W=je(I,M),X=C.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&W.append("x-firebase-client",_t)}const Se={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:$,appId:I.appId}})},Qe=yield te(()=>fetch(F,Se));if(Qe.ok)return Ie(yield Qe.json());throw yield _e("Generate Auth Token",Qe)})).apply(this,arguments)}function at(I,{fid:C}){return`${ze(I)}/${C}/authTokens:generate`}function gr(I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(I,C=!1){let M;const F=yield Jr(I.appConfig,X=>{if(!Pt(X))throw we.create("not-registered");const Ae=X.authToken;if(!C&&B(Ae))return X;if(1===Ae.requestStatus)return M=We(I,C),X;{if(!navigator.onLine)throw we.create("app-offline");const Se=H(X);return M=ut(I,Se),Se}});return M?yield M:F.authToken})).apply(this,arguments)}function We(I,C){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(I,C){let M=yield Ye(I.appConfig);for(;1===M.authToken.requestStatus;)yield ae(100),M=yield Ye(I.appConfig);const F=M.authToken;return 0===F.requestStatus?gr(I,C):F})).apply(this,arguments)}function Ye(I){return Jr(I,C=>{if(!Pt(C))throw we.create("not-registered");return function ce(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function ut(I,C){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I,C){try{const M=yield pr(I,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield ot(I.appConfig,F),M}catch(M){if(!Xe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ot(I.appConfig,F)}else yield Wn(I.appConfig);throw M}})).apply(this,arguments)}function Pt(I){return void 0!==I&&2===I.registrationStatus}function B(I){return 2===I.requestStatus&&!function L(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function H(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function Le(){return(Le=(0,O.Z)(function*(I){const C=I,{installationEntry:M,registrationPromise:F}=yield fn(C);return F?F.catch(console.error):gr(C).catch(console.error),M.fid})).apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(I,C=!1){const M=I;return yield mr(M),(yield gr(M,C)).token})).apply(this,arguments)}function mr(I){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(I){const{registrationPromise:C}=yield fn(I);C&&(yield C)})).apply(this,arguments)}function jn(I){return we.create("missing-app-config-values",{valueName:I})}const _a="installations",Oe=I=>{const C=I.getProvider("app").getImmediate(),M=function ts(I){if(!I||!I.options)throw jn("App Configuration");if(!I.name)throw jn("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!I.options[M])throw jn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Mt=I=>{const C=I.getProvider("app").getImmediate(),M=(0,ue._getProvider)(C,_a).getImmediate();return{getId:()=>function Y(I){return Le.apply(this,arguments)}(M),getToken:W=>function ft(I){return zt.apply(this,arguments)}(M,W)}};(function cn(){(0,ue._registerComponent)(new ge.wA(_a,Oe,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",Mt,"PRIVATE"))})(),(0,ue.registerVersion)(he,"0.5.8"),(0,ue.registerVersion)(he,"0.5.8","esm2017");const sr="@firebase/remote-config",xn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wh{constructor(C,M,F,W){this.client=C,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return W;C.eTag=W&&W.eTag;const X=yield M.client.fetch(C),Ae=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function Ac(I=navigator){return I.languages&&I.languages[0]||I.language}class su{constructor(C,M,F,W,X,Ae){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=X,this.appId=Ae}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Se={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Qe={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:Ac()},_t={method:"POST",headers:Se,body:JSON.stringify(Qe)},xt=fetch(Ae,_t),bt=new Promise((ai,Di)=>{C.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",Di(vo)})});let Ln;try{yield Promise.race([xt,bt]),Ln=yield xt}catch(ai){let Di="fetch-client-network";throw"AbortError"===ai.name&&(Di="fetch-timeout"),xn.create(Di,{originalErrorMessage:ai.message})}let In=Ln.status;const Qo=Ln.headers.get("ETag")||void 0;let _o,xr;if(200===Ln.status){let ai;try{ai=yield Ln.json()}catch(Di){throw xn.create("fetch-client-parse",{originalErrorMessage:Di.message})}_o=ai.entries,xr=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===xr?In=500:"NO_CHANGE"===xr?In=304:("NO_TEMPLATE"===xr||"EMPTY_CONFIG"===xr)&&(_o={}),304!==In&&200!==In)throw xn.create("fetch-status",{httpStatus:In});return{status:In,eTag:Qo,config:_o}})()}}class Vp{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function Pn(I,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),X=setTimeout(M,W);I.addEventListener(()=>{clearTimeout(X),F(xn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const X=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Sc(I){if(!(I instanceof J.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Ae),W.attemptFetch(C,Ae)}})()}}class xc{constructor(C,M,F,W,X){this.app=C,this._client=M,this._storageCache=F,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function il(I,C){const M=I.target.error||void 0;return xn.create(C,{originalErrorMessage:M&&M.message})}const xs="app_namespace_store";class $p{constructor(C,M,F,W=function jp(){return new Promise((I,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(il(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(xs,{keyPath:"compositeKey"})}}catch(M){C(xn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const Se=F.transaction([xs],"readonly").objectStore(xs),Qe=M.createCompositeKey(C);try{const _t=Se.get(Qe);_t.onerror=xt=>{X(il(xt,"storage-get"))},_t.onsuccess=xt=>{const bt=xt.target.result;W(bt?bt.value:void 0)}}catch(_t){X(xn.create("storage-get",{originalErrorMessage:_t&&_t.message}))}})})()}set(C,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((X,Ae)=>{const Qe=W.transaction([xs],"readwrite").objectStore(xs),_t=F.createCompositeKey(C);try{const xt=Qe.put({compositeKey:_t,value:M});xt.onerror=bt=>{Ae(il(bt,"storage-set"))},xt.onsuccess=()=>{X()}}catch(xt){Ae(xn.create("storage-set",{originalErrorMessage:xt&&xt.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const Se=F.transaction([xs],"readwrite").objectStore(xs),Qe=M.createCompositeKey(C);try{const _t=Se.delete(Qe);_t.onerror=xt=>{X(il(xt,"storage-delete"))},_t.onsuccess=()=>{W()}}catch(_t){X(xn.create("storage-delete",{originalErrorMessage:_t&&_t.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Rc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),X=yield M;X&&(C.lastFetchStatus=X);const Ae=yield F;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const Se=yield W;Se&&(C.activeConfig=Se)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function oo(){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Fo(){(0,ue._registerComponent)(new ge.wA("remote-config",function I(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xn.create("registration-window");if(!(0,J.hl)())throw xn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:Se}=F.options;if(!X)throw xn.create("registration-project-id");if(!Ae)throw xn.create("registration-api-key");if(!Se)throw xn.create("registration-app-id");const Qe=new $p(Se,F.name,M=M||"firebase"),_t=new Rc(Qe),xt=new oe.Yd(sr);xt.logLevel=oe.in.ERROR;const bt=new su(W,ue.SDK_VERSION,M,X,Ae,Se),Ln=new Vp(bt,Qe),In=new wh(Ln,Qe,_t,xt),Qo=new xc(F,In,_t,Qe,xt);return function or(I){const C=(0,J.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Qo),Qo},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(sr,"0.3.7"),(0,ue.registerVersion)(sr,"0.3.7","esm2017")}();const sl="/firebase-messaging-sw.js",Ms="/firebase-cloud-messaging-push-scope",Br="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ao="google.c.a.c_id",wa="google.c.a.c_l",Nc="google.c.a.ts",Hp="google.c.a.e";var Rs=(()=>{return(I=Rs||(Rs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Rs;var I})();function ti(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function au(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let X=0;X<F.length;++X)W[X]=F.charCodeAt(X);return W}const uu="fcm_token_details_db",ar="fcm_token_object_Store";function bh(I){return lu.apply(this,arguments)}function lu(){return lu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(uu))return null;let C=null;return(yield(0,J.X3)(uu,5,function(){var F=(0,O.Z)(function*(W,X,Ae,Se){var Qe;if(X<2||!W.objectStoreNames.contains(ar))return;const _t=Se.objectStore(ar),xt=yield _t.index("fcmSenderId").get(I);if(yield _t.clear(),xt)if(2===X){const bt=xt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;C={token:bt.fcmToken,createTime:null!==(Qe=bt.createTime)&&void 0!==Qe?Qe:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:ti(bt.vapidKey)}}}else if(3===X){const bt=xt;C={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ti(bt.auth),p256dh:ti(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ti(bt.vapidKey)}}}else if(4===X){const bt=xt;C={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ti(bt.auth),p256dh:ti(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ti(bt.vapidKey)}}}});return function(W,X,Ae,Se){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(uu),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Oc(C)?C:null}),lu.apply(this,arguments)}function Oc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ss="firebase-messaging-store";let Ea=null;function ol(){return Ea||(Ea=(0,J.X3)("firebase-messaging-database",1,(I,C)=>{0===C&&I.createObjectStore(ss)})),Ea}function hn(I){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I){const C=lo(I),F=yield(yield ol()).transaction(ss).objectStore(ss).get(C);if(F)return F;{const W=yield bh(I.appConfig.senderId);if(W)return yield Ns(I,W),W}})).apply(this,arguments)}function Ns(I,C){return rn.apply(this,arguments)}function rn(){return(rn=(0,O.Z)(function*(I,C){const M=lo(I),W=(yield ol()).transaction(ss,"readwrite");return yield W.objectStore(ss).put(C,M),yield W.complete,C})).apply(this,arguments)}function Pc(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(I){const C=lo(I),F=(yield ol()).transaction(ss,"readwrite");yield F.objectStore(ss).delete(C),yield F.complete})).apply(this,arguments)}function lo({appConfig:I}){return I.appId}const Mn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ba(I,C){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(I,C){const M=yield Ps(I),F=lt(C),W={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch($r(I.appConfig),W)).json()}catch(Ae){throw Mn.create("token-subscribe-failed",{errorInfo:Ae})}if(X.error)throw Mn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function _r(I,C){return Os.apply(this,arguments)}function Os(){return(Os=(0,O.Z)(function*(I,C){const M=yield Ps(I),F=lt(C.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${$r(I.appConfig)}/${C.token}`,W)).json()}catch(Ae){throw Mn.create("token-update-failed",{errorInfo:Ae})}if(X.error)throw Mn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-update-no-token");return X.token})).apply(this,arguments)}function os(I,C){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(I,C){const F={method:"DELETE",headers:yield Ps(I)};try{const X=yield(yield fetch(`${$r(I.appConfig)}/${C}`,F)).json();if(X.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw Mn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function $r({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ps(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,O.Z)(function*({appConfig:I,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function lt({p256dh:I,auth:C,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:C,p256dh:I}};return F!==Br&&(W.web.applicationPubKey=F),W}const fu=6048e5;function Ia(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I){const C=yield ll(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:ti(C.getKey("auth")),p256dh:ti(C.getKey("p256dh"))},F=yield hn(I.firebaseDependencies);if(F){if(Bo(F.subscriptionOptions,M))return Date.now()>=F.createTime+fu?al(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield os(I.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Ee(I.firebaseDependencies,M)}return Ee(I.firebaseDependencies,M)})).apply(this,arguments)}function gu(I){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(I){const C=yield hn(I.firebaseDependencies);C&&(yield os(I.firebaseDependencies,C.token),yield Pc(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function al(I,C){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(I,C){try{const M=yield _r(I.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Ns(I.firebaseDependencies,F),M}catch(M){throw yield gu(I),M}})).apply(this,arguments)}function Ee(I,C){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(I,C){const F={token:yield ba(I,C),createTime:Date.now(),subscriptionOptions:C};return yield Ns(I,F),F.token})).apply(this,arguments)}function ll(I,C){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:au(C)})})).apply(this,arguments)}function Bo(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function jo(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Hr(I,C){if(!C.notification)return;I.notification={};const M=C.notification.title;M&&(I.notification.title=M);const F=C.notification.body;F&&(I.notification.body=F);const W=C.notification.image;W&&(I.notification.image=W)}(C,I),function cl(I,C){!C.data||(I.data=C.data)}(C,I),function dl(I,C){if(!C.fcmOptions)return;I.fcmOptions={};const M=C.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=C.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(C,I),C}function kc(I){return"object"==typeof I&&!!I&&ao in I}function hl(I,C){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function Fs(I){return Mn.create("missing-app-config-values",{valueName:I})}hl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ur{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function yu(I){if(!I||!I.options)throw Fs("App Configuration Object");if(!I.name)throw Fs("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of C)if(!M[F])throw Fs(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ni(I){return _u.apply(this,arguments)}function _u(){return(_u=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(sl,{scope:Ms}),I.swRegistration.update().catch(()=>{})}catch(C){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ls(I,C){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield ni(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function fl(I,C){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=Br)})).apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(I,C){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield fl(I,null==C?void 0:C.vapidKey),yield Ls(I,null==C?void 0:C.serviceWorkerRegistration),Ia(I)})).apply(this,arguments)}function Da(I,C,M){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(I,C,M){const F=gl(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ao],message_name:M[wa],message_time:M[Nc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gl(I){switch(I){case Rs.NOTIFICATION_CLICKED:return"notification_open";case Rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fc(){return(Fc=(0,O.Z)(function*(I,C){const M=C.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Rs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(jo(M)):I.onMessageHandler.next(jo(M)));const F=M.data;kc(F)&&"1"===F[Hp]&&(yield Da(I,M.messageType,F))})).apply(this,arguments)}const yl="@firebase/messaging",Lc=I=>{const C=new ur(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function ml(I,C){return Fc.apply(this,arguments)}(C,M)),C},ho=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:F=>function wu(I,C){return pl.apply(this,arguments)}(C,F)}};function Uc(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vc(){(0,ue._registerComponent)(new ge.wA("messaging",Lc,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",ho,"PRIVATE")),(0,ue.registerVersion)(yl,"0.9.12"),(0,ue.registerVersion)(yl,"0.9.12","esm2017")}();const vl="analytics",yy="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eu="https://www.googletagmanager.com/gtag/js",kn=new oe.Yd("@firebase/analytics");function Bc(I){return Promise.all(I.map(C=>C.catch(M=>M)))}function Gp(I,C){const M=document.createElement("script");M.src=`${Eu}?l=${I}&id=${C}`,M.async=!0,document.head.appendChild(M)}function $o(I,C,M,F,W,X){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(I,C,M,F,W,X){const Ae=F[W];try{if(Ae)yield C[Ae];else{const Qe=(yield Bc(M)).find(_t=>_t.measurementId===W);Qe&&(yield C[Qe.appId])}}catch(Se){kn.error(Se)}I("config",W,X)})).apply(this,arguments)}function El(I,C,M,F,W){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(I,C,M,F,W){try{let X=[];if(W&&W.send_to){let Ae=W.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Se=yield Bc(M);for(const Qe of Ae){const _t=Se.find(bt=>bt.measurementId===Qe),xt=_t&&C[_t.appId];if(!xt){X=[];break}X.push(xt)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),I("event",F,W||{})}catch(X){kn.error(X)}})).apply(this,arguments)}function qp(){const I=window.document.getElementsByTagName("script");for(const C of Object.values(I))if(C.src&&C.src.includes(Eu))return C;return null}const Rn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sr=new class Gr{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ho(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Hc(I){return dn.apply(this,arguments)}function dn(){return(dn=(0,O.Z)(function*(I){var C;const{appId:M,apiKey:F}=I,W={method:"GET",headers:Ho(F)},X=Ta.replace("{app-id}",M),Ae=yield fetch(X,W);if(200!==Ae.status&&304!==Ae.status){let Se="";try{const Qe=yield Ae.json();(null===(C=Qe.error)||void 0===C?void 0:C.message)&&(Se=Qe.error.message)}catch(Qe){}throw Rn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Se})}return Ae.json()})).apply(this,arguments)}function Ch(I){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(I,C=Sr,M){const{appId:F,apiKey:W,measurementId:X}=I.options;if(!F)throw Rn.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:F};throw Rn.create("no-api-key")}const Ae=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Se=new bl;return setTimeout((0,O.Z)(function*(){Se.abort()}),void 0!==M?M:6e4),bu({appId:F,apiKey:W,measurementId:X},Ae,Se,C)})).apply(this,arguments)}function bu(I,C,M){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:M},F,W=Sr){const{appId:X,measurementId:Ae}=I;try{yield Ft(F,C)}catch(Se){if(Ae)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}try{const Se=yield Hc(I);return W.deleteThrottleMetadata(X),Se}catch(Se){if(!Gc(Se)){if(W.deleteThrottleMetadata(X),Ae)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}const Qe=503===Number(Se.customData.httpStatus)?(0,J.$s)(M,W.intervalMillis,30):(0,J.$s)(M,W.intervalMillis),_t={throttleEndTimeMillis:Date.now()+Qe,backoffCount:M+1};return W.setThrottleMetadata(X,_t),kn.debug(`Calling attemptFetch again in ${Qe} millis`),bu(I,_t,F,W)}})).apply(this,arguments)}function Ft(I,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),X=setTimeout(M,W);I.addEventListener(()=>{clearTimeout(X),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Gc(I){if(!(I instanceof J.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class bl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function qc(){return go.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(){if(!(0,J.hl)())return kn.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(I){return kn.warn(Rn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(I,C,M,F,W,X,Ae){var Se;const Qe=Ch(I);Qe.then(In=>{M[In.measurementId]=In.appId,I.options.measurementId&&In.measurementId!==I.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>kn.error(In)),C.push(Qe);const _t=qc().then(In=>{if(In)return F.getId()}),[xt,bt]=yield Promise.all([Qe,_t]);qp()||Gp(X,xt.measurementId),W("js",new Date);const Ln=null!==(Se=null==Ae?void 0:Ae.config)&&void 0!==Se?Se:{};return Ln.origin="firebase",Ln.update=!0,null!=bt&&(Ln[yy]=bt),W("config",xt.measurementId,Ln),xt.measurementId})).apply(this,arguments)}class Go{constructor(C){this.app=C}_delete(){return delete ii[this.app.options.appId],Promise.resolve()}}let ii={},Bs=[];const Aa={};let js,Pi,Oi="dataLayer",Dl=!1;function wi(I,C,M){!function qo(){const I=[];if((0,J.ru)()&&I.push("This is a browser extension environment."),(0,J.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=Rn.create("invalid-analytics-context",{errorInfo:C});kn.warn(M.message)}}();const F=I.options.appId;if(!F)throw Rn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Rn.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ii[F])throw Rn.create("already-exists",{id:F});if(!Dl){!function us(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(Oi);const{wrappedGtag:X,gtagCore:Ae}=function Dh(I,C,M,F,W){let X=function(...Ae){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function $c(I,C,M,F){function X(){return(X=(0,O.Z)(function*(Ae,Se,Qe){try{"event"===Ae?yield El(I,C,M,Se,Qe):"config"===Ae?yield $o(I,C,M,F,Se,Qe):I("set",Se)}catch(_t){kn.error(_t)}})).apply(this,arguments)}return function W(Ae,Se,Qe){return X.apply(this,arguments)}}(X,I,C,M),{gtagCore:X,wrappedGtag:window[W]}}(ii,Bs,Aa,Oi,"gtag");Pi=X,js=Ae,Dl=!0}return ii[F]=function Nn(I,C,M,F,W,X,Ae){return ls.apply(this,arguments)}(I,Bs,Aa,C,js,Oi,M),new Go(I)}function Sa(){return(Sa=(0,O.Z)(function*(I,C,M,F,W){if(W&&W.global)I("event",M,F);else{const X=yield C;I("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function En(){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}const Hs="@firebase/analytics";!function Kp(){(0,ue._registerComponent)(new ge.wA(vl,(C,{options:M})=>wi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function I(C){try{const M=C.getProvider(vl).getImmediate();return{logEvent:(F,W,X)=>function Zp(I,C,M,F){I=(0,J.m9)(I),function zo(I,C,M,F,W){return Sa.apply(this,arguments)}(Pi,ii[I.app.options.appId],C,M,F).catch(W=>kn.error(W))}(M,F,W,X)}}catch(M){throw Rn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Hs,"0.7.8"),(0,ue.registerVersion)(Hs,"0.7.8","esm2017")}();var Gs=k(4408),Iu=k(7565);const Cl=new class yn extends Iu.v{}(class ds extends Gs.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var Yp=k(4986),Tl=k(8505),cr=k(5363),si=k(9468);const Al=new f.GfV("7.3.0"),hs="__angularfire_symbol__analyticsIsSupportedValue",Ii="__angularfire_symbol__analyticsIsSupported",Fi="__angularfire_symbol__remoteConfigIsSupportedValue",xa="__angularfire_symbol__remoteConfigIsSupported",Sl="__angularfire_symbol__messagingIsSupportedValue",xl="__angularfire_symbol__messagingIsSupported";function qs(I,C,M){if(C){if(1===C.length)return C[0];const X=C.filter(Ae=>Ae.app===M);if(1===X.length)return X[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ii]||(globalThis[Ii]=En().then(I=>globalThis[hs]=I).catch(()=>globalThis[hs]=!1)),globalThis[xl]||(globalThis[xl]=Uc().then(I=>globalThis[Sl]=I).catch(()=>globalThis[Sl]=!1)),globalThis[xa]||(globalThis[xa]=oo().then(I=>globalThis[Fi]=I).catch(()=>globalThis[Fi]=!1));const Kc=(I,C)=>{const M=C?[C]:(0,K.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(I).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function mo(){}class Du{constructor(C,M=Cl){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const W=this.zone;return this.delegate.schedule(function(Ae){W.runGuarded(()=>{C.apply(this,[Ae])})},M,F)}}class Li{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mo,{},mo,mo)),M.pipe((0,Tl.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Cu=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Du(Zone.current)),this.insideAngular=M.run(()=>new Du(Zone.current,Yp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Vi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Fn(I){return I.pipe((0,cr.Q)(Vi().outsideAngular))}function Nl(I){return Vi(),function yo(I){return function(M){return(M=M.lift(new Li(I.ngZone))).pipe((0,si.R)(I.outsideAngular),(0,cr.Q)(I.insideAngular))}}(Vi())(I)}},2090:(rt,Ce,k)=>{k.d(Ce,{$s:()=>ro,BH:()=>Te,G6:()=>te,L:()=>le,LL:()=>wt,Lj:()=>Bt,Mn:()=>He,Sg:()=>Ne,UG:()=>we,US:()=>oe,X3:()=>ut,ZB:()=>Q,ZR:()=>ae,b$:()=>Ie,d:()=>_e,eu:()=>ne,hl:()=>z,jU:()=>Xe,m9:()=>at,ne:()=>ot,pd:()=>Xi,r3:()=>Yt,ru:()=>ze,tV:()=>j,uI:()=>fe,vZ:()=>Is,w1:()=>ve,xO:()=>Mi,xb:()=>nr,z$:()=>Fe,zI:()=>me,zd:()=>Ar});var f=k(5861);const J=function(B){const L=[];let H=0;for(let ce=0;ce<B.length;ce++){let Y=B.charCodeAt(ce);Y<128?L[H++]=Y:Y<2048?(L[H++]=Y>>6|192,L[H++]=63&Y|128):55296==(64512&Y)&&ce+1<B.length&&56320==(64512&B.charCodeAt(ce+1))?(Y=65536+((1023&Y)<<10)+(1023&B.charCodeAt(++ce)),L[H++]=Y>>18|240,L[H++]=Y>>12&63|128,L[H++]=Y>>6&63|128,L[H++]=63&Y|128):(L[H++]=Y>>12|224,L[H++]=Y>>6&63|128,L[H++]=63&Y|128)}return L},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Y=0;Y<B.length;Y+=3){const Le=B[Y],ft=Y+1<B.length,zt=ft?B[Y+1]:0,mr=Y+2<B.length,Gt=mr?B[Y+2]:0;let ln=(15&zt)<<2|Gt>>6,Kn=63&Gt;mr||(Kn=64,ft||(ln=64)),ce.push(H[Le>>2],H[(3&Le)<<4|zt>>4],H[ln],H[Kn])}return ce.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(J(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let H=0,ce=0;for(;H<B.length;){const Y=B[H++];if(Y<128)L[ce++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=B[H++];L[ce++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const mr=((7&Y)<<18|(63&B[H++])<<12|(63&B[H++])<<6|63&B[H++])-65536;L[ce++]=String.fromCharCode(55296+(mr>>10)),L[ce++]=String.fromCharCode(56320+(1023&mr))}else{const Le=B[H++],ft=B[H++];L[ce++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Y=0;Y<B.length;){const Le=H[B.charAt(Y++)],zt=Y<B.length?H[B.charAt(Y)]:0;++Y;const Gt=Y<B.length?H[B.charAt(Y)]:64;++Y;const St=Y<B.length?H[B.charAt(Y)]:64;if(++Y,null==Le||null==zt||null==Gt||null==St)throw Error();ce.push(Le<<2|zt>>4),64!==Gt&&(ce.push(zt<<4&240|Gt>>2),64!==St&&ce.push(Gt<<6&192|St))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const L=J(B);return oe.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return oe.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!qe(H)||(B[H]=Q(B[H],L[H]));return B}function qe(B){return"__proto__"!==B}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,ce)=>{H?this.reject(H):this.resolve(ce),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,ce))}}}function Ne(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=L||"demo-project",Y=B.iat||0,Le=B.sub||B.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ft)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ze(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Fe().indexOf("Electron/")>=0}function ve(){const B=Fe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Fe().indexOf("MSAppHost/")>=0}function te(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ne(){return new Promise((B,L)=>{try{let H=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(ce);Y.onsuccess=()=>{Y.result.close(),H||self.indexedDB.deleteDatabase(ce),B(!0)},Y.onupgradeneeded=()=>{H=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch(H){L(H)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(L,H,ce){super(H),this.code=L,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(L,H,ce){this.service=L,this.serviceName=H,this.errors=ce}create(L,...H){const ce=H[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],ft=Le?function Kt(B,L){return B.replace(Sn,(H,ce)=>{const Y=L[ce];return null!=Y?String(Y):`<${ce}?>`})}(Le,ce):"Error";return new ae(Y,`${this.serviceName}: ${ft} (${Y}).`,ce)}}const Sn=/\{\$([^}]+)}/g;function Yt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function nr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Is(B,L){if(B===L)return!0;const H=Object.keys(B),ce=Object.keys(L);for(const Y of H){if(!ce.includes(Y))return!1;const Le=B[Y],ft=L[Y];if(Tr(Le)&&Tr(ft)){if(!Is(Le,ft))return!1}else if(Le!==ft)return!1}for(const Y of ce)if(!H.includes(Y))return!1;return!0}function Tr(B){return null!==B&&"object"==typeof B}function Mi(B){const L=[];for(const[H,ce]of Object.entries(B))Array.isArray(ce)?ce.forEach(Y=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(ce));return L.length?"&"+L.join("&"):""}function Ar(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Y,Le]=ce.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function Xi(B){const L=B.indexOf("?");if(!L)return"";const H=B.indexOf("#",L);return B.substring(L,H>0?H:void 0)}function ot(B,L){const H=new Vr(B,L);return H.subscribe.bind(H)}class Vr{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(ce=>{this.error(ce)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,ce){let Y;if(void 0===L&&void 0===H&&void 0===ce)throw new Error("Missing Observer.");Y=function Bn(B,L){if("object"!=typeof B||null===B)return!1;for(const H of L)if(H in B&&"function"==typeof B[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:ce},void 0===Y.next&&(Y.next=Jr),void 0===Y.error&&(Y.error=Jr),void 0===Y.complete&&(Y.complete=Jr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ft){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}function ro(B,L=1e3,H=2){const ce=L*Math.pow(H,B),Y=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Y)}function at(B){return B&&B._delegate?B._delegate:B}function gr(B,L){return new Promise((H,ce)=>{B.onsuccess=Y=>{H(Y.target.result)},B.onerror=Y=>{var Le;ce(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Ut{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H="readonly"){return new We(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new De(this._db.createObjectStore(L,H))}close(){this._db.close()}}class We{constructor(L){this._transaction=L,this.complete=new Promise((H,ce)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(L){return new De(this._transaction.objectStore(L))}}class De{constructor(L){this._store=L}index(L){return new Ye(this._store.index(L))}createIndex(L,H,ce){return new Ye(this._store.createIndex(L,H,ce))}get(L){return gr(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return gr(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return gr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return gr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ye{constructor(L){this._index=L}get(L){return gr(this._index.get(L),"Error reading from IndexedDB")}}function ut(B,L,H){return new Promise((ce,Y)=>{try{const Le=indexedDB.open(B,L);Le.onsuccess=ft=>{ce(new Ut(ft.target.result))},Le.onerror=ft=>{var zt;Y(`Error opening indexedDB: ${null===(zt=ft.target.error)||void 0===zt?void 0:zt.message}`)},Le.onupgradeneeded=ft=>{H(new Ut(Le.result),ft.oldVersion,ft.newVersion,new We(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function Bt(B){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(B){return new Promise((L,H)=>{try{const ce=indexedDB.deleteDatabase(B);ce.onsuccess=()=>{L()},ce.onerror=Y=>{var Le;H(`Error deleting indexedDB database "${B}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(ce){H(`Error deleting indexedDB database "${B}": ${ce.message}`)}})})).apply(this,arguments)}},2976:(rt,Ce,k)=>{var f=k(5e3);let K=null;function O(){return K}const oe=new f.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function le(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const j=new f.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function qe(){return new $((0,f.LFG)(oe))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function we(n){const e=(0,f.LFG)(oe).location;return new ze((0,f.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new f.OlP("appBaseHref");let ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Fe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Fe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(Xe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Fe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Fe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(Xe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fe(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=Te,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return new _e((0,f.LFG)(fe),(0,f.LFG)(he))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class As{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new As(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ns(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ns(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ns(n,e){n.context.$implicit=e.item}let or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class nn{constructor(){this.$implicit=null,this.ngIf=null}}function nu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function ar(n){return"server"===n}let cu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new du((0,f.LFG)(oe),window)}),n})();class du{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ea(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ss(this.window.history)||ss(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ss(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ns extends class Uo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){K||(K=n)}(new Ns)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pc(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function lo(n){uo=uo||document.createElement("a"),uo.setAttribute("href",n);const e=uo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let uo,rn=null;const yr=new f.OlP("TRANSITION_ID"),ba=[{provide:f.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[yr,oe,f.zs3],multi:!0}];class yi{static init(){(0,f.VLi)(new yi)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Os=new f.OlP("EventManagerPlugins");let os=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Os),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class hu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $r=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends $r{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ks))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ks(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fu=/%COMP%/g;function Ee(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ee(n,o,t):(o=o.replace(fu,n),t.push(o))}return t}function kt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Bo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ee(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(os),f.LFG(Ps),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Bo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,kt(r)):this.eventManager.addEventListener(e,t,kt(r))}}class cl extends Bo{constructor(e,t,r,o){super(e),this.component=r;const u=Ee(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function al(n){return"_ngcontent-%COMP%".replace(fu,n)}(o+"-"+r.id),this.hostAttr=function ul(n){return"_nghost-%COMP%".replace(fu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dl extends Bo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ee(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kc=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const hl=["alt","control","meta","shift"],Fs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _u=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(hl.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ls(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ur.hasOwnProperty(e)&&(e=ur[e]))}return Fs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),hl.forEach(u=>{u!=o&&ni[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function _i(){Ns.makeCurrent(),yi.init()},multi:!0},{provide:oe,useFactory:function vu(){return(0,f.RDi)(document),document},deps:[]}]),Da=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function fl(){return new f.qLn},deps:[]},{provide:Os,useClass:kc,multi:!0,deps:[oe,f.R0b,f.Lbi]},{provide:Os,useClass:_u,multi:!0,deps:[oe]},{provide:gn,useClass:gn,deps:[os,Ps,f.AFp]},{provide:f.FYo,useExisting:gn},{provide:$r,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[oe]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:os,useClass:os,deps:[Os,f.R0b]},{provide:class hn{},useClass:_r,deps:[]}];let Ca=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:yr,useExisting:f.AFp},ba]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Da,imports:[Vo,f.hGG]}),n})();"undefined"!=typeof window&&window;var pn=k(8996),Rn=k(7669);function ct(...n){const e=(0,Rn.yG)(n);return(0,pn.D)(n,e)}var lr=k(7579);class Gr extends lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Sr=k(8306);const{isArray:Ho}=Array,{getPrototypeOf:Hc,prototype:dn,keys:Ch}=Object;function vi(n){if(1===n.length){const e=n[0];if(Ho(e))return{args:e,keys:null};if(function bu(n){return n&&"object"==typeof n&&Hc(n)===dn}(e)){const t=Ch(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ri=k(4671),Ft=k(4004);const{isArray:Gc}=Array;function qc(n){return(0,Ft.U)(e=>function bl(n,e){return Gc(e)?n(...e):n(e)}(n,e))}function go(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Nn=k(5403),ls=k(9672);function Bs(n,e,t){n?(0,ls.f)(t,n,e):e()}var Aa=k(576);function Oi(n,e){const t=(0,Aa.m)(n)?n:()=>n,r=o=>o.error(t());return new Sr.y(e?o=>e.schedule(r,0,o):r)}const js=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Pi=k(8189);function zc(...n){return function Dl(){return(0,Pi.J)(1)}()((0,pn.D)(n,(0,Rn.yG)(n)))}var qo=k(8421);function wi(n){return new Sr.y(e=>{(0,qo.Xf)(n()).subscribe(e)})}var zo=k(515),Sa=k(727),wr=k(4482);function Ei(){return(0,wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Nn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Wc extends Sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Sa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Nn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Sa.w0.EMPTY)}return e}refCount(){return Ei()(this)}}function mn(n,e){return(0,wr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Nn.x)(r,w=>{null==o||o.unsubscribe();let D=0;const x=u++;(0,qo.Xf)(n(w,x)).subscribe(o=(0,Nn.x)(r,R=>r.next(e?e(w,R,x,D++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Wo=k(5698);function bi(...n){const e=(0,Rn.yG)(n);return(0,wr.e)((t,r)=>{(e?zc(n,t,e):zc(n,t)).subscribe(r)})}function Zo(n,e,t,r,o){return(u,d)=>{let m=t,w=e,D=0;u.subscribe((0,Nn.x)(d,x=>{const R=D++;w=m?n(w,x,R):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Er(n,e){return(0,wr.e)(Zo(n,e,arguments.length>=2,!0))}function cs(n,e){return(0,wr.e)((t,r)=>{let o=0;t.subscribe((0,Nn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ki(n){return(0,wr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Nn.x)(t,void 0,void 0,d=>{u=(0,qo.Xf)(n(d,ki(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var En=k(5577);function $s(n,e){return(0,Aa.m)(e)?(0,En.z)(n,e,1):(0,En.z)(n,1)}function Zc(n){return n<=0?()=>zo.E:(0,wr.e)((e,t)=>{let r=[];e.subscribe((0,Nn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bn(n=zp){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,Nn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function zp(){return new js}function Wp(n){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,Nn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Hs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cs((o,u)=>n(o,u,r)):ri.y,(0,Wo.q)(1),t?Wp(e):bn(()=>new js))}var qr=k(8505);class Gs{constructor(e,t){this.id=e,this.url=t}}class ds extends Gs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iu extends Gs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yn extends Gs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cl extends Gs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ko extends Gs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yp extends Gs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tl extends Gs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cr extends Gs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si extends Gs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Al{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ii{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class Ml{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $n(n){return new Ml(n)}const Rl="ngNavigationCancelingError";function qs(n){const e=Error("NavigationCancelingError: "+n);return e[Rl]=!0,e}function mo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Li(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Cu(n[o],e[o]))return!1;return!0}function Cu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Vi(n){return Array.prototype.concat.apply([],n)}function Yc(n){return n.length>0?n[n.length-1]:null}function Fn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function oi(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,pn.D)(Promise.resolve(n)):ct(n)}const yo={exact:function C(n,e,t){if(!xt(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},Yo={exact:function I(n,e){return Li(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cu(n[t],e[t]))},ignored:()=>!0};function Tu(n,e,t){return yo[t.paths](n.root,e.root,t.matrixParams)&&Yo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return W(n,e,e.segments,t)}function W(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!xt(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!xt(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(xt(n.segments,o)&&X(n.segments,o,r)&&n.children[Rt])&&W(n.children[Rt],e,u,r)}}function X(n,e,t){return e.every((r,o)=>Yo[t](n[o].parameters,r.parameters))}class Ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$n(this.queryParams)),this._queryParamMap}toString(){return Qo.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _o(this)}}class Qe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$n(this.parameters)),this._parameterMap}toString(){return Ma(this)}}function xt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ln{}class In{parse(e){const t=new Jc(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xr(e.root,!0)}`,r=function _y(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Di(t)}=${Di(o)}`).join("&"):`${Di(t)}=${Di(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function vo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qo=new In;function _o(n){return n.segments.map(e=>Ma(e)).join("/")}function xr(n,e){if(!n.hasChildren())return _o(n);if(e){const t=n.children[Rt]?xr(n.children[Rt],!1):"",r=[];return Fn(n.children,(o,u)=>{u!==Rt&&r.push(`${u}:${xr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bt(n,e){let t=[];return Fn(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),Fn(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[xr(n.children[Rt],!1)]:[`${o}:${xr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${_o(n)}/${t[0]}`:`${_o(n)}/(${t.join("//")})`}}function ai(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Di(n){return ai(n).replace(/%3B/gi,";")}function Qc(n){return ai(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ol(n){return decodeURIComponent(n)}function Pl(n){return Ol(n.replace(/\+/g,"%20"))}function Ma(n){return`${Qc(n.path)}${function Qp(n){return Object.keys(n).map(e=>`;${Qc(e)}=${Qc(n[e])}`).join("")}(n.parameters)}`}const vy=/^[^\/()?;=#]+/;function fs(n){const e=n.match(vy);return e?e[0]:""}const kl=/^[^=?&#]+/,Ey=/^[^&#]+/;class Jc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Se(e,t)),r}parseSegment(){const e=fs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qe(Ol(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fs(this.remaining);o&&(r=o,this.capture(r))}e[Ol(t)]=Ol(r)}parseQueryParam(e){const t=function wy(n){const e=n.match(kl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Jp(n){const e=n.match(Ey);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Pl(t),u=Pl(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fs(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Rt]:new Se([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class by{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Th(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Th(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ah(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ah(e,this._root).map(t=>t.value)}}function Th(n,e){if(n===e.value)return e;for(const t of e.children){const r=Th(n,t);if(r)return r}return null}function Ah(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ah(n,t);if(r.length)return r.unshift(e),r}return[]}class wo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Xc extends by{constructor(e,t){super(e),this.snapshot=t,td(this,e)}toString(){return this.snapshot.toString()}}function Ra(n,e){const t=function Iy(n,e){const d=new Au([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Sh("",new wo(d,[]))}(n,e),r=new Gr([new Qe("",{})]),o=new Gr({}),u=new Gr({}),d=new Gr({}),m=new Gr(""),w=new Jo(r,o,d,m,u,Rt,e,t.root);return w.snapshot=t.root,new Xc(new wo(w,[]),t)}class Jo{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ft.U)(e=>$n(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ft.U)(e=>$n(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function ed(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Au{constructor(e,t,r,o,u,d,m,w,D,x,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$n(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$n(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sh extends by{constructor(e,t){super(t),this.url=e,td(this,t)}toString(){return nd(this._root)}}function td(n,e){e.value._routerState=n,e.children.forEach(t=>td(n,t))}function nd(n){const e=n.children.length>0?` { ${n.children.map(nd).join(", ")} } `:"";return`${n.value}${e}`}function rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Li(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Li(e.params,t.params)||n.params.next(t.params),function Du(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Li(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Li(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xh(n,e){const t=Li(n.params,e.params)&&function _t(n,e){return xt(n,e)&&n.every((t,r)=>Li(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xh(n.parent,e.parent))}function Fl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Mh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Fl(n,r,o);return Fl(n,r)})}(n,e,t);return new wo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Fl(n,m)),d}}const r=function Ty(n){return new Jo(new Gr(n.url),new Gr(n.params),new Gr(n.queryParams),new Gr(n.fragment),new Gr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Fl(n,u));return new wo(r,o)}}function Xo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Su(n){return"object"==typeof n&&null!=n&&n.outlets}function Xp(n,e,t,r,o){let u={};if(r&&Fn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),n===e)return new Ae(t,u,o);const d=Rh(n,e,t);return new Ae(d,u,o)}function Rh(n,e,t){const r={};return Fn(n.children,(o,u)=>{r[u]=o===e?t:Rh(o,e,t)}),new Se(n.segments,r)}class Ay{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Su);if(o&&o!==Yc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ry(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return Ws(n,e,t);const r=function H0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Su(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ci(w,D,d))return u;r+=2}else{if(!Ci(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Se(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Se(n.segments.slice(r.pathIndex),n.children),Ws(u,0,o)}return r.match&&0===o.length?new Se(n.segments,{}):r.match&&!n.hasChildren()?Oh(n,e,t):r.match?Ws(n,0,o):Oh(n,e,t)}function Ws(n,e,t){if(0===t.length)return new Se(n.segments,{});{const r=function My(n){return Su(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return Fn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ry(n.children[d],e,u))}),Fn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Se(n.segments,o)}}function Oh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Su(u)){const w=xu(u.outlets);return new Se(r,w)}if(0===o&&Xo(t[0])){r.push(new Qe(n.segments[e].path,Ph(t[0]))),o++;continue}const d=Su(u)?u.outlets[Rt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Xo(m)?(r.push(new Qe(d,Ph(m))),o+=2):(r.push(new Qe(d,{})),o++)}return new Se(r,{})}function xu(n){const e={};return Fn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Oh(new Se([],{}),0,t))}),e}function Ph(n){const e={};return Fn(n,(t,r)=>e[r]=`${t}`),e}function Ci(n,e,t){return n==t.path&&Li(e,t.parameters)}class tg{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Eo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Fn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Eo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Sl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Fi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(rd(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),rd(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function id(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class sd{constructor(e,t){this.routes=e,this.module=t}}function Na(n){return"function"==typeof n}function Mu(n){return n instanceof Ae}const Vl=Symbol("INITIAL_VALUE");function ea(){return mn(n=>function Go(...n){const e=(0,Rn.yG)(n),t=(0,Rn.jO)(n),{args:r,keys:o}=vi(n);if(0===r.length)return(0,pn.D)([],e);const u=new Sr.y(function ii(n,e,t=ri.y){return r=>{Bs(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Bs(e,()=>{const D=(0,pn.D)(n[w],e);let x=!1;D.subscribe((0,Nn.x)(r,R=>{u[w]=R,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>go(o,d):ri.y));return t?u.pipe(qc(t)):u}(n.map(e=>e.pipe((0,Wo.q)(1),bi(Vl)))).pipe(Er((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Vl?o:(u===Vl&&(r=!0),r||!1!==u&&d!==t.length-1&&!Mu(u)?o:u),e)},Vl),cs(e=>e!==Vl),(0,Ft.U)(e=>Mu(e)?e:!0===e),(0,Wo.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ul,this.attachRef=null}}class Ul{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Bl=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Vh(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ul),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Vh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Jo?this.route:e===Ul?this.childContexts:this.parent.get(e,t)}}let Uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Bl],encapsulation:2}),n})();function jl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];od(r,Bh(e,r))}}function od(n,e){n.children&&jl(n.children,e)}function Bh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function jh(n){const e=n.children&&n.children.map(jh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Uh),t}function Qt(n){return n.outlet||Rt}function $h(n,e){const t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}const rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ru(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},rg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||mo)(t,n,e);if(!u)return Object.assign({},rg);const d={};Fn(u.posParams,(w,D)=>{d[D]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function $l(n,e,t,r,o="corrected"){if(t.length>0&&function Py(n,e,t){return t.some(r=>ud(n,e,r)&&Qt(r)!==Rt)}(n,t,r)){const d=new Se(e,function ad(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qt(u)!==Rt){const d=new Se([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Qt(u)]=d}return o}(n,e,r,new Se(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ig(n,e,t){return t.some(r=>ud(n,e,r))}(n,t,r)){const d=new Se(n.segments,function Oy(n,e,t,r,o,u){const d={};for(const m of r)if(ud(n,t,m)&&!o[Qt(m)]){const w=new Se([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Qt(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Se(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ud(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ky(n,e,t,r){return!!(Qt(n)===r||r!==Rt&&ud(e,t,n))&&("**"===n.path||Ru(e,n,t).matched)}function Fy(n,e,t){return 0===e.length&&!n.children[t]}class ta{constructor(e){this.segmentGroup=e||null}}class br{constructor(e){this.urlTree=e}}function bo(n){return Oi(new ta(n))}function Hl(n){return Oi(new br(n))}class Gh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=$l(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,Ft.U)(u=>this.createUrlTree(Pa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ki(u=>{if(u instanceof br)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ta?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,Ft.U)(o=>this.createUrlTree(Pa(o),e.queryParams,e.fragment))).pipe(ki(o=>{throw o instanceof ta?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Se([],{[Rt]:e}):e;return new Ae(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ft.U)(u=>new Se([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,pn.D)(o).pipe($s(u=>{const d=r.children[u],m=$h(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Ft.U)(w=>({segment:w,outlet:u})))}),Er((u,d)=>(u[d.outlet]=d.segment,u),{}),function Zp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cs((o,u)=>n(o,u,r)):ri.y,Zc(1),t?Wp(e):bn(()=>new js))}())}expandSegment(e,t,r,o,u,d){return(0,pn.D)(r).pipe($s(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(ki(D=>{if(D instanceof ta)return ct(null);throw D}))),Hs(m=>!!m),ki((m,w)=>{if(m instanceof js||"EmptyError"===m.name)return Fy(t,o,u)?ct(new Se([],{})):bo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return ky(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):bo(t):bo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hl(u):this.lineralizeSegments(r,u).pipe((0,En.z)(d=>{const m=new Se(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:x}=Ru(t,o,u);if(!m)return bo(t);const R=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Hl(R):this.lineralizeSegments(o,R).pipe((0,En.z)(V=>this.expandSegment(e,t,r,V.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ct(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ft.U)(R=>(r._loadedConfig=R,new Se(o,{})))):ct(new Se(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Ru(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,En.z)(x=>{const R=x.module,V=x.routes,{segmentGroup:q,slicedSegments:ee}=$l(t,m,w,V),Me=new Se(q.segments,q.children);if(0===ee.length&&Me.hasChildren())return this.expandChildren(R,V,Me).pipe((0,Ft.U)(mt=>new Se(m,mt)));if(0===V.length&&0===ee.length)return ct(new Se(m,{}));const Ue=Qt(r)===u;return this.expandSegment(R,Me,V,ee,Ue?Rt:u,!0).pipe((0,Ft.U)(Tt=>new Se(m.concat(Tt.segments),Tt.children)))})):bo(t)}getChildConfig(e,t,r){return t.children?ct(new sd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ct(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,En.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ft.U)(u=>(t._loadedConfig=u,u))):function Mr(n){return Oi(qs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ct(new sd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ct(o.map(d=>{const m=e.get(d);let w;if(function kh(n){return n&&Na(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Na(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return oi(w)})).pipe(ea(),(0,qr.b)(d=>{if(!Mu(d))return;const m=qs(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Ft.U)(d=>!0===d)):ct(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ct(r);if(o.numberOfChildren>1||!o.children[Rt])return Oi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ae(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Fn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Se(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Pa(n){const e={};for(const r of Object.keys(n.children)){const u=Pa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ti(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}class sg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ka{constructor(e,t){this.component=e,this.route=t}}function zh(n,e,t){const r=n._root;return ui(r,e?e._root:null,t,[r.value])}function Gl(n,e,t){const r=function Ly(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ui(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Eo(e);return n.children.forEach(d=>{(function ag(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Vy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xt(n.url,e.url)||!Li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xh(n,e)||!Li(n.queryParams,e.queryParams);default:return!xh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new sg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),ui(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new ka(m.outlet.component,d))}else d&&Fa(e,m,o),o.canActivateChecks.push(new sg(r)),ui(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Fn(u,(d,m)=>Fa(d,t.getContext(m),o)),o}function Fa(n,e,t){const r=Eo(n),o=n.value;Fn(r,(u,d)=>{Fa(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new ka(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Kh{}function Yh(n){return new Sr.y(e=>e.error(n))}class Qh{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=$l(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new Au([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new wo(r,t),u=new Sh(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Dy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=$h(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=lg(r);return function $y(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Fy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!ky(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const q=r.length>0?Yc(r).parameters:{};u=new Au(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,h(t),g(t)+r.length,T(e))}else{const q=Ru(t,e,r);if(!q.matched)return null;d=q.consumedSegments,m=q.remainingSegments,u=new Au(d,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,h(t),g(t)+d.length,T(e))}const w=function Hy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:x}=$l(t,d,m,w.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===x.length&&D.hasChildren()){const q=this.processChildren(w,D);return null===q?null:[new wo(u,q)]}if(0===w.length&&0===x.length)return[new wo(u,[])];const R=Qt(e)===o,V=this.processSegment(w,D,x,R?Rt:o);return null===V?null:[new wo(u,V)]}}function Gy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lg(n){const e=[],t=new Set;for(const r of n){if(!Gy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=lg(r.children);e.push(new wo(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function T(n){return n.resolve||{}}function Je(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nt(n){return mn(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,Ft.U)(()=>e)):ct(e)})}class zl extends class Bi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Nu=new f.OlP("ROUTES");class Ou{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ft.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new sd(Vi(d.injector.get(Nu,void 0,f.XFs.Self|f.XFs.Optional)).map(jh),d)}),ki(u=>{throw t._loader$=void 0,u}));return t._loader$=new Wc(o,()=>new lr.x).pipe(Ei()),t._loader$}loadModuleFactory(e){return oi(e()).pipe((0,En.z)(t=>t instanceof f.YKP?ct(t):(0,pn.D)(this.compiler.compileModuleAsync(t))))}}class qy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function na(n){throw n}function ld(n,e,t){return e.parse("/")}function cd(n,e){return ct(null)}const Xh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lr.x,this.errorHandler=na,this.malformedUriErrorHandler=ld,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cd,afterPreactivation:cd},this.urlHandlingStrategy=new qy,this.routeReuseStrategy=new zl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const R=d.get(f.R0b);this.isNgZoneEnabled=R instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Nl(){return new Ae(new Se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ou(d,m,V=>this.triggerEvent(new Al(V)),V=>this.triggerEvent(new hs(V))),this.routerState=Ra(this.currentUrlTree,this.rootComponentType),this.transitions=new Gr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(cs(o=>0!==o.id),(0,Ft.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mn(o=>{let u=!1,d=!1;return ct(o).pipe((0,qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mn(m=>{const w=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return cg(m.source)&&(this.browserUrlTree=m.extractedUrl),ct(m).pipe(mn(R=>{const V=this.transitions.getValue();return r.next(new ds(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),V!==this.transitions.getValue()?zo.E:Promise.resolve(R)}),function qh(n,e,t,r){return mn(o=>function Oa(n,e,t,r,o){return new Gh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ft.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function N(n,e,t,r,o){return(0,En.z)(u=>function jy(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Qh(n,e,t,r,o,u).recognize();return null===d?Yh(new Kh):ct(d)}catch(d){return Yh(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ft.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(q,R)}this.browserUrlTree=R.urlAfterRedirects}const V=new Ko(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(V)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:q,source:ee,restoredState:Me,extras:Ue}=m,Ct=new ds(V,this.serializeUrl(q),ee,Me);r.next(Ct);const Tt=Ra(q,this.rootComponentType).snapshot;return ct(Object.assign(Object.assign({},m),{targetSnapshot:Tt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),zo.E}),nt(m=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:q}}=m;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!q})}),(0,qr.b)(m=>{const w=new Yp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ft.U)(m=>Object.assign(Object.assign({},m),{guards:zh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Uy(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ct(Object.assign(Object.assign({},t),{guardsResult:!0})):function ug(n,e,t,r){return(0,pn.D)(n).pipe((0,En.z)(o=>function ql(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(m=>{const w=Gl(m,e,o);let D;if(function G0(n){return n&&Na(n.canDeactivate)}(w))D=oi(w.canDeactivate(n,e,t,r));else{if(!Na(w))throw new Error("Invalid CanDeactivate guard");D=oi(w(n,e,t,r))}return D.pipe(Hs())})).pipe(ea()):ct(!0)}(o.component,o.route,t,e,r)),Hs(o=>!0!==o,!0))}(d,r,o,n).pipe((0,En.z)(m=>m&&function ng(n){return"boolean"==typeof n}(m)?function Ir(n,e,t,r){return(0,pn.D)(e).pipe($s(o=>zc(function Zh(n,e){return null!==n&&e&&e(new Ii(n)),ct(!0)}(o.route.parent,r),function Wh(n,e){return null!==n&&e&&e(new xa(n)),ct(!0)}(o.route,r),function Io(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function og(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>wi(()=>ct(d.guards.map(w=>{const D=Gl(w,d.node,t);let x;if(function Lh(n){return n&&Na(n.canActivateChild)}(D))x=oi(D.canActivateChild(r,n));else{if(!Na(D))throw new Error("Invalid CanActivateChild guard");x=oi(D(r,n))}return x.pipe(Hs())})).pipe(ea())));return ct(u).pipe(ea())}(n,o.path,t),function By(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const o=r.map(u=>wi(()=>{const d=Gl(u,e,t);let m;if(function Fh(n){return n&&Na(n.canActivate)}(d))m=oi(d.canActivate(e,n));else{if(!Na(d))throw new Error("Invalid CanActivate guard");m=oi(d(e,n))}return m.pipe(Hs())}));return ct(o).pipe(ea())}(n,o.route,t))),Hs(o=>!0!==o,!0))}(r,u,n,e):ct(m)),(0,Ft.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,qr.b)(m=>{if(Mu(m.guardsResult)){const D=qs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const w=new Tl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),cs(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),nt(m=>{if(m.guards.canActivateChecks.length)return ct(m).pipe((0,qr.b)(w=>{const D=new cr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),mn(w=>{let D=!1;return ct(w).pipe(function G(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ct(t);let u=0;return(0,pn.D)(o).pipe($s(d=>function se(n,e,t,r){return function Ve(n,e,t,r){const o=Je(n);if(0===o.length)return ct({});const u={};return(0,pn.D)(o).pipe((0,En.z)(d=>function pt(n,e,t,r){const o=Gl(n,e,r);return oi(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,qr.b)(m=>{u[d]=m}))),Zc(1),(0,En.z)(()=>Je(u).length===o.length?ct(u):zo.E))}(n._resolve,n,e,r).pipe((0,Ft.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Dy(n,t).resolve),null)))}(d.route,r,n,e)),(0,qr.b)(()=>u++),Zc(1),(0,En.z)(d=>u===o.length?ct(t):zo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(w=>{const D=new si(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),nt(m=>{const{targetSnapshot:w,id:D,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:V,replaceUrl:q}}=m;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!V,replaceUrl:!!q})}),(0,Ft.U)(m=>{const w=function Cy(n,e,t){const r=Fl(n,e._root,t?t._root:void 0);return new Xc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ft.U)(r=>(new tg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,qr.b)({next(){u=!0},complete(){u=!0}}),function Kp(n){return(0,wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ki(m=>{if(d=!0,function Kc(n){return n&&n[Rl]}(m)){const w=Mu(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const D=new yn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(D),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cg(o.source)};this.scheduleNavigation(x,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Cl(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return zo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){jl(t),this.config=t.map(jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,D=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function zs(n,e,t,r,o){if(0===t.length)return Xp(e.root,e.root,e.root,r,o);const u=function Sy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ay(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Fn(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Ay(t,e,r)}(t);if(u.toRoot())return Xp(e.root,e.root,new Se([],{}),r,o);const d=function eg(n,e,t){if(n.isAbsolute)return new Nh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Nh(u,u===e.root,0)}const r=Xo(n.commands[0])?0:1;return function xy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Nh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Ws(d.segmentGroup,d.index,u.commands):Ry(d.segmentGroup,d.index,u.commands);return Xp(e.root,d.segmentGroup,m,r,o)}(D,this.currentUrlTree,t,R,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Mu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ef(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Xh):!1===r?Object.assign({},dd):r,Mu(t))return Tu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Tu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Iu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let D,x,R;d?(D=d.resolve,x=d.reject,R=d.promise):R=new Promise((ee,Me)=>{D=ee,x=Me});const V=++this.navigationId;let q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),q=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):q=0,this.setTransition({id:V,targetPageId:q,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:x,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(ee=>Promise.reject(ee))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new yn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function cg(n){return"imperative"!==n}let dg=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new lr.x,this.subscription=t.events.subscribe(u=>{u instanceof Iu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:hd(this.skipLocationChange),replaceUrl:hd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:hd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Rr),f.Y36(Jo),f.Y36(fe))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function hd(n){return""===n||!!n}class Zy{}class z0{preload(e,t){return ct(null)}}let W0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Ou(o,r,w=>t.triggerEvent(new Al(w)),w=>t.triggerEvent(new hs(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(cs(t=>t instanceof Iu),$s(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,pn.D)(o).pipe((0,Pi.J)(),(0,Ft.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ct(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,En.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Rr),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Zy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),hg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Iu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ps=new f.OlP("ROUTER_CONFIGURATION"),Yy=new f.OlP("ROUTER_FORROOT_GUARD"),Z0=[_e,{provide:Ln,useClass:In},{provide:Rr,useFactory:function Jy(n,e,t,r,o,u,d={},m,w){const D=new Rr(null,n,e,t,r,o,Vi(u));return m&&(D.urlHandlingStrategy=m),w&&(D.routeReuseStrategy=w),function Q0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,D),d.enableTracing&&D.events.subscribe(x=>{var R,V;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(V=console.groupEnd)||void 0===V||V.call(console)}),D},deps:[Ln,Ul,_e,f.zs3,f.Sil,Nu,ps,[class Jh{},new f.FiY],[class Dn{},new f.FiY]]},Ul,{provide:Jo,useFactory:function fg(n){return n.routerState.root},deps:[Rr]},W0,z0,class Ky{preload(e,t){return t().pipe(ki(()=>ct(null)))}},{provide:ps,useValue:{enableTracing:!1}}];function TI(){return new f.PXZ("Router",Rr)}let tf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Z0,Qy(t),{provide:Yy,useFactory:Y0,deps:[[Rr,new f.FiY,new f.tp0]]},{provide:ps,useValue:r||{}},{provide:fe,useFactory:K0,deps:[he,[new f.tBr(Xe),new f.FiY],ps]},{provide:hg,useFactory:AI,deps:[Rr,cu,ps]},{provide:Zy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:z0},{provide:f.PXZ,multi:!0,useFactory:TI},[fd,{provide:f.ip1,multi:!0,useFactory:J0,deps:[fd]},{provide:e_,useFactory:Xy,deps:[fd]},{provide:f.tb,multi:!0,useExisting:e_}]]}}static forChild(t){return{ngModule:n,providers:[Qy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yy,8),f.LFG(Rr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function AI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new hg(n,e,t)}function K0(n,e,t={}){return t.useHash?new Ie(n,e):new ze(n,e)}function Y0(n){return"guarded"}function Qy(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Nu,multi:!0,useValue:n}]}let fd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Rr),d=this.injector.get(ps);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ct(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ps),o=this.injector.get(W0),u=this.injector.get(hg),d=this.injector.get(Rr),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function J0(n){return n.appInitializer.bind(n)}function Xy(n){return n.bootstrapListener.bind(n)}const e_=new f.OlP("Router Initializer");let SI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"home works!"),f.qZA())},styles:[".amina[_ngcontent-%COMP%]{background-color:red;border-radius:30%}"]}),n})();var pe=k(5861),xI=k(6451),gg=k(5363),X0=k(6063);class n_ extends lr.x{constructor(e=1/0,t=1/0,r=X0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var ew=k(3099);function MI(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,ew.B)({connector:()=>new n_(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function r_(n,e){return(0,Aa.m)(e)?mn(()=>n,e):mn(()=>n)}var i_=k(9468),Cn=k(5813),Ai=k(2011);k(5867);var Zs=k(9681),pd=k(4859),vt=k(2090),li=k(1877);const mg=new Map,rw={activated:!1,tokenObservers:[]},a_={initialized:!1,enabled:!1};function zr(n){return mg.get(n)||rw}function Ks(n,e){mg.set(n,e)}function u_(){return a_}class VI{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new vt.BH,yield function UI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Si=new vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jI(n){if(!zr(n).activated)throw Si.create("use-before-activation",{appName:n.name})}function vg(n,e){return d_.apply(this,arguments)}function d_(){return(d_=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw Si.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw Si.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw Si.create("fetch-parse-error",{originalErrorMessage:R.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function SA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const wg="firebase-app-check-store";let f_=null;function GI(){return f_||(f_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Si.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wg,{keyPath:"compositeKey"})}}catch(t){e(Si.create("storage-open",{originalErrorMessage:t.message}))}}),f_)}function Eg(){return(Eg=(0,pe.Z)(function*(n,e){const r=(yield GI()).transaction(wg,"readwrite"),u=r.objectStore(wg).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var D;m(Si.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const sf=new li.Yd("@firebase/app-check");function ow(n,e){return(0,vt.hl)()?function NA(n,e){return function sw(n,e){return Eg.apply(this,arguments)}(function Dg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function y_(){return u_().enabled}function aw(){return __.apply(this,arguments)}function __(){return(__=(0,pe.Z)(function*(){const n=u_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const md={error:"UNKNOWN_ERROR"};function v_(n){return vt.US.encodeString(JSON.stringify(n),!1)}function La(n){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,pe.Z)(function*(n,e=!1){const t=n.app;jI(t);const r=zr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&yd(w)&&(o=w)}if(!e&&o&&yd(o))return{token:o.token};let m,d=!1;if(y_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vg(SA(t,yield aw()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const w=yield r.exchangeTokenPromise;return yield ow(t,w),Ks(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?sf.warn(w.message):sf.error(w),u=w}return o?(m={token:o.token},Ks(t,Object.assign(Object.assign({},r),{token:o})),yield ow(t,o)):m=lw(u),d&&Tg(t,m),m})).apply(this,arguments)}function w_(n,e){const t=zr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ks(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function E_(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function uw(n){const{app:e}=n;return new VI((0,pe.Z)(function*(){let r;if(r=zr(e).token?yield La(n,!0):yield La(n),r.error)throw r.error}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ks(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tg(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function yd(n){return n.expireTimeMillis-Date.now()>0}function lw(n){return{token:v_(md),error:n}}class Ag{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)w_(this.app,t.next);return Promise.resolve()}}const D_="app-check-internal";!function _w(){(0,Zs._registerComponent)(new pd.wA("app-check",n=>function qI(n,e){return new Ag(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(D_).initialize()})),(0,Zs._registerComponent)(new pd.wA(D_,n=>function cw(n){return{getToken:e=>La(n,e),addTokenListener:e=>function Fu(n,e,t,r){const{app:o}=n,u=zr(o),d={next:t,error:r,type:e};if(Ks(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&yd(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),E_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>E_(n))}(n,"INTERNAL",e),removeTokenListener:e=>w_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zs.registerVersion)("@firebase/app-check","0.5.6")}();class _d{constructor(){return(0,Cn.vb)("app-check")}}"undefined"!=typeof window&&window;var Rg=k(127);const Cw=new f.OlP("angularfire2.auth.use-emulator"),Ng=new f.OlP("angularfire2.auth.settings"),nD=new f.OlP("angularfire2.auth.tenant-id"),Tw=new f.OlP("angularfire2.auth.langugage-code"),A_=new f.OlP("angularfire2.auth.use-device-language"),S_=new f.OlP("angularfire.auth.persistence"),x_=(n,e,t,r,o,u,d,m)=>(0,Ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[D,x]of Object.entries(d))w.settings[D]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let vd=(()=>{class n{constructor(t,r,o,u,d,m,w,D,x,R,V,q){const ee=new lr.x,Me=ct(void 0).pipe((0,gg.Q)(d.outsideAngular),mn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Ft.U)(()=>(0,Ai.on)(t,u,r)),(0,Ft.U)(Ue=>x_(Ue,u,m,D,x,R,w,V)),MI({bufferSize:1,refCount:!1}));if(ar(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Me.pipe(Hs()).subscribe();const Ct=Me.pipe(mn(st=>st.getRedirectResult().then(Ot=>Ot,()=>null)),Cn.iC,MI({bufferSize:1,refCount:!1})),Tt=Me.pipe(mn(st=>new Sr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(Wt=>Ot.next(Wt),Wt=>Ot.error(Wt),()=>Ot.complete()))})))),mt=Me.pipe(mn(st=>new Sr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(Wt=>Ot.next(Wt),Wt=>Ot.error(Wt),()=>Ot.complete()))}))));this.authState=Ct.pipe(r_(Tt),(0,i_.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular)),this.user=Ct.pipe(r_(mt),(0,i_.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular)),this.idToken=this.user.pipe(mn(st=>st?(0,pn.D)(st.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(mn(st=>st?(0,pn.D)(st.getIdTokenResult()):ct(null))),this.credential=(0,xI.T)(Ct,ee,this.authState.pipe(cs(st=>!st))).pipe((0,Ft.U)(st=>(null==st?void 0:st.user)?st:null),(0,i_.R)(d.outsideAngular),(0,gg.Q)(d.insideAngular))}return(0,Ai.pX)(this,Me,u,{spy:{apply:(Ue,Ct,Tt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Tt.then(mt=>ee.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ai.Dh),f.LFG(Ai.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(Cw,8),f.LFG(Ng,8),f.LFG(nD,8),f.LFG(Tw,8),f.LFG(A_,8),f.LFG(S_,8),f.LFG(_d,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Aw=(()=>{class n{constructor(){Rg.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[vd]}),n})();var ia=k(4986);function wd(){return(0,wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Nn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function iD(n,e){return n===e}k(820);var Ke,Og=k(3942),Sw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Do={},M_=M_||{},Dt=Sw||self;function uf(){}function Pg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ed(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var lf="closure_uid_"+(1e9*Math.random()>>>0),oD=0;function aD(n,e,t){return n.call.apply(n.bind,arguments)}function xw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Hn(n,e,t){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aD:xw).apply(null,arguments)}function cf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Wr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Lu(){this.s=this.s,this.o=this.o}var uD={};Lu.prototype.s=!1,Lu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function sD(n){return Object.prototype.hasOwnProperty.call(n,lf)&&n[lf]||(n[lf]=++oD)}(this);delete uD[n]}},Lu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Rw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Co(n){return Array.prototype.concat.apply([],arguments)}function df(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hf(n){return/^[\s\xa0]*$/.test(n)}var xi,R_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ci(n,e){return-1!=n.indexOf(e)}function kg(n,e){return n<e?-1:n>e?1:0}e:{var Nw=Dt.navigator;if(Nw){var Ow=Nw.userAgent;if(Ow){xi=Ow;break e}}xi=""}function N_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function O_(n){const e={};for(const t in n)e[t]=n[t];return e}var cD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<cD.length;u++)t=cD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function k_(n){return k_[" "](n),n}k_[" "]=uf;var Hi,n,HA=ci(xi,"Opera"),ff=ci(xi,"Trident")||ci(xi,"MSIE"),Fg=ci(xi,"Edge"),F_=Fg||ff,L_=ci(xi,"Gecko")&&!(ci(xi.toLowerCase(),"webkit")&&!ci(xi,"Edge"))&&!(ci(xi,"Trident")||ci(xi,"MSIE"))&&!ci(xi,"Edge"),Pw=ci(xi.toLowerCase(),"webkit")&&!ci(xi,"Edge");function hD(){var n=Dt.document;return n?n.documentMode:void 0}e:{var kw="",Fw=(n=xi,L_?/rv:([^\);]+)(\)|;)/.exec(n):Fg?/Edge\/([\d\.]+)/.exec(n):ff?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pw?/WebKit\/(\S+)/.exec(n):HA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fw&&(kw=Fw?Fw[1]:""),ff){var Lg=hD();if(null!=Lg&&Lg>parseFloat(kw)){Hi=String(Lg);break e}}Hi=kw}var Lw={};var Uw=Dt.document&&ff&&(hD()||parseInt(Hi,10))||void 0,U_=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",uf,e),Dt.removeEventListener("test",uf,e)}catch(t){}return n}();function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Zl(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(L_){e:{try{k_(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zl.Z.h.call(this)}}di.prototype.h=function(){this.defaultPrevented=!0},Wr(Zl,di);var pD={2:"touch",3:"pen",4:"mouse"};Zl.prototype.h=function(){Zl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pf="closure_listenable_"+(1e6*Math.random()|0),gD=0;function mD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++gD,this.ca=this.fa=!1}function Vg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ug(n){this.src=n,this.g={},this.h=0}function Id(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Mw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Vg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vu(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Ug.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Vu(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new mD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var B_="closure_lm_"+(1e6*Math.random()|0),Kl={};function Bw(n,e,t,r,o){if(r&&r.once)return To(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bw(n,e[u],t,r,o);return null}return t=Bu(t),n&&n[pf]?n.N(e,t,Ed(r)?!!r.capture:!!r,o):jw(n,e,t,!1,r,o)}function jw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Ed(o)?!!o.capture:!!o,m=Gi(n);if(m||(n[B_]=m=new Ug(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function j_(){var e=Bg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)U_||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Uu(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function To(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)To(n,e[u],t,r,o);return null}return t=Bu(t),n&&n[pf]?n.O(e,t,Ed(r)?!!r.capture:!!r,o):jw(n,e,t,!0,r,o)}function Dd(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Dd(n,e[u],t,r,o);else r=Ed(r)?!!r.capture:!!r,t=Bu(t),n&&n[pf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vu(u=n.g[e],t,r,o))&&(Vg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Gi(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vu(e,t,r,o)),(t=-1<n?e[n]:null)&&Nr(t))}function Nr(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[pf])Id(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Uu(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gi(e))?(Id(t,n),0==t.h&&(t.src=null,e[B_]=null)):Vg(n)}}}function Uu(n){return n in Kl?Kl[n]:Kl[n]="on"+n}function Bg(n,e){if(n.ca)n=!0;else{e=new Zl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Nr(n),n=t.call(r,e)}return n}function Gi(n){return(n=n[B_])instanceof Ug?n:null}var gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bu(n){return"function"==typeof n?n:(n[gf]||(n[gf]=function(e){return n.handleEvent(e)}),n[gf])}function Vn(){Lu.call(this),this.i=new Ug(this),this.P=this,this.I=null}function Gn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var o=e;P_(e=new di(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Va(d,r,!0,e)&&o}if(o=Va(d=e.g=n,r,!0,e)&&o,o=Va(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Va(d=e.g=t[u],r,!1,e)&&o}function Va(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Id(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Wr(Vn,Lu),Vn.prototype[pf]=!0,Vn.prototype.removeEventListener=function(n,e,t,r){Dd(this,n,e,t,r)},Vn.prototype.M=function(){if(Vn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vg(t[r]);delete n.g[e],n.h--}}this.I=null},Vn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ju=Dt.JSON.stringify;function Cd(){var n=$_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $g,Yl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ad,n=>n.reset());class Ad{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $w(n){Dt.setTimeout(()=>{throw n},0)}function jg(n,e){$g||function Hw(){var n=Dt.Promise.resolve(void 0);$g=function(){n.then(Gw)}}(),Hg||($g(),Hg=!0),$_.add(n,e)}var Hg=!1,$_=new class Td{constructor(){this.h=this.g=null}add(e,t){const r=Yl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Gw(){for(var n;n=Cd();){try{n.h.call(n.g)}catch(t){$w(t)}var e=Yl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hg=!1}function mf(n,e){Vn.call(this),this.h=n||1,this.g=e||Dt,this.j=Hn(this.kb,this),this.l=Date.now()}function Gg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function H_(n,e,t){if("function"==typeof n)t&&(n=Hn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function G_(n){n.g=H_(()=>{n.g=null,n.i&&(n.i=!1,G_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Wr(mf,Vn),(Ke=mf.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gn(this,"tick"),this.da&&(Gg(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){mf.Z.M.call(this),Gg(this),delete this.g};class yD extends Lu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:G_(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sd(n){Lu.call(this),this.h=n,this.g={}}Wr(Sd,Lu);var q_=[];function qw(n,e,t,r){Array.isArray(t)||(t&&(q_[0]=t.toString()),t=q_);for(var o=0;o<t.length;o++){var u=Bw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zw(n){N_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Nr(e)},n),n.g={}}function yf(){this.g=!0}function xd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function GA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return ju(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Sd.prototype.M=function(){Sd.Z.M.call(this),zw(this)},Sd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yf.prototype.Aa=function(){this.g=!1},yf.prototype.info=function(){};var Ql={},qg=null;function Md(){return qg=qg||new Vn}function Zw(n){di.call(this,Ql.Ma,n)}function zg(n){const e=Md();Gn(e,new Zw(e,n))}function wD(n,e){di.call(this,Ql.STAT_EVENT,n),this.stat=e}function qi(n){const e=Md();Gn(e,new wD(e,n))}function Kw(n,e){di.call(this,Ql.Na,n),this.size=e}function Rd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}Ql.Ma="serverreachability",Wr(Zw,di),Ql.STAT_EVENT="statevent",Wr(wD,di),Ql.Na="timingevent",Wr(Kw,di);var z_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Yw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $u(){}function W_(){}$u.prototype.h=null;var Z_,_f={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wg(){di.call(this,"d")}function Nd(){di.call(this,"c")}function vf(){}function wf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Sd(this),this.P=ED,this.W=new mf(n=F_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jw}function Jw(){this.i=null,this.g="",this.h=!1}Wr(Wg,di),Wr(Nd,di),Wr(vf,$u),vf.prototype.g=function(){return new XMLHttpRequest},vf.prototype.i=function(){return{}},Z_=new vf;var ED=45e3,K_={},Zg={};function Kg(n,e,t){n.K=1,n.v=Df(So(e)),n.s=t,n.U=!0,Xw(n,null)}function Xw(n,e){n.F=Date.now(),Yg(n),n.A=So(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),rv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Jw,n.g=_v(n.l,t?e:null,!n.s),0<n.O&&(n.L=new yD(Hn(n.Ia,n,n.g),n.O)),qw(n.V,n.g,"readystatechange",n.gb),e=n.H?O_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zg(1),function _D(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var x=D[0];D=D[1];var R=x.split("_");d=2<=R.length&&"type"==R[1]?d+(x+"=")+D+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Y_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Q_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=J_(n,t),o==Zg){4==e&&(n.o=4,qi(14),r=!1),xd(n.j,n.m,null,"[Incomplete Response]");break}if(o==K_){n.o=4,qi(15),xd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xd(n.j,n.m,o,null),em(n,o)}Y_(n)&&o!=Zg&&o!=K_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Bd(e),e.L=!0,qi(11))):(xd(n.j,n.m,t,"[Invalid Chunked Response]"),Ao(n),Xg(n))}function J_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zg:(t=Number(e.substring(t,r)),isNaN(t)?K_:(r+=1)+t>e.length?Zg:(e=e.substr(r,t),n.C=r+t,e))}function Yg(n){n.Y=Date.now()+n.P,Qg(n,n.P)}function Qg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Rd(Hn(n.eb,n),e)}function Jg(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Xg(n){0==n.l.G||n.I||pv(n.l,n)}function Ao(n){Jg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Gg(n.W),zw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function em(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sv(t.i,n)))if(t.I=n.N,!n.J&&sv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Rd(Hn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Of(t),um(t)}Nf(t),qi(18)}if(1>=oE(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else Gu(t,11)}else if((n.J||t.g==n)&&Of(t),!hf(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const x=D[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const R=D[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ee=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var u=r.i;!u.g&&(ci(ee,"spdy")||ci(ee,"quic")||ci(ee,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(im(u,u.h),u.h=null))}if(r.D){const Me=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.sa=Me,Tn(r.F,r.D,Me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=yv(r,r.H?r.la:null,r.W),d.J){aE(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Jg(m),Yg(m)),r.g=d}else hv(r);0<t.l.length&&xf(t)}else"stop"!=D[0]&&"close"!=D[0]||Gu(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Gu(t,7):ec(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}zg(4)}catch(D){}}function Ef(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Pg(n)||"string"==typeof n)Rw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Pg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function X_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Pg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Od(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Od)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pd(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];sa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)sa(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function sa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=wf.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==ua(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const x=ua(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>x)&&(3!=x||F_||this.g&&(this.h.h||this.g.ga()||hE(this.g)))){this.I||4!=x||7==e||zg(8==e||0>=R?3:2),Jg(this);var t=this.g.ba();this.N=t;t:if(Y_(this)){var r=hE(this.g);n="";var o=r.length,u=4==ua(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ao(this),Xg(this);var d="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Ww(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hf(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,qi(12),Ao(this),Xg(this);break e}xd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,em(this,t)}this.U?(Q_(this,x,d),F_&&this.i&&3==x&&(qw(this.V,this.W,"tick",this.fb),this.W.start())):(xd(this.j,this.m,d,null),em(this,d)),4==x&&Ao(this),this.i&&!this.I&&(4==x?pv(this.l,this):(this.i=!1,Yg(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,qi(12)):(this.o=0,qi(13)),Ao(this),Xg(this)}}}catch(x){}},Ke.fb=function(){if(this.g){var n=ua(this.g),e=this.g.ga();this.C<e.length&&(Jg(this),Q_(this,n,e),this.i&&4!=n&&Yg(this))}},Ke.cancel=function(){this.I=!0,Ao(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zg(3),qi(17)),Ao(this),this.o=2,Xg(this)):Qg(this,this.Y-n)},(Ke=Od.prototype).R=function(){Pd(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return Pd(this),this.g.concat()},Ke.get=function(n,e){return sa(this.h,n)?this.h[n]:e},Ke.set=function(n,e){sa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var tm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Jl){this.g=void 0!==e?e:n.g,kd(this,n.j),this.s=n.s,bf(this,n.i),If(this,n.m),this.l=n.l,e=n.h;var t=new Ld;t.i=e.i,e.g&&(t.g=new Od(e.g),t.h=e.h),nm(this,t),this.o=n.o}else n&&(t=String(n).match(tm))?(this.g=!!e,kd(this,t[1]||"",!0),this.s=Cf(t[2]||""),bf(this,t[3]||"",!0),If(this,t[4]),this.l=Cf(t[5]||"",!0),nm(this,t[6]||"",!0),this.o=Cf(t[7]||"")):(this.g=!!e,this.h=new Ld(null,this.g))}function So(n){return new Jl(n)}function kd(n,e,t){n.j=t?Cf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bf(n,e,t){n.i=t?Cf(e,!0):e}function If(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nm(n,e,t){e instanceof Ld?(n.h=e,function rE(n,e){e&&!n.j&&(oa(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(tv(this,r),rv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Fd(e,ID)),n.h=new Ld(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function Df(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fd(e,rm,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fd(e,rm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fd(t,"/"==t.charAt(0)?bD:nE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fd(t,DD)),n.join("")};var rm=/[#\/\?@]/g,nE=/[#\?:]/g,bD=/[#\?]/g,ID=/[#\?@]/g,DD=/#/g;function Ld(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function oa(n){n.g||(n.g=new Od,n.h=0,n.i&&function qA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tv(n,e){oa(n),e=Xl(n,e),sa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,sa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pd(n)))}function nv(n,e){return oa(n),e=Xl(n,e),sa(n.g.h,e)}function rv(n,e,t){tv(n,e),0<t.length&&(n.i=null,n.g.set(Xl(n,e),df(t)),n.h+=t.length)}function Xl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iv(n){this.l=n||sE,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=Ld.prototype).add=function(n,e){oa(this),this.i=null,n=Xl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){oa(this),this.g.forEach(function(t,r){Rw(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){oa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ke.R=function(n){oa(this);var e=[];if("string"==typeof n)nv(this,n)&&(e=Co(e,this.g.get(Xl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Co(e,n[t])}return e},Ke.set=function(n,e){return oa(this),this.i=null,nv(this,n=Xl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var sE=10;function CD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function oE(n){return n.h?1:n.g?n.g.size:0}function sv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function im(n,e){n.g?n.g.add(e):n.h=e}function aE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dr(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return df(n.i)}function sm(){}function TD(){this.g=new sm}function AD(n,e,t){const r=t||"";try{Ef(n,function(o,u){let d=o;Ed(o)&&(d=ju(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function om(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Vd(n){this.l=n.$b||null,this.j=n.ib||!1}function Tf(n,e){Vn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iv.prototype.cancel=function(){if(this.i=dr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sm.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},sm.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},Wr(Vd,$u),Vd.prototype.g=function(){return new Tf(this.l,this.j)},Vd.prototype.i=function(n){return function(){return n}}({}),Wr(Tf,Vn);var Hu=0;function lE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Af(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ud(n)}function Ud(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=Tf.prototype).open=function(n,e){if(this.readyState!=Hu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ud(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Af(this)),this.readyState=Hu},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ud(this)),this.g&&(this.readyState=3,Ud(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Af(this):Ud(this),3==this.readyState&&lE(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,Af(this))},Ke.Ta=function(n){this.g&&(this.response=n,Af(this))},Ke.ha=function(){this.g&&Af(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SD=Dt.JSON.parse;function Qn(n){Vn.call(this),this.headers=new Od,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xD,this.K=this.L=!1}Wr(Qn,Vn);var xD="",cE=/^https?$/i,ov=["POST","PUT"];function MD(n){return"content-type"==n.toLowerCase()}function dE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,xo(n),zi(n)}function xo(n){n.D||(n.D=!0,Gn(n,"complete"),Gn(n,"error"))}function Qs(n){if(n.h&&void 0!==M_&&(!n.C[1]||4!=ua(n)||2!=n.ba()))if(n.v&&4==ua(n))H_(n.Fa,0,n);else if(Gn(n,"readystatechange"),4==ua(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(tm)[1]||null;if(!o&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!cE.test(o?o.toLowerCase():"")}t=r}if(t)Gn(n,"complete"),Gn(n,"success");else{n.m=6;try{var d=2<ua(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",xo(n)}}finally{zi(n)}}}function zi(n,e){if(n.g){av(n);const t=n.g,r=n.C[0]?uf:null;n.g=null,n.C=null,e||Gn(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function av(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function ua(n){return n.g?n.g.readyState:0}function hE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function uv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function RD(n){let e="";return N_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function Sf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function am(n){this.za=0,this.l=[],this.h=new yf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sf("baseRetryDelayMs",5e3,n),this.$a=Sf("retryDelaySeedMs",1e4,n),this.Ya=Sf("forwardChannelMaxRetries",2,n),this.ra=Sf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new iv(n&&n.concurrentRequestLimit),this.Ca=new TD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ec(n){if(lv(n),3==n.G){var e=n.V++,t=So(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Rf(n,t),(e=new wf(n,n.h,e,void 0)).K=2,e.v=Df(So(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_v(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Yg(e)}mv(n)}function um(n){n.g&&(Bd(n),n.g.cancel(),n.g=null)}function lv(n){um(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),Of(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function cv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xf(n)}function xf(n){CD(n.i)||n.m||(n.m=!0,jg(n.Ha,n),n.C=0)}function Mf(n,e){var t;t=e?e.m:n.V++;const r=So(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),Rf(n,r),n.o&&n.s&&uv(r,n.o,n.s),t=new wf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=dv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),im(n.i,t),Kg(t,r,e)}function Rf(n,e){n.j&&Ef({},function(t,r){Tn(e,r,t)})}function dv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=o[w].h;const x=o[w].g;if(D-=u,0>D)u=Math.max(0,o[w].h-100),m=!1;else try{AD(x,d,"req"+D+"_")}catch(R){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function hv(n){n.g||n.u||(n.Y=1,jg(n.Ga,n),n.A=0)}function Nf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Rd(Hn(n.Ga,n),gv(n,n.A)),n.A++,0))}function Bd(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function fv(n){n.g=new wf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=So(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),Rf(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&uv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Df(So(e)),t.s=null,t.U=!0,Xw(t,n)}function Of(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function pv(n,e){var t=null;if(n.g==e){Of(n),Bd(n),n.g=null;var r=2}else{if(!sv(n.i,e))return;t=e.D,aE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gn(r=Md(),new Kw(r,t,e,o)),xf(n)}else hv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function fE(n,e){return!(oE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Rd(Hn(n.Ha,n,e),gv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Nf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Gu(n,5);break;case 4:Gu(n,10);break;case 3:Gu(n,6);break;default:Gu(n,2)}}function gv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hn(n.jb,n);t||(t=new Jl("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||kd(t,"https"),Df(t)),function uE(n,e){const t=new yf;if(Dt.Image){const r=new Image;r.onload=cf(om,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cf(om,t,r,"TestLoadImage: error",!1,e),r.onabort=cf(om,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cf(om,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qi(2);n.G=0,n.j&&n.j.va(e),mv(n),lv(n)}function mv(n){n.G=0,n.I=-1,n.j&&((0!=dr(n.i).length||0!=n.l.length)&&(n.i.i.length=0,df(n.l),n.l.length=0),n.j.ua())}function yv(n,e,t){let r=function ev(n){return n instanceof Jl?So(n):new Jl(n,void 0)}(t);if(""!=r.i)e&&bf(r,e+"."+r.i),If(r,r.m);else{const o=Dt.location;r=function eE(n,e,t,r){var o=new Jl(null,void 0);return n&&kd(o,n),e&&bf(o,e),t&&If(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&N_(n.aa,function(o,u){Tn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),Rf(n,r),r}function _v(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ba&&!n.qa?new Vd({ib:!0}):n.qa)).L=n.H,e}function pE(){}function lm(){if(ff&&!(10<=Number(Uw)))throw Error("Environmental error: no available transport.")}function gs(n,e){Vn.call(this),this.g=new am(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!hf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jd(this)}function gE(n){Wg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mE(){Nd.call(this),this.status=1}function jd(n){this.g=n}(Ke=Qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z_.g(),this.C=function Qw(n){return n.h||(n.h=n.i())}(this.u?this.u:Z_),this.g.onreadystatechange=Hn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void dE(this,u)}n=t||"";const o=new Od(this.headers);r&&Ef(r,function(u,d){o.set(d,u)}),r=function lD(n){e:{var e=MD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=Mw(ov,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{av(this),0<this.B&&((this.K=function aa(n){return ff&&function Vw(){return function dD(n){var e=Lw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=R_(String(Hi)).split("."),t=R_("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=kg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||kg(0==o[2].length,0==u[2].length)||kg(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.pa,this)):this.A=H_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){dE(this,u)}},Ke.pa=function(){void 0!==M_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gn(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gn(this,"complete"),Gn(this,"abort"),zi(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zi(this,!0)),Qn.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?Qs(this):this.cb())},Ke.cb=function(){Qs(this)},Ke.ba=function(){try{return 2<ua(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SD(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=am.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new wf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=O_(u),P_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dv(this,o,e),Tn(t=So(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),Rf(this,t),this.o&&u&&uv(t,this.o,u),im(this.i,o),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),o.$=!0,Kg(o,t,null)):Kg(o,t,e),this.G=2}}else 3==this.G&&(n?Mf(this,n):0==this.l.length||CD(this.i)||Mf(this))},Ke.Ga=function(){if(this.u=null,fv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Rd(Hn(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qi(10),um(this),fv(this))},Ke.ab=function(){null!=this.v&&(this.v=null,um(this),Nf(this),qi(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),qi(2)):(this.h.info("Failed to ping google.com"),qi(1))},(Ke=pE.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},lm.prototype.g=function(n,e){return new gs(n,e)},Wr(gs,Vn),gs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),jg(Hn(n.hb,n,e))),qi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=yv(n,null,n.W),xf(n)},gs.prototype.close=function(){ec(this.g)},gs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,cv(this.g,e)}else this.v?((e={}).__data__=ju(n),cv(this.g,e)):cv(this.g,n)},gs.prototype.M=function(){this.g.j=null,delete this.j,ec(this.g),delete this.g,gs.Z.M.call(this)},Wr(gE,Wg),Wr(mE,Nd),Wr(jd,pE),jd.prototype.xa=function(){Gn(this.g,"a")},jd.prototype.wa=function(n){Gn(this.g,new gE(n))},jd.prototype.va=function(n){Gn(this.g,new mE(n))},jd.prototype.ua=function(){Gn(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,gs.prototype.send=gs.prototype.u,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,z_.NO_ERROR=0,z_.TIMEOUT=8,z_.HTTP_ERROR=6,Yw.COMPLETE="complete",W_.EventType=_f,_f.OPEN="a",_f.CLOSE="b",_f.ERROR="c",_f.MESSAGE="d",Vn.prototype.listen=Vn.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.La,Qn.prototype.getLastErrorCode=Qn.prototype.Da,Qn.prototype.getStatus=Qn.prototype.ba,Qn.prototype.getResponseJson=Qn.prototype.Qa,Qn.prototype.getResponseText=Qn.prototype.ga,Qn.prototype.send=Qn.prototype.ea;var ND=Do.createWebChannelTransport=function(){return new lm},OD=Do.getStatEventTarget=function(){return Md()},vv=Do.ErrorCode=z_,PD=Do.EventType=Yw,kD=Do.Event=Ql,yE=Do.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},FD=Do.FetchXmlHttpFactory=Vd,cm=Do.WebChannel=W_,LD=Do.XhrIo=Qn;const _E="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let $d="9.6.11";const Ua=new li.Yd("@firebase/firestore");function dm(){return Ua.logLevel}function Pe(n,...e){if(Ua.logLevel<=li.in.DEBUG){const t=e.map(hm);Ua.debug(`Firestore (${$d}): ${n}`,...t)}}function Jn(n,...e){if(Ua.logLevel<=li.in.ERROR){const t=e.map(hm);Ua.error(`Firestore (${$d}): ${n}`,...t)}}function Hd(n,...e){if(Ua.logLevel<=li.in.WARN){const t=e.map(hm);Ua.warn(`Firestore (${$d}): ${n}`,...t)}}function hm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${$d}) INTERNAL ASSERTION FAILED: `+n;throw Jn(e),new Error(e)}function It(n,e){n||et()}function Ge(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class wv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WA{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=d;e.enqueueRetryable((0,pe.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new tc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Zr(e)}}class EE{constructor(e,t,r){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class bE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new EE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gt{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new VD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ms{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function UD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ms.A=-1;class Pf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=UD(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function Ba(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function kf(n){return n+"\0"}class Vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Vt(0,0))}static max(){return new Et(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ev(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gd{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Gd{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const DE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends Gd{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return DE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class qd{constructor(e){this.fields=e,e.sort(Dr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const Ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qu(n){if(It(!!n),"string"==typeof n){let e=0;const t=Ff.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rc(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function zd(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bv(n){const e=n.mapValue.fields.__previous_value__;return zd(e)?bv(e):e}function Wd(n){const e=qu(n.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}class CE{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class ja{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ja("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}function Mo(n){return null==n}function $a(n){return 0===n&&1/n==-1/0}function TE(n){return"number"==typeof n&&Number.isInteger(n)&&!$a(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Zt.fromString(e))}static fromName(e){return new $e(Zt.fromString(e).popFirst(5))}static empty(){return new $e(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Zt(e.slice()))}}const AE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iv={nullValue:"NULL_VALUE"};function zu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zd(n)?4:Cv(n)?9:10:et()}function Ro(n,e){if(n===e)return!0;const t=zu(n);if(t!==zu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wd(n).isEqual(Wd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=qu(r.timestampValue),d=qu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,rc(n.bytesValue).isEqual(rc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return qn(r.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return qn(r.integerValue)===qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=qn(r.doubleValue),d=qn(o.doubleValue);return u===d?$a(u)===$a(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ba(n.arrayValue.values||[],e.arrayValue.values||[],Ro);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Ev(u)!==Ev(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ro(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function Lf(n,e){return void 0!==(n.values||[]).find(t=>Ro(t,e))}function Ha(n,e){if(n===e)return 0;const t=zu(n),r=zu(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=qn(o.integerValue||o.doubleValue),m=qn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return SE(n.timestampValue,e.timestampValue);case 4:return SE(Wd(n),Wd(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=rc(o),m=rc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const D=Lt(d[w],m[w]);if(0!==D)return D}return Lt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Lt(qn(o.latitude),qn(u.latitude));return 0!==d?d:Lt(qn(o.longitude),qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const D=Ha(d[w],m[w]);if(D)return D}return Lt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let x=0;x<m.length&&x<D.length;++x){const R=Lt(m[x],D[x]);if(0!==R)return R;const V=Ha(d[m[x]],w[D[x]]);if(0!==V)return V}return Lt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw et()}}function SE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=qu(n),r=qu(e),o=Lt(t.seconds,r.seconds);return 0!==o?o:Lt(t.nanos,r.nanos)}function Zd(n){return xE(n)}function xE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=qu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=xE(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${xE(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function Kd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ME(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function Dv(n){return!!n&&"nullValue"in n}function Vf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function Uf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Cv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bf(n){return"nullValue"in n?Iv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Kd(ja.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function jD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Kd(ja.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?AE:et()}function RE(n,e){return void 0===n?e:void 0===e||Ha(n,e)>0?n:e}function NE(n,e){return void 0===n?e:void 0===e||Ha(n,e)<0?n:e}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uf(t)}setAll(e){let t=Dr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Uf(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ro(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];pm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){nc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new hi(Uf(this.value))}}function OE(n){const e=[];return nc(n.fields,(t,r)=>{const o=new Dr([t]);if(pm(r)){const u=OE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new qd(e)}class _n{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new _n(e,0,Et.min(),Et.min(),hi.empty(),0)}static newFoundDocument(e,t,r){return new _n(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new _n(e,2,t,Et.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Et.min(),hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Tv(n){return n.fields.find(e=>2===e.kind)}function Js(n){return n.fields.filter(e=>2!==e.kind)}gm.UNKNOWN_ID=-1;class mm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yd(0,Ga.min())}}function PE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new Vt(t+1,0):new Vt(t,r));return new Ga(o,$e.empty(),e)}function kE(n){return new Ga(n.readTime,n.key,-1)}class Ga{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ga(Et.min(),$e.empty(),-1)}static max(){return new Ga(Et.max(),$e.empty(),-1)}}function FE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}class $D{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function ym(n,e=null,t=[],r=[],o=null,u=null,d=null){return new $D(n,e,t,r,o,u,d)}function ic(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Zd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Mo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zd(r)).join(",")),e.P=t}return e.P}function Qd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!jE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ro(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function _m(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vm(n,e){return n.filters.filter(t=>t instanceof Kr&&t.field.isEqual(e))}function VE(n,e,t){let r,o=!0;for(const u of vm(n,e)){let d,m=!0;switch(u.op){case"<":case"<=":d=Bf(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Iv}RE(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];RE(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function wm(n,e,t){let r,o=!0;for(const u of vm(n,e)){let d,m=!0;switch(u.op){case">=":case">":d=jD(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=AE}NE(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];NE(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Kr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new UE(e,t,r):"array-contains"===t?new qD(e,r):"in"===t?new zD(e,r):"not-in"===t?new WD(e,r):"array-contains-any"===t?new ZD(e,r):new Kr(e,t,r)}static V(e,t,r){return"in"===t?new HD(e,r):new GD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ha(t,this.value)):null!==t&&zu(this.value)===zu(t)&&this.v(Ha(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class UE extends Kr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class HD extends Kr{constructor(e,t){super(e,"in",t),this.keys=BE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GD extends Kr{constructor(e,t){super(e,"not-in",t),this.keys=BE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class qD extends Kr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fm(t)&&Lf(t.arrayValue,this.value)}}class zD extends Kr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lf(this.value.arrayValue,t)}}class WD extends Kr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lf(this.value.arrayValue,t)}}class ZD extends Kr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lf(this.value.arrayValue,r))}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}class sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function jE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $E(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Ha(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function HE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ro(n.position[t],e.position[t]))return!1;return!0}class la{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function GE(n,e,t,r,o,u,d,m){return new la(n,e,t,r,o,u,d,m)}function Jd(n){return new la(n)}function Em(n){return!Mo(n.limit)&&"F"===n.limitType}function Xd(n){return!Mo(n.limit)&&"L"===n.limitType}function jf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bm(n){for(const e of n.filters)if(e.S())return e.field;return null}function $f(n){return null!==n.collectionGroup}function eh(n){const e=Ge(n);if(null===e.D){e.D=[];const t=bm(e),r=jf(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new sc(t)),e.D.push(new sc(Dr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new sc(Dr.keyField(),u))}}}return e.D}function Xs(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=ym(e.path,e.collectionGroup,eh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of eh(e))t.push(new sc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Wu(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Wu(e.startAt.position,!e.startAt.inclusive):null;e.C=ym(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Im(n,e,t){return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hf(n,e){return Qd(Xs(n),Xs(e))&&n.limitType===e.limitType}function Av(n){return`${ic(Xs(n))}|lt:${n.limitType}`}function Sv(n){return`Query(target=${function LE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Zd(r.value)}`;var r}).join(", ")}]`),Mo(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zd(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function Dm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=$E(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,eh(t),r)||t.endAt&&!function(o,u,d){const m=$E(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,eh(t),r)));var t,r}function qE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xv(n){return(e,t)=>{let r=!1;for(const o of eh(n)){const u=KA(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function KA(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Ha(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function zE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function Gf(n){return{integerValue:""+n}}function WE(n,e){return TE(e)?Gf(e):zE(n,e)}class qa{constructor(){this._=void 0}}function qf(n,e,t){return n instanceof oc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ac?ZE(n,e):n instanceof uc?KE(n,e):function(r,o){const u=YD(r,o),d=Mv(u)+Mv(r.k);return ME(u)&&ME(r.k)?Gf(d):zE(r.M,d)}(n,e)}function KD(n,e,t){return n instanceof ac?ZE(n,e):n instanceof uc?KE(n,e):t}function YD(n,e){return n instanceof lc?ME(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class oc extends qa{}class ac extends qa{constructor(e){super(),this.elements=e}}function ZE(n,e){const t=Cm(e);for(const r of n.elements)t.some(o=>Ro(o,r))||t.push(r);return{arrayValue:{values:t}}}class uc extends qa{constructor(e){super(),this.elements=e}}function KE(n,e){let t=Cm(e);for(const r of n.elements)t=t.filter(o=>!Ro(o,r));return{arrayValue:{values:t}}}class lc extends qa{constructor(e,t){super(),this.M=e,this.k=t}}function Mv(n){return qn(n.integerValue||n.doubleValue)}function Cm(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zu{constructor(e,t){this.field=e,this.transform=t}}class QD{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tm{}function JD(n,e,t){n instanceof Kf?function(r,o,u){const d=r.value.clone(),m=cc(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof eo?function(r,o,u){if(!Wf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=cc(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Rv(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zf(n,e,t){var o;n instanceof Kf?function(r,o,u){if(!Wf(r.precondition,o))return;const d=r.value.clone(),m=tC(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(YE(o),d).setHasLocalMutations()}(n,e,t):n instanceof eo?function(r,o,u){if(!Wf(r.precondition,o))return;const d=tC(r.fieldTransforms,u,o),m=o.data;m.setAll(Rv(r)),m.setAll(d),o.convertToFoundDocument(YE(o),m).setHasLocalMutations()}(n,e,t):Wf(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function XD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=YD(r.transform,o||null);null!=u&&(null==t&&(t=hi.empty()),t.set(r.field,u))}return t||null}function eC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ba(t,r,(o,u)=>function zf(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ac&&r instanceof ac||t instanceof uc&&r instanceof uc?Ba(t.elements,r.elements,Ro):t instanceof lc&&r instanceof lc?Ro(t.k,r.k):t instanceof oc&&r instanceof oc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function YE(n){return n.isFoundDocument()?n.version:Et.min()}class Kf extends Tm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class eo extends Tm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Rv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cc(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,KD(d,m,t[o]))}return r}function tC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,qf(u,d,e))}return r}class th extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Nv extends Tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class YA{constructor(e){this.count=e}}var er,Jt;function Ov(n){switch(n){default:return et();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function Am(n){if(void 0===n)return Jn("GRPC error has no .code"),re.UNKNOWN;switch(n){case er.OK:return re.OK;case er.CANCELLED:return re.CANCELLED;case er.UNKNOWN:return re.UNKNOWN;case er.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case er.INTERNAL:return re.INTERNAL;case er.UNAVAILABLE:return re.UNAVAILABLE;case er.UNAUTHENTICATED:return re.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case er.NOT_FOUND:return re.NOT_FOUND;case er.ALREADY_EXISTS:return re.ALREADY_EXISTS;case er.PERMISSION_DENIED:return re.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case er.ABORTED:return re.ABORTED;case er.OUT_OF_RANGE:return re.OUT_OF_RANGE;case er.UNIMPLEMENTED:return re.UNIMPLEMENTED;case er.DATA_LOSS:return re.DATA_LOSS;default:return et()}}(Jt=er||(er={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}class tr{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sm(this.root,e,this.comparator,!0)}}class Sm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Yr.RED,this.left=null!=o?o:Yr.EMPTY,this.right=null!=u?u:Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Yr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Yr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QE(this.data.getIterator())}getIteratorFrom(e){return new QE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class QE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nh(n){return n.hasNext()?n.getNext():void 0}const nC=new tr($e.comparator);function to(){return nC}const rC=new tr($e.comparator);function dc(){return rC}function rh(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const JE=new tr($e.comparator),XE=new An($e.comparator);function an(...n){let e=XE;for(const t of n)e=e.add(t);return e}const eb=new An(Lt);function xm(){return eb}class Yf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Yf(Et.min(),r,xm(),to(),an())}}class Qf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qf(Cr.EMPTY_BYTE_STRING,t,an(),an(),an())}}class Mm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class tb{constructor(e,t){this.targetId=e,this.$=t}}class nb{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class rb{constructor(){this.B=0,this.L=Rm(),this.U=Cr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=an(),t=an(),r=an();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new Qf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Rm()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Jf{constructor(e){this.nt=e,this.st=new Map,this.it=to(),this.rt=ib(),this.ot=new An(Lt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(_m(u))if(0===r){const d=new $e(u.path);this.ct(t,d,_n.newNoDocument(d,Et.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&_m(m.target)){const w=new $e(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,_n.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=an();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const D=this.wt(w);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Yf(e,t,this.ot,this.it,r);return this.it=to(),this.rt=ib(),this.ot=new An(Lt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new rb,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new An(Lt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new rb),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ib(){return new tr($e.comparator)}function Rm(){return new tr($e.comparator)}const ca={asc:"ASCENDING",desc:"DESCENDING"},iC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pv{constructor(e,t){this.databaseId=e,this.N=t}}function za(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sb(n,e){return n.N?e.toBase64():e.toUint8Array()}function sC(n,e){return za(n,e.toTimestamp())}function Pr(n){return It(!!n),Et.fromTimestamp(function(e){const t=qu(e);return new Vt(t.seconds,t.nanos)}(n))}function ih(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Xf(n){const e=Zt.fromString(n);return It(Bv(e)),e}function ep(n,e){return ih(n.databaseId,e.path)}function da(n,e){const t=Xf(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(Fv(t))}function Nm(n,e){return ih(n.databaseId,e)}function kv(n){const e=Xf(n);return 4===e.length?Zt.emptyPath():Fv(e)}function hc(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Fv(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ob(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function ab(n,e,t){const r=da(n,e.name),o=Pr(e.updateTime),u=new hi({mapValue:{fields:e.fields}}),d=_n.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function fc(n,e){let t;if(e instanceof Kf)t={update:ob(n,e.key,e.value)};else if(e instanceof th)t={delete:ep(n,e.key)};else if(e instanceof eo)t={update:ob(n,e.key,e.data),updateMask:aC(e.fieldMask)};else{if(!(e instanceof Nv))return et();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof oc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ac)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lc)return{fieldPath:u.field.canonicalString(),increment:d.k};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:sC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function Om(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Xn.updateTime(Pr(o.updateTime)):void 0!==o.exists?Xn.exists(o.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),m=new oc):"appendMissingElements"in d?m=new ac(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new uc(d.removeAllFromArray.values||[]):"increment"in d?m=new lc(u,d.increment):et();const w=Dr.fromServerFormat(d.fieldPath);return new Zu(w,m)}(n,o)):[];var o;if(e.update){const o=da(n,e.update.name),u=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qd((e.updateMask.fieldPaths||[]).map(D=>Dr.fromServerFormat(D)));return new eo(o,u,d,t,r)}return new Kf(o,u,t,r)}if(e.delete){const o=da(n,e.delete);return new th(o,t)}if(e.verify){const o=da(n,e.verify);return new Nv(o,t)}return et()}function Pm(n,e){return{documents:[Nm(n,e.path)]}}function ub(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Nm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Nm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const D=w.map(x=>function(R){if("=="===R.op){if(Vf(R.value))return{unaryFilter:{field:pc(R.field),op:"IS_NAN"}};if(Dv(R.value))return{unaryFilter:{field:pc(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Vf(R.value))return{unaryFilter:{field:pc(R.field),op:"IS_NOT_NAN"}};if(Dv(R.value))return{unaryFilter:{field:pc(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(R.field),op:Uv(R.op),value:R.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:pc((x=D).field),direction:db(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(D=e.limit,n.N||Mo(D)?D:{value:D});var D,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function lb(n){let e=kv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=cb(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new sc(sh((R=x).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(x){let R;return R="object"==typeof x?x.value:x,Mo(R)?null:R}(t.limit));let w=null;var x;t.startAt&&(w=new Wu((x=t.startAt).values||[],!!x.before));let D=null;return t.endAt&&(D=function(x){return new Wu(x.values||[],!x.before)}(t.endAt)),GE(e,o,d,u,m,"F",w,D)}function cb(n){return n?void 0!==n.unaryFilter?[fb(n)]:void 0!==n.fieldFilter?[hb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cb(e)).reduce((e,t)=>e.concat(t)):et():[]}function db(n){return ca[n]}function Uv(n){return iC[n]}function pc(n){return{fieldPath:n.canonicalString()}}function sh(n){return Dr.fromServerFormat(n.fieldPath)}function hb(n){return Kr.create(sh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function fb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=sh(n.unaryFilter.field);return Kr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=sh(n.unaryFilter.field);return Kr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sh(n.unaryFilter.field);return Kr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sh(n.unaryFilter.field);return Kr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function aC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jv(e)),e=uC(n.get(t),e);return jv(e)}function uC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function jv(n){return n+"\x01\x01"}function ha(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new Zt(r)}const pi=["userId","batchId"];function Wa(n,e){return[n,fi(e)]}function pb(n,e,t){return[n,fi(e),t]}const lC={},JA=["prefixPath","collectionGroup","readTime","documentId"],tp=["prefixPath","collectionGroup","documentId"],cC=["collectionGroup","readTime","prefixPath","documentId"],$v=["canonicalId","targetId"],dC=["targetId","path"],gb=["path","targetId"],hC=["collectionId","parent"],fC=["indexId","uid"],Hv=["uid","sequenceNumber"],mb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yb=["indexId","uid","orderedDocumentKey"],km=["userId","collectionPath","documentId"],Gv=["userId","collectionPath","largestBatchId"],XA=["userId","collectionGroup","largestBatchId"],qv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pC=[...qv,"documentOverlays"],zv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fm=[...zv,"indexConfiguration","indexState","indexEntries"],Wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class oh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Or,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new np(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Lm(r.target.error);this.At.reject(new np(e,o))}}static open(e,t,r,o){try{return new oh(t,e.transaction(o,r))}catch(u){throw new np(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vb(t)}}class fa{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===fa.Vt((0,vt.z$)())&&Jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),gc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,vt.hl)())return!1;if(fa.St())return!0;const e=(0,vt.z$)(),t=fa.Vt(e),r=0<t&&t<10,o=fa.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new np(e,m))},u.onupgradeneeded=d=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=oh.open(u.db,e,d?"readonly":"readwrite",r),D=o(w).next(x=>(w.Pt(),x)).catch(x=>(w.abort(x),de.reject(x))).toPromise();return D.catch(()=>{}),yield w.Rt,D}catch(w){const D="FirebaseError"!==w.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),u.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return gc(this.Ft.delete())}}class np extends xe{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yu(n){return"IndexedDbTransactionError"===n.name}class vb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gc(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),gc(this.store.add(e))}get(e){return gc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),gc(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),gc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=Lm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new gC(m),D=t(m.primaryKey,m.value,w);if(D instanceof de){const x=D.catch(R=>(w.done(),de.reject(R)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Lm(r.target.error);t(o)}})}let Zv=!1;function Lm(n){const e=fa.Vt((0,vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zv||(Zv=!0,setTimeout(()=>{throw r},0)),r}}return n}class wb extends _b{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function kr(n,e){const t=Ge(n);return fa.xt(t.Ht,e)}class Vm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&JD(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zf(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zf(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(t,r)=>eC(t,r))&&Ba(this.baseMutations,e.baseMutations,(t,r)=>eC(t,r))}}class Kv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=JE;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Kv(e,t,r,o)}}class Um{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Za{constructor(e,t,r,o,u=Et.min(),d=Et.min(),m=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Yv{constructor(e){this.Jt=e}}function bb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ep(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:za(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}var o,u;return r}function Bm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qu(n){const e=new Vt(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function rp(n,e){const t=(e.baseMutations||[]).map(u=>Om(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Om(n.Jt,u)),o=Vt.fromMillis(e.localWriteTimeMs);return new Vm(e.batchId,o,t,r)}function jm(n){const e=Qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qu(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=Xs(Jd(kv(o.documents[0])))):r=Xs(lb(n.query)),new Za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function mC(n,e){const t=ah(e.snapshotVersion),r=ah(e.lastLimboFreeSnapshotVersion);let o;o=_m(e.target)?Pm(n.Jt,e.target):ub(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ic(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Ib(n){const e=lb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Im(e,e.limit,"L"):e}function Db(n,e){return new Um(e.largestBatchId,Om(n.Jt,e.overlayMutation))}function yC(n,e){const t=e.path.lastSegment();return[n,fi(e.path.popLast()),t]}class eS{getBundleMetadata(e,t){return _C(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Qu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return _C(e).put({bundleId:(r=t).id,createTime:ah(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ip(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Ib(o.bundledQuery),readTime:Qu(o.readTime)};var o})}saveNamedQuery(e,t){return ip(e).put({name:(r=t).name,readTime:ah(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function _C(n){return kr(n,"bundles")}function ip(n){return kr(n,"namedQueries")}class Cb{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Cb(e,t.uid||"")}getOverlay(e,t){return uh(e).get(yC(this.userId,t)).next(r=>r?Db(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Um(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(fi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(uh(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=rh(),u=fi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return uh(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const D=Db(this.M,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=rh();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uh(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,D,x)=>{const R=Db(this.M,D);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return uh(e).put(function(r,o,u){const[d,m,w]=yC(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:fc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function uh(n){return kr(n,"documentOverlays")}class Ka{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),$a(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(rc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Cv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Tb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Qv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Tb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ka.fe=new Ka;class tS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Qv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Qv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Jv{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Ab{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class sp{constructor(){this.De=new tS,this.Ce=new Jv(this.De),this.xe=new Ab(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ya{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ya(this.indexId,this.documentKey,this.arrayValue,r)}}function lh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Sb(n.arrayValue,e.arrayValue),0!==t?t:(t=Sb(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Sb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class vC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Tv(e);if(void 0!==t&&!this.Be(t))return!1;const r=Js(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Xv{constructor(){this.qe=new e0}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getFieldIndex(e,t){return de.resolve(null)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class e0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new An(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new An(Zt.comparator)).toArray()}}const op=new Uint8Array(0);class nS{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new e0,this.Ge=new Ku(r=>ic(r),(r,o)=>Qd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:fi(o)};return wC(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[kf(t),""],!1,!0);return wC(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ha(d.parent))}return r})}addFieldIndex(e,t){const r=$m(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=$m(e),o=Hm(e),u=ap(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ap(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=an();const m=[];return de.forEach(u,(w,D)=>{var x;Pe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${ic(t)}`);const R=function(mt,st){const Ot=Tv(st);if(void 0===Ot)return null;for(const Wt of vm(mt,Ot.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(D,w),V=function(mt,st){const Ot=new Map;for(const Wt of Js(st))for(const Lr of vm(mt,Wt.fieldPath))switch(Lr.op){case"==":case"in":Ot.set(Wt.fieldPath.canonicalString(),Lr.value);break;case"not-in":case"!=":return Ot.set(Wt.fieldPath.canonicalString(),Lr.value),Array.from(Ot.values())}return null}(D,w),q=function(mt,st){const Ot=[];let Wt=!0;for(const Lr of Js(st)){const Po=0===Lr.kind?VE(mt,Lr.fieldPath,mt.startAt):wm(mt,Lr.fieldPath,mt.startAt);if(!Po.value)return null;Ot.push(Po.value),Wt&&(Wt=Po.inclusive)}return new Wu(Ot,Wt)}(D,w),ee=function(mt,st){const Ot=[];let Wt=!0;for(const Lr of Js(st)){const Po=0===Lr.kind?wm(mt,Lr.fieldPath,mt.endAt):VE(mt,Lr.fieldPath,mt.endAt);if(!Po.value)return null;Ot.push(Po.value),Wt&&(Wt=Po.inclusive)}return new Wu(Ot,Wt)}(D,w),Me=this.je(w,D,q),Ue=this.je(w,D,ee),Ct=this.We(w,D,V),Tt=this.ze(w.indexId,R,Me,!!q&&q.inclusive,Ue,!!ee&&ee.inclusive,Ct);return de.forEach(Tt,mt=>r.Gt(mt,t.limit).next(st=>{st.forEach(Ot=>{const Wt=$e.fromSegments(Ot.documentKey);d.has(Wt)||(d=d.add(Wt),m.push(Wt))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),D=w/(null!=t?t.length:1),x=[];for(let R=0;R<w;++R){const V=t?this.He(t[R/D]):op,q=r?this.Je(e,V,r[R%D],o):this.Ye(e),ee=u?this.Xe(e,V,u[R%D],d):this.Ye(e+1);x.push(...this.createRange(q,ee,m.map(Me=>this.Je(e,V,Me,!0))))}return x}Je(e,t,r,o){const u=new Ya(e,$e.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Ya(e,$e.empty(),t,r);return o?u.ke():u}Ye(e){return new Ya(e,$e.empty(),op,op)}getFieldIndex(e,t){const r=new vC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new sp;for(const o of Js(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Ka.fe.Zt(u,d)}return r.Se()}He(e){const t=new sp;return Ka.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new sp;return Ka.fe.Zt(Kd(this.databaseId,t),r.Ne(function(o){const u=Js(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new sp);let u=0;for(const d of Js(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&fm(m))o=this.nn(o,d,m);else{const D=w.Ne(d.kind);Ka.fe.Zt(m,D)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new sp;w.seed(m.Se()),Ka.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Kr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$m(e),o=Hm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(D,x){const R=x?new Yd(x.sequenceNumber,new Ga(Qu(x.readTime),new $e(ha(x.documentKey)),x.largestBatchId)):Yd.empty(),V=D.fields.map(([q,ee])=>new mm(Dr.fromServerFormat(q),ee));return new gm(D.indexId,D.collectionGroup,V,R)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=$m(e),u=Hm(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:ah((V=r).readTime),documentKey:fi(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.on(e,o,w).next(D=>{const x=this.un(u,w);return D.isEqual(x)?de.resolve():this.an(e,u,w,D,x)}))))})}cn(e,t,r,o){return ap(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return ap(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=ap(e);let u=new An(lh);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Ya(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new An(lh);const o=this.Ze(t,e);if(null==o)return r;const u=Tv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(fm(d))for(const m of d.arrayValue.values||[])r=r.add(new Ya(t.indexId,e.key,this.He(m),o))}else r=r.add(new Ya(t.indexId,e.key,op,o));return r}an(e,t,r,o,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,D,x,R){const V=m.getIterator(),q=w.getIterator();let ee=nh(V),Me=nh(q);for(;ee||Me;){let Ue=!1,Ct=!1;if(ee&&Me){const Tt=D(ee,Me);Tt<0?Ct=!0:Tt>0&&(Ue=!0)}else null!=ee?Ct=!0:Ue=!0;Ue?(x(Me),Me=nh(q)):Ct?(R(ee),ee=nh(V)):(ee=nh(V),Me=nh(q))}}(o,u,lh,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),de.waitFor(d)}rn(e){let t=1;return Hm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>lh(d,m)).filter((d,m,w)=>!m||0!==lh(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=lh(d,e),w=lh(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,op,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,op,[]]));return u}}function wC(n){return kr(n,"collectionParents")}function ap(n){return kr(n,"indexEntries")}function $m(n){return kr(n,"indexConfiguration")}function Hm(n){return kr(n,"indexState")}const EC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gm(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,R,V)=>(m++,V.delete()));u.push(w.next(()=>{It(1===m)}));const D=[];for(const x of t.mutations){const R=pb(e,x.key.path,t.batchId);u.push(o.delete(R)),D.push(x.key)}return de.waitFor(u).next(()=>D)}function qm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(41943040,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);class ys{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ys(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pa(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=ch(e),d=pa(e);return d.add({}).next(m=>{It("number"==typeof m);const w=new Vm(m,t,r,o),D=function(V,q,ee){const Me=ee.baseMutations.map(Ct=>fc(V.Jt,Ct)),Ue=ee.mutations.map(Ct=>fc(V.Jt,Ct));return{userId:q,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Me,mutations:Ue}}(this.M,this.userId,w),x=[];let R=new An((V,q)=>Lt(V.canonicalString(),q.canonicalString()));for(const V of o){const q=pb(this.userId,V.key.path,m);R=R.add(V.key.path.popLast()),x.push(d.put(D)),x.push(u.put(q,lC))}return R.forEach(V=>{x.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),de.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return pa(e).get(t).next(r=>r?(It(r.userId===this.userId),rp(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return pa(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=rp(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pa(e).qt("userMutationsIndex",t).next(r=>r.map(o=>rp(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wa(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return ch(e).Wt({range:o},(d,m,w)=>{const[D,x,R]=d,V=ha(x);if(D===this.userId&&t.path.isEqual(V))return pa(e).get(R).next(q=>{if(!q)throw et();It(q.userId===this.userId),u.push(rp(this.M,q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Lt);const o=[];return t.forEach(u=>{const d=Wa(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=ch(e).Wt({range:m},(D,x,R)=>{const[V,q,ee]=D,Me=ha(q);V===this.userId&&u.path.isEqual(Me)?r=r.add(ee):R.done()});o.push(w)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Wa(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new An(Lt);return ch(e).Wt({range:d},(w,D,x)=>{const[R,V,q]=w,ee=ha(V);R===this.userId&&r.isPrefixOf(ee)?ee.length===o&&(m=m.add(q)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(pa(e).get(u).next(d=>{if(null===d)throw et();It(d.userId===this.userId),r.push(rp(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Gm(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return ch(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=ha(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return xb(e,this.userId,t)}wn(e){return Mb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xb(n,e,t){const r=Wa(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return ch(n).Wt({range:u,jt:!0},(m,w,D)=>{const[x,R,V]=m;x===e&&R===o&&(d=!0),D.done()}).next(()=>d)}function pa(n){return kr(n,"mutations")}function ch(n){return kr(n,"documentMutations")}function Mb(n){return kr(n,"mutationQueues")}class Qa{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Qa(0)}static yn(){return new Qa(-1)}}class Rb{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Qa(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new Vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mc(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return mc(e).Wt((d,m)=>{const w=jm(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return mc(e).Wt((r,o)=>{const u=jm(o);t(u)})}pn(e){return Nb(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return Nb(e).put("targetGlobalKey",t)}Tn(e,t){return mc(e).put(mC(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ic(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return mc(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const D=jm(m);Qd(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ja(e);return t.forEach(d=>{const m=fi(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ja(e);return de.forEach(t,u=>{const d=fi(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ja(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ja(e);let u=an();return o.Wt({range:r,jt:!0},(d,m,w)=>{const D=ha(d[1]),x=new $e(D);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=fi(t.path),o=IDBKeyRange.bound([r],[kf(r)],!1,!0);let u=0;return Ja(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return mc(e).get(t).next(r=>r?jm(r):null)}}function mc(n){return kr(n,"targets")}function Nb(n){return kr(n,"targetGlobal")}function Ja(n){return kr(n,"targetDocuments")}function yc(n){return t0.apply(this,arguments)}function t0(){return t0=(0,pe.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==Wv)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),t0.apply(this,arguments)}function Ob([n,e],[t,r]){const o=Lt(n,t);return 0===o?Lt(e,r):o}class n0{constructor(e){this.An=e,this.buffer=new An(Ob),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ob(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class No{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,pe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yu(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield yc(o)}yield t.Sn(e)}))}}class bC{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(ms.A);const r=new n0(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(EC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EC):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,D;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(D=Date.now(),dm()<=li.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(D-w)+`ms\nTotal Duration: ${D-x}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class rS{constructor(e,t){this.db=e,this.garbageCollector=new bC(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return zm(e,r)}removeReference(e,t,r){return zm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zm(e,t)}On(e,t){return function(r,o){let u=!1;return Mb(r).zt(d=>xb(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),Ja(e).delete([0,fi(d.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zm(e,t)}Mn(e,t){const r=Ja(e);let o,u=ms.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:D})=>{0===d?(u!==ms.A&&t(new $e(ha(o)),u),u=D,o=w):u=ms.A}).next(()=>{u!==ms.A&&t(new $e(ha(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zm(n,e){return Ja(n).put((r=n.currentSequenceNumber,{targetId:0,path:fi(e.path),sequenceNumber:r}));var r}class r0{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IC{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Bm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=_n.newInvalidDocument(t);return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Wm(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:_n.newInvalidDocument(t)};return _c(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Wm(t))},(o,u)=>{r={document:this.$n(t,u),size:qm(u)}}).next(()=>r)}getEntries(e,t){let r=to();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=to(),o=new tr($e.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,qm(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new An(Pb);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Wm(o.first()),Wm(o.last())),d=o.getIterator();let m=d.getNext();return _c(e).Wt({index:"documentKeyIndex",range:u},(w,D,x)=>{const R=$e.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&Pb(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,D),m=d.hasNext()?d.getNext():null),m?x.Ut(Wm(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Bm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=to();for(const w of d){const D=this.$n($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=to();const d=o0(t,r),m=o0(t,Ga.max());return _c(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,D,x)=>{const R=this.$n($e.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(R.key,R),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new DC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return s0(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return s0(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Eb(n,e){let t;if(e.document)t=ab(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),o=Qu(e.noDocument.readTime);t=_n.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=$e.fromSegments(e.unknownDocument.path),o=Qu(e.unknownDocument.version);t=_n.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Vt(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return _n.newInvalidDocument(e)}}class DC extends r0{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ku(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new An((u,d)=>Lt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=bb(this.Kn.M,d);o=o.add(u.path.popLast()),r+=qm(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=bb(this.Kn.M,d.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function s0(n){return kr(n,"remoteDocumentGlobal")}function _c(n){return kr(n,"remoteDocumentsV14")}function Wm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function o0(n,e){const t=e.documentKey.path.toArray();return[n,Bm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Pb(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Lt(t[u],r[u]),o)return o;return o=Lt(t.length,r.length),o||(o=Lt(t[t.length-2],r[r.length-2]),o||Lt(t[t.length-1],r[r.length-1]))}class CC{constructor(e){this.M=e}kt(e,t,r,o){const u=new oh("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pi,{unique:!0}),m.createObjectStore("documentMutations"),kb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),kb(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pi,{unique:!0});const x=w.store("mutations"),R=D.map(V=>x.put(V));return de.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:km});w.createIndex("collectionPathOverlayIndex",Gv,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",XA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:JA});w.createIndex("documentKeyIndex",tp),w.createIndex("collectionGroupIndex",cC)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:fC}).createIndex("sequenceNumberIndex",Hv,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:mb}).createIndex("documentKeyIndex",yb,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=qm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,w=>{It(w.userId===u.userId);const D=rp(this.M,w);return Gm(e,u.userId,D).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Zt(d),D=[0,fi(w)];u.push(t.get(D).next(x=>x?de.resolve():t.put({targetId:0,path:fi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:hC});const r=t.store("collectionParents"),o=new e0,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:fi(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Zt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],D)=>{const x=ha(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=jm(o),d=mC(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(D=d,D.document?new $e(Zt.fromString(D.document.name).popFirst(5)):D.noDocument?$e.fromSegments(D.noDocument.path):D.unknownDocument?$e.fromSegments(D.unknownDocument.path):et()).path.toArray();var D;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>de.waitFor(o))}}function kb(n){n.createObjectStore("targetDocuments",{keyPath:dC}).createIndex("documentTargetsIndex",gb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$v,{unique:!0}),n.createObjectStore("targetGlobal")}const Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class up{constructor(e,t,r,o,u,d,m,w,D,x,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=D,this.Zn=x,this.ts=R,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!up.vt())throw new xe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rS(this,o),this.hs=t+"main",this.M=new Yv(w),this.ls=new fa(this.hs,this.ts,new CC(this.M)),this.fs=new Rb(this.referenceDelegate,this.M),this.ds=new IC(this.M),this._s=new eS,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(re.FAILED_PRECONDITION,Zm);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ms(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Yu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return vc(e).get("owner").next(t=>de.resolve(this.bs(t)))}Vs(e){return lp(e).delete(this.clientId)}vs(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=kr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):vc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(re.FAILED_PRECONDITION,Zm);return!1}}return!(!this.networkEnabled||!this.inForeground)||lp(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new wb(t,ms.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>lp(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return ys.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new nS(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Cb.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?Fm:13===d?zv:12===d?pC:11===d?qv:void et();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new wb(w,this.es?this.es.next():ms.A),"readwrite-primary"===t?this.Es(m).next(D=>!!D||this.As(m)).next(D=>{if(!D)throw Jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(re.FAILED_PRECONDITION,Wv);return r(m)}).next(D=>this.Ps(m).next(()=>D)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return vc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(re.FAILED_PRECONDITION,Zm)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vc(e).put("owner",t)}static vt(){return fa.vt()}Rs(e){const t=vc(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Jn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vc(n){return kr(n,"owner")}function lp(n){return kr(n,"clientMetadata")}function a0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Fb{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):$f(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let o=dc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=dc();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const w=(D=t,x=m.child(o),new la(x,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,x;return this.zs(e,w,r).next(D=>{D.forEach((x,R)=>{u=u.insert(x,R)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let D=o.get(w);null==D&&(D=_n.newInvalidDocument(w),o=o.insert(w,D)),Zf(m,D,d.localWriteTime),D.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{Dm(t,d)||(o=o.remove(u))}),o))}}class Km{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=an(),o=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Km(e,t.fromCache,r,o)}}class Lb{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const d=this.ei(t,u);return(Em(t)||Xd(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(dm()<=li.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sv(t)),this.Zs.Qs(e,t,PE(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ei(e,t){let r=new An(xv(e));return t.forEach((o,u)=>{Dm(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return dm()<=li.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Sv(t)),this.Zs.Qs(e,t,Ga.min())}}class TC{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new tr(Lt),this.ri=new Ku(u=>ic(u),Qd),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Fb(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function AC(n,e,t,r){return new TC(n,e,t,r)}function SC(n,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,pe.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=an();for(const D of o){d.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}for(const D of u){m.push(D.batchId);for(const x of D.mutations)w=w.add(x.key)}return t.ci.Ks(r,w).next(D=>({hi:D,removedBatchIds:d,addedBatchIds:m}))})})}),Ym.apply(this,arguments)}function xC(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,D){const x=w.batch,R=x.keys();let V=de.resolve();return R.forEach(q=>{V=V.next(()=>D.getEntry(m,q)).next(ee=>{const Me=w.docVersions.get(q);It(null!==Me),ee.version.compareTo(Me)<0&&(x.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),D.addEntry(ee)))})}),V.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function Vb(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function MC(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((D,x)=>{const R=o.get(x);if(!R)return;m.push(t.fs.removeMatchingKeys(u,D.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,D.addedDocuments,x)));let V=R.withSequenceNumber(u.currentSequenceNumber);var q,ee,Me;e.targetMismatches.has(x)?V=V.withResumeToken(Cr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),o=o.insert(x,V),ee=V,Me=D,(0===(q=R).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,V))});let w=to();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),m.push(RC(u,d,e.documentUpdates).next(D=>{w=D})),!r.isEqual(Et.min())){const D=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(D)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.ci.Gs(u,w)).next(()=>w)}).then(u=>(t.ii=o,u))}function RC(n,e,t){let r=an();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=to();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Pe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function iS(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function cp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Za(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function dp(n,e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,pe.Z)(function*(n,e,t){const r=Ge(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Yu(d))throw d;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),Ub.apply(this,arguments)}function Qm(n,e,t){const r=Ge(n);let o=Et.min(),u=an();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,D){const x=Ge(m),R=x.ri.get(D);return void 0!==R?de.resolve(x.ii.get(R)):x.fs.getTargetData(w,D)}(r,d,Xs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.si.Qs(d,e,t?o:Et.min(),t?u:an())).next(m=>(jb(r,qE(e),m),{documents:m,li:u})))}function hp(n,e){const t=Ge(n),r=Ge(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Bb(n,e){const t=Ge(n),r=t.oi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,PE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(jb(t,e,o),o))}function jb(n,e,t){let r=Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function Xa(){return Xa=(0,pe.Z)(function*(n,e,t,r){const o=Ge(n);let u=an(),d=to();for(const D of t){const x=e.fi(D.metadata.name);D.document&&(u=u.add(x));const R=e.di(D);R.setReadTime(e._i(D.metadata.readTime)),d=d.insert(x,R)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield cp(o,(D=r,Xs(Jd(Zt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>RC(D,m,d).next(x=>(m.apply(D),x)).next(x=>o.fs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.fs.addMatchingKeys(D,u,w.targetId)).next(()=>o.ci.Gs(D,x)).next(()=>x)))}),Xa.apply(this,arguments)}function Hb(n,e){return fp.apply(this,arguments)}function fp(){return fp=(0,pe.Z)(function*(n,e,t=an()){const r=yield cp(n,Xs(Ib(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Pr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Cr.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),fp.apply(this,arguments)}class u0{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return de.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:Ib(r.bundledQuery),readTime:Pr(r.readTime)}),de.resolve();var r}}class NC{constructor(){this.overlays=new tr($e.comparator),this.gi=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=rh(),u=t.length+1,d=new $e(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new tr((D,x)=>D-x);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let x=u.get(D.largestBatchId);null===x&&(x=rh(),u=u.insert(D.largestBatchId,x)),x.set(D.getKey(),D)}}const m=rh(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,x)=>m.set(D,x)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Um(t,r));let u=this.gi.get(t);void 0===u&&(u=an(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class pp{constructor(){this.yi=new An(hr.pi),this.Ii=new An(hr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new hr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new hr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new $e(new Zt([])),r=new hr(t,e),o=new hr(t,e+1),u=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),u.push(d.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new $e(new Zt([])),r=new hr(t,e),o=new hr(t,e+1);let u=an();return this.Ii.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new hr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return $e.comparator(e.key,t.key)||Lt(e.vi,t.vi)}static Ti(e,t){return Lt(e.vi,t.vi)||$e.comparator(e.key,t.key)}}class Jm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new An(hr.pi)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const d=new Vm(u,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new hr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),o=new hr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(Lt);return t.forEach(o=>{const u=new hr(o,0),d=new hr(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,d],m=>{r=r.add(m.vi)})}),de.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const d=new hr(new $e(u),0);let m=new An(Lt);return this.Di.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(w.vi)),!0)},d),de.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return de.forEach(t.mutations,o=>{const u=new hr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new hr(t,0),o=this.Di.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class sS{constructor(e){this.Mi=e,this.docs=new tr($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=to();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():_n.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=to();const u=new $e(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||FE(kE(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}Oi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oS(this)}getSize(e){return de.resolve(this.size)}}class oS extends r0{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class aS{constructor(e){this.persistence=e,this.Fi=new Ku(t=>ic(t),Qd),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$i=0,this.Bi=new pp,this.targetCount=0,this.Li=Qa.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),de.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Qa(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Bi.containsKey(t))}}class uS{constructor(e,t){this.Ui={},this.overlays={},this.es=new ms(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new aS(this),this.indexManager=new Xv,this.ds=new sS(r=>this.referenceDelegate.qi(r)),this.M=new Yv(t),this._s=new u0(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Jm(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new Gb(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return de.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Gb extends _b{constructor(e){super(),this.currentSequenceNumber=e}}class l0{constructor(e){this.persistence=e,this.ji=new pp,this.Wi=null}static zi(e){return new l0(e)}get Hi(){if(this.Wi)return this.Wi;throw et()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),de.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Hi,r=>{const o=$e.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return de.or([()=>de.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function qb(n,e){return`firestore_clients_${n}_${e}`}function zb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function c0(n,e){return`firestore_targets_${n}_${e}`}class gp{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new gp(e,t,o.state,u):(Jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new dh(e,r.state,o):(Jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=xm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=TE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new mp(e,u):(Jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class d0{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new d0(t.clientId,t.onlineState):(Jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class h0{constructor(){this.activeTargetIds=xm()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xm{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new tr(Lt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=qb(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new h0),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(qb(e.persistenceKey,o));if(u){const d=mp.Yi(o,u);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(c0(this.persistenceKey,e));if(r){const o=dh.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(c0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let d=ms.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),d=m}catch(m){Jn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ms.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new gp(this.currentUser,e,t,r),u=zb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=zb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=c0(this.persistenceKey,e),u=new dh(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return mp.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return gp.Yi(new Zr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return dh.Yi(o,t)}mr(e){return d0.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=xm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ey{constructor(){this.$r=new h0,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new h0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lS{Lr(e){}shutdown(){}}class f0{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const p0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class OC{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class PC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const d=this.uo(e,t);Pe("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,u),this.co(e,d,m,r).then(w=>(Pe("RestConnection","Received: ",w),w),w=>{throw Hd("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$d,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${p0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const m=new LD;m.listenOnce(PD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case vv.NO_ERROR:const D=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(D)),u(D);break;case vv.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),d(new xe(re.DEADLINE_EXCEEDED,"Request time out"));break;case vv.HTTP_ERROR:const x=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const V=function(q){const ee=q.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ee)>=0?ee:re.UNKNOWN}(R.status);d(new xe(V,R.message))}else d(new xe(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(re.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ND(),d=OD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new FD({})),this.ao(m.initMessageHeaders,t,r),(0,vt.uI)()||(0,vt.b$)()||(0,vt.d)()||(0,vt.w1)()||(0,vt.Mn)()||(0,vt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Pe("Connection","Creating WebChannel: "+w,m);const D=u.createWebChannel(w,m);let x=!1,R=!1;const V=new OC({Wr:ee=>{R?Pe("Connection","Not sending because WebChannel is closed:",ee):(x||(Pe("Connection","Opening WebChannel transport."),D.open(),x=!0),Pe("Connection","WebChannel sending:",ee),D.send(ee))},zr:()=>D.close()}),q=(ee,Me,Ue)=>{ee.listen(Me,Ct=>{try{Ue(Ct)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return q(D,cm.EventType.OPEN,()=>{R||Pe("Connection","WebChannel transport opened.")}),q(D,cm.EventType.CLOSE,()=>{R||(R=!0,Pe("Connection","WebChannel transport closed"),V.no())}),q(D,cm.EventType.ERROR,ee=>{R||(R=!0,Hd("Connection","WebChannel transport errored:",ee),V.no(new xe(re.UNAVAILABLE,"The operation could not be completed")))}),q(D,cm.EventType.MESSAGE,ee=>{var Me;if(!R){const Ue=ee.data[0];It(!!Ue);const Ct=Ue,Tt=Ct.error||(null===(Me=Ct[0])||void 0===Me?void 0:Me.error);if(Tt){Pe("Connection","WebChannel received error:",Tt);const mt=Tt.status;let st=function(Wt){const Lr=er[Wt];if(void 0!==Lr)return Am(Lr)}(mt),Ot=Tt.message;void 0===st&&(st=re.INTERNAL,Ot="Unknown error status: "+mt+" with message "+Tt.message),R=!0,V.no(new xe(st,Ot)),D.close()}else Pe("Connection","WebChannel received:",Ue),V.so(Ue)}}),q(d,kD.STAT_EVENT,ee=>{ee.stat===yE.PROXY?Pe("Connection","Detected buffering proxy"):ee.stat===yE.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.eo()},0),V}}function kC(){return"undefined"!=typeof window?window:null}function g0(){return"undefined"!=typeof document?document:null}function yp(n){return new Pv(n,!0)}class m0{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class FC{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new m0(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,pe.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,pe.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Jn(t.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===re.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new xe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,pe.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cS extends FC{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Lv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,D){return w.N?(It(void 0===D||"string"==typeof D),Cr.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),Cr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const D=void 0===w.code?re.UNKNOWN:Am(w.code);return new xe(D,w.message||"")}(d);t=new nb(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=da(n,r.document.name),u=Pr(r.document.updateTime),d=new hi({mapValue:{fields:r.document.fields}}),m=_n.newFoundDocument(o,u,d);t=new Mm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=da(n,r.document),u=r.readTime?Pr(r.readTime):Et.min(),d=_n.newNoDocument(o,u);t=new Mm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=da(n,r.document);t=new Mm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new YA(r.count||0);t=new tb(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Pr(u.readTime):Et.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=hc(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=_m(m)?{documents:Pm(o,m)}:{query:ub(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=sb(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=za(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function oC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=hc(this.M),t.removeTarget=e,this.Fo(t)}}class dS extends FC{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Vv(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Pr(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=Pr(o)),new QD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.Yo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=hc(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fc(this.M,r))};this.Fo(t)}}class hS extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new xe(re.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(re.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(re.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class fS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Jn(t),this.iu=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class LC{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;_(d)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(D){const x=Ge(D);x.fu.add(4),yield _p(x),x.wu.set("Unknown"),x.fu.delete(4),yield ty(x)}),function(D){return w.apply(this,arguments)})(d))}))}),this.wu=new fS(r,o)}}function ty(n){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,pe.Z)(function*(n){if(_(n))for(const e of n.du)yield e(!0)}),Wb.apply(this,arguments)}function _p(n){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,pe.Z)(function*(n){for(const e of n.du)yield e(!1)}),Zb.apply(this,arguments)}function i(n,e){const t=Ge(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),p(t)?c(t):ry(t).xo()&&a(t,e))}function s(n,e){const t=Ge(n),r=ry(t);t.lu.delete(e),r.xo()&&l(t,e),0===t.lu.size&&(r.xo()?r.Mo():_(t)&&t.wu.set("Unknown"))}function a(n,e){n.mu.Z(e.targetId),ry(n).jo(e)}function l(n,e){n.mu.Z(e),ry(n).Wo(e)}function c(n){n.mu=new Jf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),ry(n).start(),n.wu.ru()}function p(n){return _(n)&&!ry(n).Co()&&n.lu.size>0}function _(n){return 0===Ge(n).fu.size}function E(n){n.mu=void 0}function b(n){return A.apply(this,arguments)}function A(){return A=(0,pe.Z)(function*(n){n.lu.forEach((e,t)=>{a(n,e)})}),A.apply(this,arguments)}function S(n,e){return P.apply(this,arguments)}function P(){return P=(0,pe.Z)(function*(n,e){E(n),p(n)?(n.wu.au(e),c(n)):n.wu.set("Unknown")}),P.apply(this,arguments)}function U(n,e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,pe.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof nb&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ye(n,r)}else if(e instanceof Mm?n.mu.ut(e):e instanceof tb?n.mu._t(e):n.mu.ht(e),!t.isEqual(Et.min()))try{const r=yield Vb(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.mu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.lu.get(w);D&&o.lu.set(w,D.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(Cr.EMPTY_BYTE_STRING,w.snapshotVersion)),l(o,m);const D=new Za(w.target,m,1,w.sequenceNumber);a(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield ye(n,r)}var r}),Z.apply(this,arguments)}function ye(n,e,t){return ke.apply(this,arguments)}function ke(){return ke=(0,pe.Z)(function*(n,e,t){if(!Yu(e))throw e;n.fu.add(1),yield _p(n),n.wu.set("Offline"),t||(t=()=>Vb(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield ty(n)}))}),ke.apply(this,arguments)}function Be(n,e){return e().catch(t=>ye(n,t,e))}function Ze(n){return be.apply(this,arguments)}function be(){return be=(0,pe.Z)(function*(n){const e=Ge(n),t=hh(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;dt(e);)try{const o=yield iS(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,qt(e,o)}catch(o){yield ye(e,o)}un(e)&&Zi(e)}),be.apply(this,arguments)}function dt(n){return _(n)&&n.hu.length<10}function qt(n,e){n.hu.push(e);const t=hh(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function un(n){return _(n)&&!hh(n).Co()&&n.hu.length>0}function Zi(n){hh(n).start()}function wc(n){return vp.apply(this,arguments)}function vp(){return vp=(0,pe.Z)(function*(n){hh(n).Zo()}),vp.apply(this,arguments)}function y0(n){return wp.apply(this,arguments)}function wp(){return wp=(0,pe.Z)(function*(n){const e=hh(n);for(const t of n.hu)e.Jo(t.mutations)}),wp.apply(this,arguments)}function _0(n,e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,pe.Z)(function*(n,e,t){const r=n.hu.shift(),o=Kv.from(r,e,t);yield Be(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ze(n)}),Ep.apply(this,arguments)}function v0(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,pe.Z)(function*(n,e){var t;e&&hh(n).Ho&&(yield(t=(0,pe.Z)(function*(r,o){if(Ov(u=o.code)&&u!==re.ABORTED){const d=r.hu.shift();hh(r).ko(),yield Be(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Ze(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),un(n)&&Zi(n)}),bp.apply(this,arguments)}function ny(n,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,pe.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=_(t);t.fu.add(3),yield _p(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield ty(t)}),Ip.apply(this,arguments)}function VC(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,pe.Z)(function*(n,e){const t=Ge(n);e?(t.fu.delete(2),yield ty(t)):e||(t.fu.add(2),yield _p(t),t.wu.set("Unknown"))}),UC.apply(this,arguments)}function ry(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.eu(),new cS(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:b.bind(null,n),Yr:S.bind(null,n),Qo:U.bind(null,n)}),n.du.push(function(){var e=(0,pe.Z)(function*(t){t?(n.gu.ko(),p(n)?c(n):n.wu.set("Unknown")):(yield n.gu.stop(),E(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function hh(n){return n.yu||(n.yu=function(e,t,r){const o=Ge(e);return o.eu(),new dS(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:wc.bind(null,n),Yr:v0.bind(null,n),Xo:y0.bind(null,n),Yo:_0.bind(null,n)}),n.du.push(function(){var e=(0,pe.Z)(function*(t){t?(n.yu.ko(),yield Ze(n)):(yield n.yu.stop(),n.hu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class BC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new BC(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iy(n,e){if(Jn("AsyncQueue",`${e}: ${n}`),Yu(n))return new xe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class sy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new sy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pS{constructor(){this.pu=new tr($e.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):et():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class oy{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new oy(e,t,sy.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class yR{constructor(){this.Tu=void 0,this.listeners=[]}}class _R{constructor(){this.queries=new Ku(e=>Av(e),Hf),this.onlineState="Unknown",this.Eu=new Set}}function jC(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new yR),o)try{u.Tu=yield t.onListen(r)}catch(d){const m=iy(d,`Initialization of query '${Sv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&qC(t)}),$C.apply(this,arguments)}function HC(n,e){return GC.apply(this,arguments)}function GC(){return GC=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),GC.apply(this,arguments)}function vR(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&qC(t)}function wR(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function qC(n){n.Eu.forEach(e=>{e.next()})}class zC{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new oy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=oy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class ER{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class gS{constructor(e){this.M=e}fi(e){return da(this.M,e)}di(e){return e.metadata.exists?ab(this.M,e.document,!1):_n.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Pr(e)}}class bR{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mS(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new gS(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||an()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function $b(n,e,t,r){return Xa.apply(this,arguments)}(e.localStore,new gS(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield Hb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function mS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yS{constructor(e){this.key=e}}class _S{constructor(e){this.key=e}}class vS{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=an(),this.mutatedKeys=an(),this.Uu=xv(e),this.qu=new sy(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new pS,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=Em(this.query)&&o.size===this.query.limit?o.last():null,D=Xd(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,R)=>{const V=o.get(x),q=Dm(this.query,R)?R:null,ee=!!V&&this.mutatedKeys.has(V.key),Me=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ue=!1;V&&q?V.data.isEqual(q.data)?ee!==Me&&(r.track({type:3,doc:q}),Ue=!0):this.ju(V,q)||(r.track({type:2,doc:q}),Ue=!0,(w&&this.Uu(q,w)>0||D&&this.Uu(q,D)<0)&&(m=!0)):!V&&q?(r.track({type:0,doc:q}),Ue=!0):V&&!q&&(r.track({type:1,doc:V}),Ue=!0,(w||D)&&(m=!0)),Ue&&(q?(d=d.add(q),u=Me?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),Em(this.query)||Xd(this.query))for(;d.size>this.query.limit;){const x=Em(this.query)?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((D,x)=>function(R,V){const q=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return q(R)-q(V)}(D.type,x.type)||this.Uu(D.doc,x.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==u.length||w?{snapshot:new oy(this.query,e.qu,o,u,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new pS,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=an(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new _S(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new yS(r))}),t}Yu(e){this.$u=e.li,this.Lu=an();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return oy.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class IR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DR{constructor(e){this.key=e,this.Zu=!1}}class CR{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new Ku(m=>Av(m),Hf),this.na=new Map,this.sa=new Set,this.ia=new tr($e.comparator),this.ra=new Map,this.oa=new pp,this.ua={},this.aa=new Map,this.ca=Qa.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function TR(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,pe.Z)(function*(n,e){const t=mT(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const d=yield cp(t.localStore,Xs(e));t.isPrimaryClient&&i(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield ZC(t,e,r,"current"===m)}return o}),WC.apply(this,arguments)}function ZC(n,e,t,r){return KC.apply(this,arguments)}function KC(){return KC=(0,pe.Z)(function*(n,e,t,r){n.la=(x,R,V)=>{return(q=(0,pe.Z)(function*(ee,Me,Ue,Ct){let Tt=Me.view.Gu(Ue);Tt.ni&&(Tt=yield Qm(ee.localStore,Me.query,!1).then(({documents:Ot})=>Me.view.Gu(Ot,Tt)));const mt=Ct&&Ct.targetChanges.get(Me.targetId),st=Me.view.applyChanges(Tt,ee.isPrimaryClient,mt);return sT(ee,Me.targetId,st.Hu),st.snapshot}),function(ee,Me,Ue,Ct){return q.apply(this,arguments)})(n,x,R,V);var q};const o=yield Qm(n.localStore,e,!0),u=new vS(e,o.li),d=u.Gu(o.documents),m=Qf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);sT(n,t,w.Hu);const D=new IR(e,t,u);return n.ea.set(e,D),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),KC.apply(this,arguments)}function AR(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,pe.Z)(function*(n,e){const t=Ge(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!Hf(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),s(t.remoteStore,r.targetId),ay(t,r.targetId)}).catch(yc))):(ay(t,r.targetId),yield dp(t.localStore,r.targetId,!0))}),YC.apply(this,arguments)}function QC(){return QC=(0,pe.Z)(function*(n,e,t){const r=yT(n);try{const o=yield function(u,d){const m=Ge(u),w=Vt.now(),D=d.reduce((R,V)=>R.add(V.key),an());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.ci.Ks(R,D).next(V=>{x=V;const q=[];for(const ee of d){const Me=XD(ee,x.get(ee.key));null!=Me&&q.push(new eo(ee.key,Me,OE(Me.value.mapValue),Xn.exists(!0)))}return m.Bs.addMutationBatch(R,w,q,d)})).then(R=>(R.applyToLocalDocumentSet(x),{batchId:R.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ua[u.currentUser.toKey()];w||(w=new tr(Lt)),w=w.insert(d,m),u.ua[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ec(r,o.changes),yield Ze(r.remoteStore)}catch(o){const u=iy(o,"Failed to persist write");t.reject(u)}}),QC.apply(this,arguments)}function wS(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,pe.Z)(function*(n,e){const t=Ge(n);try{const r=yield MC(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ra.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?It(d.Zu):o.removedDocuments.size>0&&(It(d.Zu),d.Zu=!1))}),yield Ec(t,r,e)}catch(r){yield yc(r)}}),JC.apply(this,arguments)}function ES(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let w=!1;m.queries.forEach((D,x)=>{for(const R of x.listeners)R.Au(d)&&(w=!0)}),w&&qC(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xR(n,e,t){return XC.apply(this,arguments)}function XC(){return XC=(0,pe.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let d=new tr($e.comparator);d=d.insert(u,_n.newNoDocument(u,Et.min()));const m=an().add(u),w=new Yf(Et.min(),new Map,new An(Lt),d,m);yield wS(r,w),r.ia=r.ia.remove(u),r.ra.delete(e),oT(r)}else yield dp(r.localStore,e,!1).then(()=>ay(r,e,t)).catch(yc)}),XC.apply(this,arguments)}function MR(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield xC(t.localStore,e);iT(t,r,null),rT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ec(t,o)}catch(o){yield yc(o)}}),eT.apply(this,arguments)}function RR(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,pe.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.Bs.lookupMutationBatch(w,d).next(x=>(It(null!==x),D=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,D))})}(r.localStore,e);iT(r,e,t),rT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ec(r,o)}catch(o){yield yc(o)}}),tT.apply(this,arguments)}function nT(){return nT=(0,pe.Z)(function*(n,e){const t=Ge(n);_(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=iy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),nT.apply(this,arguments)}function rT(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function iT(n,e,t){const r=Ge(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function ay(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||bS(n,r)})}function bS(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(s(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),oT(n))}function sT(n,e,t){for(const r of t)r instanceof yS?(n.oa.addReference(r.key,e),OR(n,r)):r instanceof _S?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||bS(n,r.key)):et()}function OR(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.sa.add(r),oT(n))}function oT(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new $e(Zt.fromString(e)),r=n.ca.next();n.ra.set(r,new DR(t)),n.ia=n.ia.insert(t,r),i(n.remoteStore,new Za(Xs(Jd(t.path)),r,2,ms.A))}}function Ec(n,e,t){return aT.apply(this,arguments)}function aT(){return aT=(0,pe.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D.fromCache?"not-current":"current"),o.push(D);const x=Km.Ys(w.targetId,D);u.push(x)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,pe.Z)(function*(w,D){const x=Ge(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>de.forEach(D,V=>de.forEach(V.Hs,q=>x.persistence.referenceDelegate.addReference(R,V.targetId,q)).next(()=>de.forEach(V.Js,q=>x.persistence.referenceDelegate.removeReference(R,V.targetId,q)))))}catch(R){if(!Yu(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of D){const V=R.targetId;if(!R.fromCache){const q=x.ii.get(V),Me=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);x.ii=x.ii.insert(V,Me)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),aT.apply(this,arguments)}function PR(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,pe.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield SC(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new xe(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ec(t,r.hi)}var o}),uT.apply(this,arguments)}function kR(n,e){const t=Ge(n),r=t.ra.get(e);if(r&&r.Zu)return an().add(r.key);{let o=an();const u=t.na.get(e);if(!u)return o;for(const d of u){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function FR(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,pe.Z)(function*(n,e){const t=Ge(n),r=yield Qm(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&sT(t,e.targetId,o.Hu),o}),lT.apply(this,arguments)}function LR(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,pe.Z)(function*(n,e){const t=Ge(n);return Bb(t.localStore,e).then(r=>Ec(t,r))}),cT.apply(this,arguments)}function VR(n,e,t,r){return dT.apply(this,arguments)}function dT(){return dT=(0,pe.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const w=Ge(d),D=Ge(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>D.fn(x,m).next(R=>R?w.ci.Ks(x,R):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Ze(o.remoteStore):"acknowledged"===t||"rejected"===t?(iT(o,e,r||null),rT(o,e),m=e,Ge(Ge(o.localStore).Bs)._n(m)):et(),yield Ec(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),dT.apply(this,arguments)}function hT(){return hT=(0,pe.Z)(function*(n,e){const t=Ge(n);if(mT(t),yT(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield IS(t,r.toArray());t.ha=!0,yield VC(t.remoteStore,!0);for(const u of o)i(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(ay(t,d),dp(t.localStore,d,!0))),s(t.remoteStore,d)}),yield o,yield IS(t,r),function(u){const d=Ge(u);d.ra.forEach((m,w)=>{s(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new tr($e.comparator)}(t),t.ha=!1,yield VC(t.remoteStore,!1)}}),hT.apply(this,arguments)}function IS(n,e,t){return fT.apply(this,arguments)}function fT(){return fT=(0,pe.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield cp(r.localStore,Xs(w[0]));for(const D of w){const x=r.ea.get(D),R=yield FR(r,x);R.snapshot&&u.push(R.snapshot)}}else{const D=yield hp(r.localStore,d);m=yield cp(r.localStore,D),yield ZC(r,DS(D),d,!1)}o.push(m)}return r.ta.Qo(u),o}),fT.apply(this,arguments)}function DS(n){return GE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Fs()}function jR(n,e,t,r){return pT.apply(this,arguments)}function pT(){return pT=(0,pe.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ha)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Bb(o.localStore,qE(u[0])),m=Yf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ec(o,d,m);break}case"rejected":yield dp(o.localStore,e,!0),ay(o,e,r);break;default:et()}}),pT.apply(this,arguments)}function $R(n,e,t){return gT.apply(this,arguments)}function gT(){return gT=(0,pe.Z)(function*(n,e,t){const r=mT(n);if(r.ha){for(const o of e){if(r.na.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield hp(r.localStore,o),d=yield cp(r.localStore,u);yield ZC(r,DS(u),d.targetId,!1),i(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield dp(r.localStore,o,!1).then(()=>{s(r.remoteStore,o),ay(r,o)}).catch(yc))}}),gT.apply(this,arguments)}function mT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xR.bind(null,e),e.ta.Qo=vR.bind(null,e.eventManager),e.ta.fa=wR.bind(null,e.eventManager),e}function yT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RR.bind(null,e),e}class CS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.M=yp(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return AC(this.persistence,new Lb,e.initialUser,this.M)}wa(e){return new uS(l0.zi,this.M)}_a(e){return new ey}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class TS extends CS{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield yT(r.ya.syncEngine),yield Ze(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return AC(this.persistence,new Lb,e.initialUser,this.M)}ma(e){return new No(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=a0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new up(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kC(),g0(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new ey}}class GR extends TS{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof Xm&&(r.sharedClientState.syncEngine={Mr:VR.bind(null,o),Or:jR.bind(null,o),Fr:$R.bind(null,o),Fs:BR.bind(null,o),kr:LR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,pe.Z)(function*(d){yield function UR(n,e){return hT.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}_a(e){const t=kC();if(!Xm.vt(t))throw new xe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=a0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _T{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ES(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=PR.bind(null,r.syncEngine),yield VC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _R}createDatastore(e){const t=yp(e.databaseInfo.databaseId),r=new PC(e.databaseInfo);return new hS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ES(this.syncEngine,m,0),d=f0.vt()?new f0:new lS,new LC(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,D){const x=new CR(r,o,u,d,m,w);return D&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield _p(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function AS(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Kb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qR{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new ER(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,pe.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class zR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,d){const m=Ge(u),w=hc(m.M)+"/documents",D={documents:d.map(q=>ep(m.M,q))},x=yield m.ho("BatchGetDocuments",w,D),R=new Map;x.forEach(q=>{const ee=function QA(n,e){return"found"in e?function(t,r){It(!!r.found);const o=da(t,r.found.name),u=Pr(r.found.updateTime),d=new hi({mapValue:{fields:r.found.fields}});return _n.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=da(t,r.missing),u=Pr(r.readTime);return _n.newNoDocument(o,u)}(n,e):et()}(m.M,q);R.set(ee.key.toString(),ee)});const V=[];return d.forEach(q=>{const ee=R.get(q.toString());It(!!ee),V.push(ee)}),V}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new th(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=$e.fromPath(o);e.mutations.push(new Nv(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const d=Ge(o),m=hc(d.M)+"/documents",w={writes:u.map(D=>fc(d.M,D))};yield d.oo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new xe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WR{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new m0(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,pe.Z)(function*(){const t=new zR(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Mo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ov(t)}return!1}}class ZR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Zr.UNAUTHENTICATED,this.clientId=Pf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Pe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=iy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function SS(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield SC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vT.apply(this,arguments)}function xS(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ET(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ny(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ny(e.remoteStore,u)),n.onlineComponents=e}),wT.apply(this,arguments)}function ET(n){return bT.apply(this,arguments)}function bT(){return bT=(0,pe.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield SS(n,new CS)),n.offlineComponents}),bT.apply(this,arguments)}function Yb(n){return IT.apply(this,arguments)}function IT(){return IT=(0,pe.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield xS(n,new _T)),n.onlineComponents}),IT.apply(this,arguments)}function MS(n){return ET(n).then(e=>e.persistence)}function DT(n){return ET(n).then(e=>e.localStore)}function RS(n){return Yb(n).then(e=>e.remoteStore)}function CT(n){return Yb(n).then(e=>e.syncEngine)}function uy(n){return TT.apply(this,arguments)}function TT(){return TT=(0,pe.Z)(function*(n){const e=yield Yb(n),t=e.eventManager;return t.onListen=TR.bind(null,e.syncEngine),t.onUnlisten=AR.bind(null,e.syncEngine),t}),TT.apply(this,arguments)}function NS(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const D=new Kb({next:R=>{u.enqueueAndForget(()=>HC(o,x));const V=R.docs.has(d);!V&&R.fromCache?w.reject(new xe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&R.fromCache&&m&&"server"===m.source?w.reject(new xe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new zC(Jd(d.path),D,{includeMetadataChanges:!0,Cu:!0});return jC(o,x)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}function OS(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const D=new Kb({next:R=>{u.enqueueAndForget(()=>HC(o,x)),R.fromCache&&"server"===m.source?w.reject(new xe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new zC(d,D,{includeMetadataChanges:!0,Cu:!0});return jC(o,x)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}const PS=new Map;function AT(n,e,t){if(!t)throw new xe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kS(n,e,t,r){if(!0===e&&!0===r)throw new xe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FS(n){if(!$e.isDocumentKey(n))throw new xe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LS(n){if($e.isDocumentKey(n))throw new xe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qb(n);throw new xe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VS(n,e){if(e<=0)throw new xe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class US{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class w0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new US({}),this._settingsFrozen=!1,e instanceof ja?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new US(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zA;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=PS.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),PS.delete(e),t.terminate())}(this),Promise.resolve()}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class Ju extends Ki{constructor(e,t,r){super(e,t,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new $e(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function BS(n,e,...t){if(n=(0,vt.m9)(n),AT("collection","path",e),n instanceof w0){const r=Zt.fromString(e,...t);return LS(r),new Ju(n,null,r)}{if(!(n instanceof Un||n instanceof Ju))throw new xe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return LS(r),new Ju(n.firestore,null,r)}}function Jb(n,e,...t){if(n=(0,vt.m9)(n),1===arguments.length&&(e=Pf.R()),AT("doc","path",e),n instanceof w0){const r=Zt.fromString(e,...t);return FS(r),new Un(n,null,new $e(r))}{if(!(n instanceof Un||n instanceof Ju))throw new xe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return FS(r),new Un(n.firestore,n instanceof Ju?n.converter:null,new $e(r))}}function jS(n,e){return n=(0,vt.m9)(n),e=(0,vt.m9)(e),(n instanceof Un||n instanceof Ju)&&(e instanceof Un||e instanceof Ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $S(n,e){return n=(0,vt.m9)(n),e=(0,vt.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&Hf(n._query,e._query)&&n.converter===e.converter}class s1{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new m0(this,"async_queue_retry"),this.qa=()=>{const t=g0();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=g0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=g0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Or;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Yu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Jn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=BC.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&et()}verifyOperationInProgress(){}Wa(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function ST(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class o1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zn extends w0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new s1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||HS(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||HS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function HS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new CE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ZR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function GS(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield SS(n,t),yield xS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===re.FAILED_PRECONDITION||u.code===re.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function qS(n){if(n._initialized||n._terminated)throw new xe(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Cr.fromBase64String(e))}catch(t){throw new xe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dp{constructor(e){this._methodName=e}}class Xb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const m1=/^__.*__$/;class y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kf(e,this.data,t,this.fieldTransforms)}}class zS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class eI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new eI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return rI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(WS(this.Xa)&&m1.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class _1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||yp(e)}ac(e,t,r,o=!1){return new eI({Xa:e,methodName:t,uc:r,path:Dr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=yp(n._databaseId);return new _1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tI(n,e,t,r,o,u={}){const d=n.ac(u.merge||u.mergeFields?2:0,e,t,o);NT("Data must be an object, but it was:",d,r);const m=YS(r,d);let w,D;if(u.merge)w=new qd(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const R of u.mergeFields){const V=OT(e,R,t);if(!d.contains(V))throw new xe(re.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);JS(x,V)||x.push(V)}w=new qd(x),D=d.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,D=d.fieldTransforms;return new y1(new hi(m),w,D)}class E0 extends Dp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof E0}}function ZS(n,e,t){return new eI({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class xT extends Dp{_toFieldTransform(e){return new Zu(e.path,new oc)}isEqual(e){return e instanceof xT}}class v1 extends Dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=ZS(this,e,!0),r=this.cc.map(u=>Tp(u,t)),o=new ac(r);return new Zu(e.path,o)}isEqual(e){return this===e}}class w1 extends Dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=ZS(this,e,!0),r=this.cc.map(u=>Tp(u,t)),o=new uc(r);return new Zu(e.path,o)}isEqual(e){return this===e}}class E1 extends Dp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new lc(e.M,WE(e.M,this.hc));return new Zu(e.path,t)}isEqual(e){return this===e}}function MT(n,e,t,r){const o=n.ac(1,e,t);NT("Data must be an object, but it was:",o,r);const u=[],d=hi.empty();nc(r,(w,D)=>{const x=nI(e,w,t);D=(0,vt.m9)(D);const R=o.sc(x);if(D instanceof E0)u.push(x);else{const V=Tp(D,R);null!=V&&(u.push(x),d.set(x,V))}});const m=new qd(u);return new zS(d,m,o.fieldTransforms)}function RT(n,e,t,r,o,u){const d=n.ac(1,e,t),m=[OT(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(OT(e,u[V])),w.push(u[V+1]);const D=[],x=hi.empty();for(let V=m.length-1;V>=0;--V)if(!JS(D,m[V])){const q=m[V];let ee=w[V];ee=(0,vt.m9)(ee);const Me=d.sc(q);if(ee instanceof E0)D.push(q);else{const Ue=Tp(ee,Me);null!=Ue&&(D.push(q),x.set(q,Ue))}}const R=new qd(D);return new zS(x,R,d.fieldTransforms)}function KS(n,e,t,r=!1){return Tp(t,n.ac(r?4:3,e))}function Tp(n,e){if(QS(n=(0,vt.m9)(n)))return NT("Unsupported field value:",e,n),YS(n,e);if(n instanceof Dp)return function(t,r){if(!WS(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Tp(d,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return WE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Vt.fromDate(t);return{timestampValue:za(r.M,o)}}if(t instanceof Vt){const o=new Vt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:za(r.M,o)}}if(t instanceof Xb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:sb(r.M,t._byteString)};if(t instanceof Un){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ih(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${Qb(t)}`)}(n,e)}function YS(n,e){const t={};return IE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(n,(r,o)=>{const u=Tp(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function QS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof Xb||n instanceof Xu||n instanceof Un||n instanceof Dp)}function NT(n,e,t){if(!QS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Qb(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function OT(n,e,t){if((e=(0,vt.m9)(e))instanceof bc)return e._internalPath;if("string"==typeof e)return nI(n,e);throw rI("Field path arguments must be of type string or ",n,!1,void 0,t)}const b1=new RegExp("[~\\*/\\[\\]]");function nI(n,e,t){if(e.search(b1)>=0)throw rI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bc(...e.split("."))._internalPath}catch(r){throw rI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(re.INVALID_ARGUMENT,m+n+w)}function JS(n,e){return n.some(t=>t.isEqual(e))}class b0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new I1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class I1 extends b0{data(){return super.data()}}function iI(n,e){return"string"==typeof e?nI(n,e):e instanceof bc?e._internalPath:e._delegate._internalPath}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends b0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Ic{data(e={}){return super.data(e)}}class fh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ap(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new I0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:D1(d.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function D1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function XS(n,e){return n instanceof Ic&&e instanceof Ic?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fh&&e instanceof fh&&n._firestore===e._firestore&&$S(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ex(n){if(Xd(n)&&0===n.explicitOrderBy.length)throw new xe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D0{}function ph(n,...e){for(const t of e)n=t._apply(n);return n}class C1 extends D0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Cp(e.firestore),r=function(o,u,d,m,w,D,x){let R;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new xe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){ox(x,D);const q=[];for(const ee of x)q.push(sx(m,o,ee));R={arrayValue:{values:q}}}else R=sx(m,o,x)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||ox(x,D),R=KS(d,"where",x,"in"===D||"not-in"===D);const V=Kr.create(w,D,R);return function(q,ee){if(ee.S()){const Ue=bm(q);if(null!==Ue&&!Ue.isEqual(ee.field))throw new xe(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${ee.field.toString()}'`);const Ct=jf(q);null!==Ct&&ax(0,ee.field,Ct)}const Me=function(Ue,Ct){for(const Tt of Ue.filters)if(Ct.indexOf(Tt.op)>=0)return Tt.op;return null}(q,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Me)throw new xe(re.INVALID_ARGUMENT,Me===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Me.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ki(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new la(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class A1 extends D0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new sc(o,u);return function(m,w){if(null===jf(m)){const D=bm(m);null!==D&&ax(0,D,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Ki(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new la(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class tx extends D0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Ki(e.firestore,e.converter,Im(e._query,this.wc,this.mc))}}class nx extends D0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ix(e,this.type,this.gc,this.yc);return new Ki(e.firestore,e.converter,(o=t,new la((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class rx extends D0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ix(e,this.type,this.gc,this.yc);return new Ki(e.firestore,e.converter,(o=t,new la((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function ix(n,e,t,r){if(t[0]=(0,vt.m9)(t[0]),t[0]instanceof b0)return function(o,u,d,m,w){if(!m)throw new xe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const x of eh(o))if(x.field.isKeyField())D.push(Kd(u,m.key));else{const R=m.data.field(x.field);if(zd(R))throw new xe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const V=x.field.canonicalString();throw new xe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(R)}return new Wu(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Cp(n.firestore);return function(u,d,m,w,D,x){const R=u.explicitOrderBy;if(D.length>R.length)throw new xe(re.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<D.length;q++){const ee=D[q];if(R[q].field.isKeyField()){if("string"!=typeof ee)throw new xe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!$f(u)&&-1!==ee.indexOf("/"))throw new xe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Me=u.path.child(Zt.fromString(ee));if(!$e.isDocumentKey(Me))throw new xe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Ue=new $e(Me);V.push(Kd(d,Ue))}else{const Me=KS(m,w,ee);V.push(Me)}}return new Wu(V,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function sx(n,e,t){if("string"==typeof(t=(0,vt.m9)(t))){if(""===t)throw new xe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$f(e)&&-1!==t.indexOf("/"))throw new xe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!$e.isDocumentKey(r))throw new xe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kd(n,new $e(r))}if(t instanceof Un)return Kd(n,t._key);throw new xe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qb(t)}.`)}function ox(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(re.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ax(n,e,t){if(!t.isEqual(e))throw new xe(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class PT{convertValue(e,t="none"){switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return nc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Xb(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wd(e));default:return null}}convertTimestamp(e){const t=qu(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);It(Bv(r));const o=new ja(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return o.isEqual(t)||Jn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function sI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class k1 extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class ux{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const o=gh(e,this._firestore),u=sI(o.converter,t,r),d=tI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,vt.m9)(t))||t instanceof bc?RT(this._dataReader,"WriteBatch.update",u._key,t,r,o):MT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gh(e,this._firestore);return this._mutations=this._mutations.concat(new th(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gh(n,e){if((n=(0,vt.m9)(n)).firestore!==e)throw new xe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sp extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function lx(n,e,t){n=Xt(n,Un);const r=Xt(n.firestore,zn),o=sI(n.converter,e,t);return ly(r,[tI(Cp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Xn.none())])}function cx(n,e,t,...r){n=Xt(n,Un);const o=Xt(n.firestore,zn),u=Cp(o);let d;return d="string"==typeof(e=(0,vt.m9)(e))||e instanceof bc?RT(u,"updateDoc",n._key,e,t,r):MT(u,"updateDoc",n._key,e),ly(o,[d.toMutation(n._key,Xn.exists(!0))])}function dx(n,...e){var t,r,o;n=(0,vt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||ST(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(ST(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,D,x;if(n instanceof Un)D=Xt(n.firestore,zn),x=Jd(n._key.path),w={next:R=>{e[d]&&e[d](kT(D,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Xt(n,Ki);D=Xt(R.firestore,zn),x=R._query;const V=new Sp(D);w={next:q=>{e[d]&&e[d](new fh(D,V,R,q))},error:e[d+1],complete:e[d+2]},ex(n._query)}return function(R,V,q,ee){const Me=new Kb(ee),Ue=new zC(V,Me,q);return R.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return jC(yield uy(R),Ue)})),()=>{Me.Ia(),R.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return HC(yield uy(R),Ue)}))}}(Fr(D),x,m,w)}function ly(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function SR(n,e,t){return QC.apply(this,arguments)}(yield CT(t),r,o)})),o.promise}(Fr(n),e)}function kT(n,e,t){const r=t.docs.get(e._key),o=new Sp(n);return new Ic(n,o,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}class q1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=gh(e,this._firestore),r=new k1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new b0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new b0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=gh(e,this._firestore),u=sI(o.converter,t,r),d=tI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,vt.m9)(t))||t instanceof bc?RT(this._dataReader,"Transaction.update",u._key,t,r,o):MT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gh(e,this._firestore),r=new Sp(this._firestore);return super.get(e).then(o=>new Ic(this._firestore,r,t._key,o._document,new Ap(!1,!1),t.converter))}}function FT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fx(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function px(){if(!function BD(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$d=Zs.SDK_VERSION,(0,Zs._registerComponent)(new pd.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new zn(o,new WA(t.getProvider("auth-internal")),new gt(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Zs.registerVersion)(_E,"3.4.8",n),(0,Zs.registerVersion)(_E,"3.4.8","esm2017")}();class C0{constructor(e){this._delegate=e}static fromBase64String(e){return px(),new C0(Xu.fromBase64String(e))}static fromUint8Array(e){return fx(),new C0(Xu.fromUint8Array(e))}toBase64(){return px(),this._delegate.toBase64()}toUint8Array(){return fx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LT(n){return function eN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tN{enableIndexedDbPersistence(e,t){return function u1(n,e){qS(n=Xt(n,zn));const t=Fr(n),r=n._freezeSettings(),o=new _T;return GS(t,o,new TS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function l1(n){qS(n=Xt(n,zn));const e=Fr(n),t=n._freezeSettings(),r=new _T;return GS(e,r,new GR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function c1(n){if(n._initialized&&!n._terminated)throw new xe(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!fa.vt())return Promise.resolve();const o=r+"main";yield fa.delete(o)}),function(r){return t.apply(this,arguments)})(a0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ja||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function r1(n,e,t,r={}){var o;const u=(n=Xt(n,w0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Hd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Zr.MOCK_USER;else{d=(0,vt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zr(w)}n._authCredentials=new wv(new tc(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function h1(n){return function KR(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield MS(n),t=yield RS(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.fu.delete(0),ty(o)}(t)}))}(Fr(n=Xt(n,zn)))}(this._delegate)}disableNetwork(){return function f1(n){return function YR(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield MS(n),t=yield RS(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=Ge(o);u.fu.add(0),yield _p(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Xt(n,zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function d1(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function NR(n,e){return nT.apply(this,arguments)}(yield CT(e),t)})),t.promise}(Fr(n=Xt(n,zn)))}(this._delegate)}onSnapshotsInSync(e){return function G1(n,e){return function XR(n,e){const t=new Kb(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield uy(n),o=t,Ge(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield uy(n),o=t,void Ge(r).Eu.delete(o);var r,o}))}}(Fr(n=Xt(n,zn)),ST(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cy(this,BS(this._delegate,e))}catch(t){throw _s(t,"collection()","Firestore.collection()")}}doc(e){try{return new ga(this,Jb(this._delegate,e))}catch(t){throw _s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vs(this,function i1(n,e){if(n=Xt(n,w0),AT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new la(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw _s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function z1(n,e){return function e1(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const r=yield(o=n,Yb(o).then(u=>u.datastore));var o;new WR(n.asyncQueue,r,e,t).run()})),t.promise}(Fr(n=Xt(n,zn)),t=>e(new q1(n,t)))}(this._delegate,t=>e(new mx(this,t)))}batch(){return Fr(this._delegate),new yx(new ux(this._delegate,e=>ly(this._delegate,e)))}loadBundle(e){return function p1(n,e){const t=Fr(n=Xt(n,zn)),r=new o1;return function t1(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return AS(w,D);if(w instanceof ArrayBuffer)return AS(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new qR(w,d);var w}(t,yp(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function HR(n,e,t){const r=Ge(n);var o;(o=(0,pe.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(V,q){const ee=Ge(V),Me=Pr(q.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Ue=>ee._s.getBundleMetadata(Ue,q.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Me)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(mS(w));const D=new bR(w,u.localStore,d.M);let x=yield d.da();for(;x;){const V=yield D.ku(x);V&&m._updateProgress(V),x=yield d.da()}const R=yield D.complete();return yield Ec(u,R.Fu,void 0),yield function(V,q){const ee=Ge(V);return ee.persistence.runTransaction("Save bundle","readwrite",Me=>ee._s.saveBundleMetadata(Me,q))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Ou)}catch(w){return Hd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield CT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function g1(n,e){return function n1(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield DT(n),e)}))}(Fr(n=Xt(n,zn)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new vs(this,t):null)}}class oI extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new C0(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ga.forKey(t,this.firestore,null)}}class mx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}get(e){const t=Mp(e);return this._delegate.get(t).then(r=>new T0(this._firestore,new Ic(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Mp(e);return r?(FT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}}class yx{constructor(e){this._delegate=e}set(e,t,r){const o=Mp(e);return r?(FT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new A0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new xp(e,new oI(e),t),o.set(t,u)),u}}xp.INSTANCES=new WeakMap;class ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ga(t,new Un(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ga(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cy(this.firestore,BS(this._delegate,e))}catch(t){throw _s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,vt.m9)(e))instanceof Un&&jS(this._delegate,e)}set(e,t){t=FT("DocumentReference.set",t);try{return t?lx(this._delegate,e,t):lx(this._delegate,e)}catch(r){throw _s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cx(this._delegate,e):cx(this._delegate,e,t,...r)}catch(o){throw _s(o,"updateDoc()","DocumentReference.update()")}}delete(){return function $1(n){return ly(Xt(n.firestore,zn),[new th(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=_x(e),r=vx(e,o=>new T0(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return dx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function L1(n){n=Xt(n,Un);const e=Xt(n.firestore,zn),t=Fr(e),r=new Sp(e);return function QR(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield function(w,D){const x=Ge(w);return x.persistence.runTransaction("read document","readonly",R=>x.ci.Ls(R,D))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=iy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield DT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ic(e,r,n._key,o,new Ap(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function V1(n){n=Xt(n,Un);const e=Xt(n.firestore,zn);return NS(Fr(e),n._key,{source:"server"}).then(t=>kT(e,n,t))}(this._delegate):function F1(n){n=Xt(n,Un);const e=Xt(n.firestore,zn);return NS(Fr(e),n._key).then(t=>kT(e,n,t))}(this._delegate),t.then(r=>new T0(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function _s(n,e,t){return n.message=n.message.replace(e,t),n}function _x(n){for(const e of n)if("object"==typeof e&&!LT(e))return e;return{}}function vx(n,e){var t,r;let o;return o=LT(n[0])?n[0]:LT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class T0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return XS(this._delegate,e._delegate)}}class A0 extends T0{data(e){const t=this._delegate.data(e);return function wE(n,e){n||et()}(void 0!==t),t}}class vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oI(e)}where(e,t,r){try{return new vs(this.firestore,ph(this._delegate,function T1(n,e,t){const r=e,o=iI("where",n);return new C1(o,r,t)}(e,t,r)))}catch(o){throw _s(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vs(this.firestore,ph(this._delegate,function S1(n,e="asc"){const t=e,r=iI("orderBy",n);return new A1(r,t)}(e,t)))}catch(r){throw _s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vs(this.firestore,ph(this._delegate,function x1(n){return VS("limit",n),new tx("limit",n,"F")}(e)))}catch(t){throw _s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vs(this.firestore,ph(this._delegate,function M1(n){return VS("limitToLast",n),new tx("limitToLast",n,"L")}(e)))}catch(t){throw _s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vs(this.firestore,ph(this._delegate,function R1(...n){return new nx("startAt",n,!0)}(...e)))}catch(t){throw _s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vs(this.firestore,ph(this._delegate,function N1(...n){return new nx("startAfter",n,!1)}(...e)))}catch(t){throw _s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vs(this.firestore,ph(this._delegate,function O1(...n){return new rx("endBefore",n,!1)}(...e)))}catch(t){throw _s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vs(this.firestore,ph(this._delegate,function P1(...n){return new rx("endAt",n,!0)}(...e)))}catch(t){throw _s(t,"endAt()","Query.endAt()")}}isEqual(e){return $S(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function B1(n){n=Xt(n,Ki);const e=Xt(n.firestore,zn),t=Fr(e),r=new Sp(e);return function JR(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield Qm(o,u,!0),w=new vS(u,m.li),D=w.Gu(m.documents),x=w.applyChanges(D,!1);d.resolve(x.snapshot)}catch(m){const w=iy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield DT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function j1(n){n=Xt(n,Ki);const e=Xt(n.firestore,zn),t=Fr(e),r=new Sp(e);return OS(t,n._query,{source:"server"}).then(o=>new fh(e,r,n,o))}(this._delegate):function U1(n){n=Xt(n,Ki);const e=Xt(n.firestore,zn),t=Fr(e),r=new Sp(e);return ex(n._query),OS(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate),t.then(r=>new VT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_x(e),r=vx(e,o=>new VT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return dx(this._delegate,t,r)}withConverter(e){return new vs(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}class rN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new A0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new A0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new A0(this._firestore,r))})}isEqual(e){return XS(this._delegate,e._delegate)}}class cy extends vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ga(this.firestore,e):null}doc(e){try{return new ga(this.firestore,void 0===e?Jb(this._delegate):Jb(this._delegate,e))}catch(t){throw _s(t,"doc()","CollectionReference.doc()")}}add(e){return function H1(n,e){const t=Xt(n.firestore,zn),r=Jb(n),o=sI(n.converter,e);return ly(t,[tI(Cp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ga(this.firestore,t))}isEqual(e){return jS(this._delegate,e._delegate)}withConverter(e){return new cy(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function Mp(n){return Xt(n,Un)}class UT{constructor(...e){this._delegate=new bc(...e)}static documentId(){return new UT(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,vt.m9)(e))instanceof bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Z1(){return new xT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rp(e)}static delete(){const e=function W1(){return new E0("deleteField")}();return e._methodName="FieldValue.delete",new Rp(e)}static arrayUnion(...e){const t=function K1(...n){return new v1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rp(t)}static arrayRemove(...e){const t=function Y1(...n){return new w1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rp(t)}static increment(e){const t=function Q1(n){return new E1("increment",n)}(e);return t._methodName="FieldValue.increment",new Rp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iN={Firestore:gx,GeoPoint:Xb,Timestamp:Vt,Blob:C0,Transaction:mx,WriteBatch:yx,DocumentReference:ga,DocumentSnapshot:T0,Query:vs,QueryDocumentSnapshot:A0,QuerySnapshot:VT,CollectionReference:cy,FieldPath:UT,FieldValue:Rp,setLogLevel:function nN(n){!function vE(n){Ua.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function wx(n,e){return function aN(n,e=ia.z){return new Sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function BT(n,e){return wx(n,e).pipe((0,Ft.U)(t=>({payload:t,type:"query"})))}function aI(n,e){return BT(n,e).pipe(bi(void 0),wd(),(0,Ft.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),D=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Ex(n,e,t){return aI(n,t).pipe(Er((r,o)=>function lN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function rD(n,e=ri.y){return n=null!=n?n:iD,(0,wr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Nn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function jT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function bx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function oN(n){(function sN(n,e){n.INTERNAL.registerComponent(new pd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},iN)))})(n,(e,t)=>new gx(e,t,new tN)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Og.Z);class Ix{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(bi(void 0),wd(),cs(([r,o])=>o.length>0||!r),(0,Ft.U)(([r,o])=>o),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Er((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bx(e);return Ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return BT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new Dx(this.ref.doc(e),this.afs)}}class Dx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Ax(r,t);return new Ix(o,u,this.afs)}snapshotChanges(){return function uN(n,e){return wx(n,e).pipe(bi(void 0),wd(),(0,Ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(Cn.iC)}}class dN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),cs(t=>t.length>0),Cn.iC):aI(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Er((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bx(e);return Ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return BT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Cn.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Cn.iC)}}const Cx=new f.OlP("angularfire2.enableFirestorePersistence"),Tx=new f.OlP("angularfire2.firestore.persistenceSettings"),hN=new f.OlP("angularfire2.firestore.settings"),fN=new f.OlP("angularfire2.firestore.use-emulator");function Ax(n,e=(t=>t)){return{query:e(n),ref:n}}let S0=(()=>{class n{constructor(t,r,o,u,d,m,w,D,x,R,V,q,ee,Me,Ue,Ct,Tt){this.schedulers=w;const mt=(0,Ai.on)(t,m,r),st=x;R&&x_(mt,m,V,ee,Me,Ue,q,Ct),[this.firestore,this.persistenceEnabled$]=(0,Ai.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const Ot=m.runOutsideAngular(()=>mt.firestore());if(u&&Ot.settings(u),st&&Ot.useEmulator(...st),o&&!ar(d)){const Wt=()=>{try{return(0,pn.D)(Ot.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Lr){return"undefined"!=typeof console&&console.warn(Lr),ct(!1)}};return[Ot,m.runOutsideAngular(Wt)]}return[Ot,ct(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Ax(o,r),m=this.schedulers.ngZone.run(()=>u);return new Ix(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new dN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Dx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ai.Dh),f.LFG(Ai.xv,8),f.LFG(Cx,8),f.LFG(hN,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(Tx,8),f.LFG(fN,8),f.LFG(vd,8),f.LFG(Cw,8),f.LFG(Ng,8),f.LFG(nD,8),f.LFG(Tw,8),f.LFG(A_,8),f.LFG(S_,8),f.LFG(_d,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pN=(()=>{class n{constructor(){Rg.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Cx,useValue:!0},{provide:Tx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[S0]}),n})(),Np=(()=>{class n{constructor(t,r){this.fa=t,this.db=r,this.user=this.fa.user}signUp(t,r){return this.fa.createUserWithEmailAndPassword(t,r)}signIn(t,r){return this.fa.signInWithEmailAndPassword(t,r)}getAllProducts(){return new Promise(t=>{this.db.collection("products").valueChanges({idField:"id"}).subscribe(r=>t(r))})}getCurrentUser(t){return new Promise(r=>{this.db.collection("users",o=>o.where("uid","==",t)).valueChanges().subscribe(o=>r(o))})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vd),f.LFG(S0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Op=(()=>{class n extends Sx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const el=new f.OlP("NgValueAccessor"),yN={provide:el,useExisting:(0,f.Gpc)(()=>Pp),multi:!0},vN=new f.OlP("CompositionEventMode");let Pp=(()=>{class n extends Sx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _N(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(vN,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([yN]),f.qOj]}),n})();function mh(n){return null==n||0===n.length}const Yi=new f.OlP("NgValidators"),yh=new f.OlP("NgAsyncValidators"),wN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function Ox(n){return mh(n.value)?{required:!0}:null}function kx(n){return mh(n.value)||wN.test(n.value)?null:{email:!0}}function uI(n){return null}function Ux(n){return null!=n}function Bx(n){const e=(0,f.QGY)(n)?(0,pn.D)(n):n;return(0,f.CqO)(e),e}function jx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function $x(n,e){return e.map(t=>t(n))}function Hx(n){return n.map(e=>function EN(n){return!n.validate}(e)?e:t=>e.validate(t))}function $T(n){return null!=n?function Gx(n){if(!n)return null;const e=n.filter(Ux);return 0==e.length?null:function(t){return jx($x(t,e))}}(Hx(n)):null}function HT(n){return null!=n?function qx(n){if(!n)return null;const e=n.filter(Ux);return 0==e.length?null:function(t){return function gN(...n){const e=(0,Rn.jO)(n),{args:t,keys:r}=vi(n),o=new Sr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,D=d;for(let x=0;x<d;x++){let R=!1;(0,qo.Xf)(t[x]).subscribe((0,Nn.x)(u,V=>{R||(R=!0,D--),m[x]=V},()=>w--,void 0,()=>{(!w||!R)&&(D||u.next(r?go(r,m):m),u.complete())}))}});return e?o.pipe(qc(e)):o}($x(t,e).map(Bx)).pipe((0,Ft.U)(jx))}}(Hx(n)):null}function zx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function GT(n){return n?Array.isArray(n)?n:[n]:[]}function lI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kx(n,e){const t=GT(e);return GT(n).forEach(o=>{lI(t,o)||t.push(o)}),t}function Yx(n,e){return GT(e).filter(t=>!lI(n,t))}class Qx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$T(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _h extends Qx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ws extends Qx{get formDirective(){return null}get path(){return null}}class Jx{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let x0=(()=>{class n extends Jx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_h,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),M0=(()=>{class n extends Jx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ws,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function R0(n,e){WT(n,e),e.valueAccessor.writeValue(n.value),function xN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&eM(n,e)})}(n,e),function RN(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function MN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&eM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function SN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WT(n,e){const t=function Wx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Zx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();fI(e._rawValidators,o),fI(e._rawAsyncValidators,o)}function eM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const N0="VALID",gI="INVALID",dy="PENDING",O0="DISABLED";function JT(n){return(mI(n)?n.validators:n)||null}function iM(n){return Array.isArray(n)?$T(n):n||null}function XT(n,e){return(mI(e)?e.asyncValidators:n)||null}function sM(n){return Array.isArray(n)?HT(n):n||null}function mI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const eA=n=>n instanceof nA;function aM(n){return(n=>n instanceof cM)(n)?n.value:n.getRawValue()}function uM(n,e){const t=eA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function lM(n,e){eA(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class tA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=iM(this._rawValidators),this._composedAsyncValidatorFn=sM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===N0}get invalid(){return this.status===gI}get pending(){return this.status==dy}get disabled(){return this.status===O0}get enabled(){return this.status!==O0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=iM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=sM(e)}addValidators(e){this.setValidators(Kx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yx(e,this._rawAsyncValidators))}hasValidator(e){return lI(this._rawValidators,e)}hasAsyncValidator(e){return lI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=N0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N0||this.status===dy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?O0:N0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dy,this._hasOwnPendingAsyncValidator=!0;const t=Bx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function kN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=eA(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof LN)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?O0:this.errors?gI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dy)?dy:this._anyControlsHaveStatus(gI)?gI:N0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cM extends tA{constructor(e=null,t,r){super(JT(t),XT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class nA extends tA{constructor(e,t,r){super(JT(t),XT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lM(this,e),Object.keys(e).forEach(r=>{uM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=aM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class LN extends tA{constructor(e,t,r){super(JT(t),XT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lM(this,e),e.forEach((r,o)=>{uM(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>aM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const VN={provide:ws,useExisting:(0,f.Gpc)(()=>kp)},P0=(()=>Promise.resolve(null))();let kp=(()=>{class n extends ws{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new nA({},$T(t),HT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){P0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),R0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){P0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){P0.then(()=>{const r=this._findContainer(t.path),o=new nA({});(function tM(n,e){WT(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){P0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){P0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function rM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Yi,10),f.Y36(yh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([VN]),f.qOj]}),n})();const BN={provide:_h,useExisting:(0,f.Gpc)(()=>hy)},fM=(()=>Promise.resolve(null))();let hy=(()=>{class n extends _h{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new cM,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function KT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Pp?t=u:function PN(n){return Object.getPrototypeOf(n.constructor)===Op}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ZT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){R0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){fM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;fM.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function dI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ws,9),f.Y36(Yi,10),f.Y36(yh,10),f.Y36(el,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([BN]),f.qOj,f.TTD]}),n})(),k0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),gM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();let Fp=(()=>{class n{constructor(){this._validator=uI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const sO={provide:Yi,useExisting:(0,f.Gpc)(()=>F0),multi:!0};let F0=(()=>{class n extends Fp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function nO(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Ox}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([sO]),f.qOj]}),n})();const aO={provide:Yi,useExisting:(0,f.Gpc)(()=>uA),multi:!0};let uA=(()=>{class n extends Fp{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=t=>""===t||!0===t||"true"===t,this.createValidator=t=>kx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[f._Bn([aO]),f.qOj]}),n})();const uO={provide:Yi,useExisting:(0,f.Gpc)(()=>yI),multi:!0};let yI=(()=>{class n extends Fp{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function DM(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function Fx(n){return e=>mh(e.value)||!function Mx(n){return null!=n&&"number"==typeof n.length}(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[f._Bn([uO]),f.qOj]}),n})(),dO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[gM]]}),n})(),hO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[dO]}),n})();function fO(n,e){1&n&&(f.TgZ(0,"p",15),f._uU(1,"Full name name is required"),f.qZA())}function pO(n,e){1&n&&(f.TgZ(0,"p",15),f._uU(1,"Password is required"),f.qZA())}function gO(n,e){1&n&&(f.TgZ(0,"p",15),f._uU(1,"Password should compose > 8 caracters"),f.qZA())}let mO=(()=>{class n{constructor(t,r,o){this.sa=t,this.route=r,this.as=o}ngOnInit(){}login(t){var r=this;let o=t.value;this.sa.signIn(o.flName,o.password).then(function(){var u=(0,pe.Z)(function*(d){console.log("login ok"),r.as.user.subscribe(m=>{r.Uid=m.uid}),yield new Promise(m=>setTimeout(m,400)),localStorage.setItem("userId",r.Uid),console.log(r.Uid),r.route.navigate(["/"])});return function(d){return u.apply(this,arguments)}}()).catch(()=>{console.log("login error"),this.messageError="Incorrect email or Password !"})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Np),f.Y36(Rr),f.Y36(Np))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:4,consts:[[1,"uk-position-center","uk-overlay","uk-overlay-default"],[3,"ngSubmit"],["f","ngForm"],[1,"uk-margin"],[1,"uk-inline"],["uk-icon","icon: happy",1,"uk-form-icon"],["type","text","name","flName","placeholder","Full name","ngModel","","required","",1,"uk-input"],["flName","ngModel"],["class","text-danger",4,"ngIf"],["uk-icon","icon: lock",1,"uk-form-icon","uk-form-icon-flip"],["type","password","name","password","ngModel","","placeholder","Password","required","","minlength","8",1,"uk-input"],["password","ngModel"],["type","submit",1,"btn","btn-outline-success",2,"width","100%","margin-bottom","5px"],["type","submit",1,"btn","btn-outline-primary",2,"width","100%"],[1,"text-center",2,"color","red"],[1,"text-danger"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0)(1,"form",1,2),f.NdJ("ngSubmit",function(){f.CHM(o);const d=f.MAs(2);return r.login(d)}),f.TgZ(3,"div",3)(4,"div",4),f._UZ(5,"span",5)(6,"input",6,7),f.qZA(),f.YNc(8,fO,2,0,"p",8),f.qZA(),f.TgZ(9,"div",3)(10,"div",4),f._UZ(11,"span",9)(12,"input",10,11),f.YNc(14,pO,2,0,"p",8),f.YNc(15,gO,2,0,"p",8),f.qZA()(),f.TgZ(16,"button",12),f._uU(17,"Login"),f.qZA(),f.TgZ(18,"button",13),f._uU(19,"forgot password"),f.qZA()(),f.TgZ(20,"p",14),f._uU(21),f.qZA()()}if(2&t){const o=f.MAs(7),u=f.MAs(13);f.xp6(8),f.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&o.touched),f.xp6(6),f.Q6J("ngIf",(null==u.errors?null:u.errors.required)&&u.touched),f.xp6(1),f.Q6J("ngIf",(null==u.errors?null:u.errors.minlength)&&u.touched),f.xp6(6),f.Oqu(r.messageError)}},directives:[k0,M0,kp,Pp,x0,hy,F0,or,yI],styles:[""]}),n})();function yO(n,e){if(1&n&&(f.TgZ(0,"div",26),f._UZ(1,"img",27),f.TgZ(2,"div",28)(3,"h5",29)(4,"b"),f._uU(5),f.qZA()(),f.TgZ(6,"p",30),f._uU(7),f.qZA()()()),2&n){const t=f.oxw().$implicit;f.xp6(1),f.Q6J("src",t.image,f.LSH),f.xp6(4),f.Oqu(t.title),f.xp6(2),f.hij(" ",t.description," ")}}function _O(n,e){if(1&n&&(f.TgZ(0,"div",24),f.YNc(1,yO,8,3,"div",25),f.qZA()),2&n){const t=e.$implicit,r=f.oxw();f.xp6(1),f.Q6J("ngIf",t.uid===r.Uid)}}function vO(n,e){if(1&n&&(f.TgZ(0,"div",31)(1,"strong"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.successMessage)}}let wO=(()=>{class n{constructor(t,r){this.fs=t,this.as=r,this.as.user.subscribe(o=>{this.Uid=o.uid})}ngOnInit(){var t=this;return(0,pe.Z)(function*(){t.dataArray=yield t.as.getAllProducts(),console.log(t.Uid)})()}addProduct(t){let r=t.value;this.fs.collection("products").doc().set({title:r.title,description:r.description,image:r.image,uid:this.Uid}).then(()=>{this.successMessage="Added !",console.log(this.successMessage)}).catch(()=>{console.log("error !")})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(S0),f.Y36(Np))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-my-products"]],decls:38,vars:2,consts:[[1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",2,"margin-bottom","10px"],[1,"row"],["class","col","style","margin-bottom: 10px",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","",1,"form-label"],["type","text","name","title","ngModel","","placeholder","Title","aria-describedby","helpId",1,"form-control"],["title","ngModel"],["id","helpId",1,"text-muted"],["type","Description","name","description","ngModel","","placeholder","Description","aria-describedby","helpId",1,"form-control"],["description","ngModel"],["type","text","name","image","ngModel","","placeholder","Image (link)","aria-describedby","helpId",1,"form-control"],["image","ngModel"],["type","submit",1,"btn","btn-success"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"col",2,"margin-bottom","10px"],["class","card",4,"ngIf"],[1,"card"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-success"]],template:function(t,r){if(1&t){const o=f.EpF();f._UZ(0,"br"),f.TgZ(1,"h3",0),f._uU(2,"My products"),f.qZA(),f.TgZ(3,"button",1),f._uU(4," Add product\n"),f.qZA(),f.TgZ(5,"div",2),f.YNc(6,_O,2,1,"div",3),f.qZA(),f.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"h5",8),f._uU(12,"Modal title"),f.qZA(),f._UZ(13,"button",9),f.qZA(),f.TgZ(14,"div",10)(15,"form",11,12),f.NdJ("ngSubmit",function(){f.CHM(o);const d=f.MAs(16);return r.addProduct(d)}),f.TgZ(17,"div",13),f._UZ(18,"label",14)(19,"input",15,16),f.TgZ(21,"small",17),f._uU(22,"Help text"),f.qZA()(),f.TgZ(23,"div",13),f._UZ(24,"label",14)(25,"textarea",18,19),f.TgZ(27,"small",17),f._uU(28,"Help text"),f.qZA()(),f.TgZ(29,"div",13),f._UZ(30,"label",14)(31,"input",20,21),f.TgZ(33,"small",17),f._uU(34,"Help text"),f.qZA()(),f.TgZ(35,"button",22),f._uU(36,"Add product"),f.qZA(),f.YNc(37,vO,3,1,"div",23),f.qZA()()()()()}2&t&&(f.xp6(6),f.Q6J("ngForOf",r.dataArray),f.xp6(31),f.Q6J("ngIf",r.successMessage))},directives:[Yn,or,k0,M0,kp,Pp,x0,hy],styles:[""]}),n})();function EO(n,e){if(1&n&&(f.TgZ(0,"div",24)(1,"div",25),f._UZ(2,"img",26),f.TgZ(3,"div",27)(4,"h5",28)(5,"b"),f._uU(6),f.qZA()(),f.TgZ(7,"p",29),f._uU(8),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.image,f.LSH),f.xp6(4),f.Oqu(t.title),f.xp6(2),f.hij(" ",t.description," ")}}function bO(n,e){if(1&n&&(f.TgZ(0,"div",30)(1,"strong"),f._uU(2),f.qZA()()),2&n){const t=f.oxw();f.xp6(2),f.Oqu(t.successMessage)}}let IO=(()=>{class n{constructor(t,r){this.fs=t,this.as=r}ngOnInit(){var t=this;return(0,pe.Z)(function*(){t.dataArray=yield t.as.getAllProducts()})()}addProduct(t){let r=t.value;this.fs.collection("products").doc().set({title:r.title,description:r.description,image:r.image,uid:this.Uid}).then(()=>{this.successMessage="Added !",console.log(this.successMessage)}).catch(()=>{console.log("error !")})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(S0),f.Y36(Np))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products"]],decls:38,vars:2,consts:[[1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",2,"margin-bottom","10px"],[1,"row"],["class","col","style","margin-bottom: 10px",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["for","",1,"form-label"],["type","text","name","title","ngModel","","placeholder","Title","aria-describedby","helpId",1,"form-control"],["title","ngModel"],["id","helpId",1,"text-muted"],["type","Description","name","description","ngModel","","placeholder","Description","aria-describedby","helpId",1,"form-control"],["description","ngModel"],["type","text","name","image","ngModel","","placeholder","Image (link)","aria-describedby","helpId",1,"form-control"],["image","ngModel"],["type","submit",1,"btn","btn-success"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"col",2,"margin-bottom","10px"],[1,"card"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-success"]],template:function(t,r){if(1&t){const o=f.EpF();f._UZ(0,"br"),f.TgZ(1,"h3",0),f._uU(2,"All products"),f.qZA(),f.TgZ(3,"button",1),f._uU(4," Add product\n"),f.qZA(),f.TgZ(5,"div",2),f.YNc(6,EO,9,3,"div",3),f.qZA(),f.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"h5",8),f._uU(12,"Modal title"),f.qZA(),f._UZ(13,"button",9),f.qZA(),f.TgZ(14,"div",10)(15,"form",11,12),f.NdJ("ngSubmit",function(){f.CHM(o);const d=f.MAs(16);return r.addProduct(d)}),f.TgZ(17,"div",13),f._UZ(18,"label",14)(19,"input",15,16),f.TgZ(21,"small",17),f._uU(22,"Help text"),f.qZA()(),f.TgZ(23,"div",13),f._UZ(24,"label",14)(25,"textarea",18,19),f.TgZ(27,"small",17),f._uU(28,"Help text"),f.qZA()(),f.TgZ(29,"div",13),f._UZ(30,"label",14)(31,"input",20,21),f.TgZ(33,"small",17),f._uU(34,"Help text"),f.qZA()(),f.TgZ(35,"button",22),f._uU(36,"Add product"),f.qZA(),f.YNc(37,bO,3,1,"div",23),f.qZA()()()()()}2&t&&(f.xp6(6),f.Q6J("ngForOf",r.dataArray),f.xp6(31),f.Q6J("ngIf",r.successMessage))},directives:[Yn,k0,M0,kp,Pp,x0,hy,or],styles:[""]}),n})(),DO=(()=>{class n{constructor(t){this.as=t,this.Uid=localStorage.getItem("userId")}ngOnInit(){var t=this;return(0,pe.Z)(function*(){t.dataProfile=(yield t.as.getCurrentUser(t.Uid))[0],console.log(t.dataProfile)})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Np))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-profil"]],decls:13,vars:3,consts:[[1,"uk-comment","uk-comment-primary"],[1,"uk-comment-header"],["uk-grid","",1,"uk-grid-medium","uk-flex-middle"],[1,"uk-width-auto"],["width","200","height","200","alt","",1,"uk-comment-avatar",3,"src"],[1,"uk-width-expand"],[1,"uk-comment-title","uk-margin-remove"],["href","#",1,"uk-link-reset"],[1,"uk-comment-body"]],template:function(t,r){1&t&&(f._UZ(0,"br"),f.TgZ(1,"article",0)(2,"header",1)(3,"div",2)(4,"div",3),f._UZ(5,"img",4),f.qZA(),f.TgZ(6,"div",5)(7,"h4",6)(8,"a",7),f._uU(9),f.qZA()()()()(),f.TgZ(10,"div",8)(11,"p"),f._uU(12),f.qZA()()()),2&t&&(f.xp6(5),f.Q6J("src",r.dataProfile.image,f.LSH),f.xp6(4),f.hij(" ",r.dataProfile.flName,""),f.xp6(3),f.Oqu(r.dataProfile.bio))},styles:[""]}),n})();function CO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"Full name name is required"),f.qZA())}function TO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"Bio name is required"),f.qZA())}function AO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"Email is required"),f.qZA())}function SO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"E-mail format is incorrect"),f.qZA())}function xO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"Password is required"),f.qZA())}function MO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"Password should compose > 8 caracters"),f.qZA())}function RO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"ConfirmPassword is required"),f.qZA())}function NO(n,e){1&n&&(f.TgZ(0,"p",21),f._uU(1,"not equal"),f.qZA())}const OO=[{path:"",component:SI},{path:"login",component:mO},{path:"register",component:(()=>{class n{constructor(t,r,o){this.sa=t,this.fs=r,this.route=o,this.Uid=""}ngOnInit(){}register(t){let r=t.value;this.sa.signUp(r.email,r.password).then(o=>{var u,d,m,w;this.Uid=null!=(null===(u=o.user)||void 0===u?void 0:u.uid)?null===(d=o.user)||void 0===d?void 0:d.uid:"",this.fs.collection("users").doc(null===(m=o.user)||void 0===m?void 0:m.uid).set({flName:r.flName,email:r.email,bio:r.bio,uid:null===(w=o.user)||void 0===w?void 0:w.uid}).then(()=>{localStorage.setItem("userId",this.Uid),this.route.navigate(["/"])})}).catch(()=>{console.log("error !")})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Np),f.Y36(S0),f.Y36(Rr))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:39,vars:9,consts:[[1,"uk-position-center","uk-overlay","uk-overlay-default"],[3,"ngSubmit"],["f","ngForm"],[1,"uk-margin"],[1,"uk-inline"],["uk-icon","icon: happy",1,"uk-form-icon"],["type","text","name","flName","placeholder","Full name","ngModel","","required","",1,"uk-input"],["flName","ngModel"],["class","text-danger",4,"ngIf"],["cols","22","rows","20","placeholder","Bio","name","bio","ngModel","","required","",1,"uk-input"],["bio","ngModel"],["uk-icon","icon: mail",1,"uk-form-icon"],["type","email","name","email","ngModel","","placeholder","Email","required","","email","",1,"uk-input"],["email","ngModel"],["uk-icon","icon: lock",1,"uk-form-icon","uk-form-icon-flip"],["type","password","name","password","ngModel","","placeholder","Password","required","","minlength","8",1,"uk-input"],["password","ngModel"],["type","password","name","ConfirmPassword","ngModel","","placeholder","Confirm password","required","",1,"uk-input"],["ConfirmPassword","ngModel"],["type","submit",1,"btn","btn-outline-success",2,"width","100%","margin-bottom","5px",3,"disabled"],[1,"btn","btn-outline-primary",2,"width","100%"],[1,"text-danger"]],template:function(t,r){if(1&t){const o=f.EpF();f.TgZ(0,"div",0)(1,"form",1,2),f.NdJ("ngSubmit",function(){f.CHM(o);const d=f.MAs(2);return r.register(d)}),f.TgZ(3,"div",3)(4,"div",4),f._UZ(5,"span",5)(6,"input",6,7),f.qZA(),f.YNc(8,CO,2,0,"p",8),f.qZA(),f.TgZ(9,"div",3)(10,"div",4),f._UZ(11,"textarea",9,10),f.qZA(),f.YNc(13,TO,2,0,"p",8),f.qZA(),f.TgZ(14,"div",3)(15,"div",4),f._UZ(16,"span",11)(17,"input",12,13),f.qZA(),f.YNc(19,AO,2,0,"p",8),f.YNc(20,SO,2,0,"p",8),f.qZA(),f.TgZ(21,"div",3)(22,"div",4),f._UZ(23,"span",14)(24,"input",15,16),f.YNc(26,xO,2,0,"p",8),f.YNc(27,MO,2,0,"p",8),f.qZA()(),f.TgZ(28,"div",3)(29,"div",4),f._UZ(30,"span",14)(31,"input",17,18),f.YNc(33,RO,2,0,"p",8),f.YNc(34,NO,2,0,"p",8),f.qZA()(),f.TgZ(35,"button",19),f._uU(36,"Login"),f.qZA(),f.TgZ(37,"button",20),f._uU(38,"forgot password"),f.qZA()()()}if(2&t){const o=f.MAs(2),u=f.MAs(7),d=f.MAs(12),m=f.MAs(18),w=f.MAs(25),D=f.MAs(32);f.xp6(8),f.Q6J("ngIf",(null==u.errors?null:u.errors.required)&&u.touched),f.xp6(5),f.Q6J("ngIf",(null==d.errors?null:d.errors.required)&&d.touched),f.xp6(6),f.Q6J("ngIf",(null==m.errors?null:m.errors.required)&&m.touched),f.xp6(1),f.Q6J("ngIf",(null==m.errors?null:m.errors.email)&&m.touched),f.xp6(6),f.Q6J("ngIf",(null==w.errors?null:w.errors.required)&&w.touched),f.xp6(1),f.Q6J("ngIf",(null==w.errors?null:w.errors.minlength)&&w.touched),f.xp6(6),f.Q6J("ngIf",(null==D.errors?null:D.errors.required)&&D.touched),f.xp6(1),f.Q6J("ngIf",w.value!=D.value&&D.touched),f.xp6(1),f.Q6J("disabled",!o.valid)}},directives:[k0,M0,kp,Pp,x0,hy,F0,or,uA,yI],styles:[""]}),n})()},{path:"profil",component:DO},{path:"products",component:IO},{path:"myproducts",component:wO}];let PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[tf.forRoot(OO)],tf]}),n})();function kO(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",12),f._uU(2,"Profil"),f.qZA()())}function FO(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",13),f._uU(2,"Products"),f.qZA()())}function LO(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",14),f._uU(2,"My products"),f.qZA()())}function VO(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",15),f._uU(2,"Register"),f.qZA()())}function UO(n,e){1&n&&(f.TgZ(0,"li",7)(1,"a",16),f._uU(2,"Login"),f.qZA()())}function BO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",7)(1,"a",17),f.NdJ("click",function(){return f.CHM(t),f.oxw().logout()}),f._uU(2,"Logout"),f.qZA()()}}let jO=(()=>{class n{constructor(t,r,o){this.af=t,this.route=r,this.as=o,this.as.user.subscribe(u=>{this.isSigned=!!u})}ngOnInit(){}logout(){this.af.signOut().then(()=>{console.log("logout done !"),localStorage.removeItem("userId"),this.route.navigate(["/login"])}).catch(()=>{console.log("Can't logout !")})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vd),f.Y36(Rr),f.Y36(Np))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:18,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","/",1,"navbar-brand",2,"background-color","wheat","border-radius","30%"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active"],["class","nav-item",4,"ngIf"],[1,"navbar-nav"],["class","nav-item ",4,"ngIf"],["aria-current","page","routerLink","profil",1,"nav-link","active"],["aria-current","page","routerLink","products",1,"nav-link","active"],["aria-current","page","routerLink","myproducts",1,"nav-link","active"],["aria-current","page","routerLink","register",1,"nav-link","active"],["aria-current","page","routerLink","login",1,"nav-link","active"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"MyStore"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Home"),f.qZA()(),f.YNc(11,kO,3,0,"li",9),f.YNc(12,FO,3,0,"li",9),f.YNc(13,LO,3,0,"li",9),f.qZA(),f.TgZ(14,"ul",10),f.YNc(15,VO,3,0,"li",9),f.YNc(16,UO,3,0,"li",9),f.YNc(17,BO,3,0,"li",11),f.qZA()()()()),2&t&&(f.xp6(11),f.Q6J("ngIf",r.isSigned),f.xp6(1),f.Q6J("ngIf",r.isSigned),f.xp6(1),f.Q6J("ngIf",r.isSigned),f.xp6(2),f.Q6J("ngIf",!r.isSigned),f.xp6(1),f.Q6J("ngIf",!r.isSigned),f.xp6(1),f.Q6J("ngIf",r.isSigned))},directives:[dg,or],styles:[""]}),n})(),$O=(()=>{class n{constructor(){this.title="myStore"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"app-navbar")(2,"router-outlet"),f.qZA())},directives:[jO,Bl],styles:[""]}),n})();const RM="firebasestorage.googleapis.com",NM="storageBucket";class fr extends vt.ZR{constructor(e,t){super(lA(e),`Firebase Storage: ${t} (${lA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}_codeEquals(e){return lA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lA(n){return"storage/"+n}function cA(){return new fr("unknown","An unknown error occurred, please check the error payload for server response.")}function OM(){return new fr("canceled","User canceled the upload/download.")}function PM(){return new fr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function fy(n){return new fr("invalid-argument",n)}function kM(){return new fr("app-deleted","The Firebase app was deleted.")}function FM(n){return new fr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function L0(n,e){return new fr("invalid-format","String does not match format '"+n+"': "+e)}function V0(n){throw new fr("internal-error","Internal error: "+n)}class Qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qi.makeFromUrl(e,t)}catch(o){return new Qi(e,"")}if(""===r.path)return r;throw function XO(n){return new fr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function D(st){st.path_=decodeURIComponent(st.path)}const R=t.replace(/[.]/g,"\\."),mt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===RM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let st=0;st<mt.length;st++){const Ot=mt[st],Wt=Ot.regex.exec(e);if(Wt){let Po=Wt[Ot.indices.path];Po||(Po=""),r=new Qi(Wt[Ot.indices.bucket],Po),Ot.postModify(r);break}}if(null==r)throw function JO(n){return new fr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class rP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _I(n){return"string"==typeof n||n instanceof String}function LM(n){return dA()&&n instanceof Blob}function dA(){return"undefined"!=typeof Blob}function hA(n,e,t,r){if(r<e)throw fy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Dc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function VM(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var vh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(vh||(vh={})),vh))();class lP{constructor(e,t,r,o,u,d,m,w,D,x,R){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=w,this.timeout_=D,this.progressCallback_=x,this.connectionFactory_=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,q)=>{this.resolve_=V,this.reject_=q,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function oP(n){return void 0!==n}(w)?u():u(w)}catch(w){d(w)}else if(null!==m){const w=cA();w.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,w):w)}else d(o.canceled?this.appDelete_?kM():OM():function QO(){return new fr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new vI(!1,null,!0)):this.backoffId_=function iP(n,e,t){let r=1,o=null,u=null,d=!1,m=0;function w(){return 2===m}let D=!1;function x(...Ue){D||(D=!0,e.apply(null,Ue))}function R(Ue){o=setTimeout(()=>{o=null,n(q,w())},Ue)}function V(){u&&clearTimeout(u)}function q(Ue,...Ct){if(D)return void V();if(Ue)return V(),void x.call(null,Ue,...Ct);if(w()||d)return V(),void x.call(null,Ue,...Ct);let mt;r<64&&(r*=2),1===m?(m=2,mt=0):mt=1e3*(r+Math.random()),R(mt)}let ee=!1;function Me(Ue){ee||(ee=!0,V(),!D&&(null!==o?(Ue||(m=2),clearTimeout(o),R(0)):Ue||(m=1)))}return R(0),u=setTimeout(()=>{d=!0,Me(!0)},t),Me}((r,o)=>{if(o)return void r(!1,new vI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===vh.NO_ERROR,w=u.getStatus();if(!m||this.isRetryStatusCode_(w)){const x=u.getErrorCode()===vh.ABORT;return void r(!1,new vI(!1,null,x))}const D=-1!==this.successCodes_.indexOf(w);r(!0,new vI(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class vI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mP(...n){const e=function gP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(dA())return new Blob(n);throw new fr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Oo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fA{constructor(e,t){this.data=e,this.contentType=t||null}}function pA(n,e){switch(n){case Oo.RAW:return new fA(UM(e));case Oo.BASE64:case Oo.BASE64URL:return new fA(BM(n,e));case Oo.DATA_URL:return new fA(function wP(n){const e=new jM(n);return e.base64?BM(Oo.BASE64,e.rest):function vP(n){let e;try{e=decodeURIComponent(n)}catch(t){throw L0(Oo.DATA_URL,"Malformed data URL.")}return UM(e)}(e.rest)}(e),function EP(n){return new jM(n).contentType}(e))}throw cA()}function UM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function BM(n,e){switch(n){case Oo.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw L0(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Oo.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw L0(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function _P(n){return atob(n)}(e)}catch(o){throw L0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class jM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw L0(Oo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function bP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class tl{constructor(e,t){let r=0,o="";LM(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(LM(this.data_)){const o=function yP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new tl(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new tl(r,!0)}}static getBlob(...e){if(dA()){const t=e.map(r=>r instanceof tl?r.data_:r);return new tl(mP.apply(null,t))}{const t=e.map(d=>_I(d)?pA(Oo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[u++]=d[m]}),new tl(o,!0)}}uploadData(){return this.data_}}function gA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function uP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function $M(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function CP(n,e){return e}class Es{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||CP}}let wI=null;function U0(){if(wI)return wI;const n=[];n.push(new Es("bucket")),n.push(new Es("generation")),n.push(new Es("metageneration")),n.push(new Es("name","fullPath",!0));const t=new Es("name");t.xform=function e(u,d){return function TP(n){return!_I(n)||n.length<2?n:$M(n)}(d)},n.push(t);const o=new Es("size");return o.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(o),n.push(new Es("timeCreated")),n.push(new Es("updated")),n.push(new Es("md5Hash",null,!0)),n.push(new Es("cacheControl",null,!0)),n.push(new Es("contentDisposition",null,!0)),n.push(new Es("contentEncoding",null,!0)),n.push(new Es("contentLanguage",null,!0)),n.push(new Es("contentType",null,!0)),n.push(new Es("metadata","customMetadata",!0)),wI=n,wI}function HM(n,e,t){const r=gA(e);return null===r?null:function SP(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function AP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Qi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function mA(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const GM="prefixes";class nl{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rl(n){if(!n)throw cA()}function EI(n,e){return function t(r,o){const u=HM(n,o,e);return rl(null!==u),u}}function py(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function KO(){return new fr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ZO(){return new fr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function WO(n){return new fr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function YO(n){return new fr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function B0(n){const e=py(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function zO(n){return new fr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function zM(n,e,t){const o=Dc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new nl(o,"GET",EI(n,t),d);return m.errorHandler=B0(e),m}function PP(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=Dc(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,x=new nl(m,"GET",function NP(n,e){return function t(r,o){const u=function RP(n,e,t){const r=gA(t);return null===r?null:function MP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[GM])for(const o of t[GM]){const u=o.replace(/\/$/,""),d=n._makeStorageReference(new Qi(e,u));r.prefixes.push(d)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Qi(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return rl(null!==u),u}}(n,e.bucket),D);return x.urlParams=u,x.errorHandler=py(e),x}function ZM(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function VP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class bI{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function yA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){rl(!1)}return rl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const $P={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _A(n){switch(n){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class HP{constructor(e,t,r){if(function aP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function gy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class qP extends class GP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw V0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw V0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw V0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw V0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw V0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function eu(){return new qP}class JM{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=U0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function UP(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d=ZM(e,r,o),m={name:d.fullPath},w=Dc(u,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},R=mA(d,t),ee=new nl(w,"POST",function q(Me){let Ue;yA(Me);try{Ue=Me.getResponseHeader("X-Goog-Upload-URL")}catch(Ct){rl(!1)}return rl(_I(Ue)),Ue},n.maxUploadRetryTime);return ee.urlParams=m,ee.headers=x,ee.body=R,ee.errorHandler=py(e),ee}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,eu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function BP(n,e,t,r){const w=new nl(t,"POST",function u(D){const x=yA(D,["active","final"]);let R=null;try{R=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch(q){rl(!1)}R||rl(!1);const V=Number(R);return rl(!isNaN(V)),new bI(V,r.size(),"final"===x)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=py(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,eu,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new bI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let d;try{d=function jP(n,e,t,r,o,u,d,m){const w=new bI(0,0);if(d?(w.current=d.current,w.total=d.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function tP(){return new fr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const D=w.total-w.current;let x=D;o>0&&(x=Math.min(x,o));const R=w.current,ee={"X-Goog-Upload-Command":x===D?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},Me=r.slice(R,R+x);if(null===Me)throw PM();const mt=new nl(t,"POST",function Ue(st,Ot){const Wt=yA(st,["active","final"]),Lr=w.current+x,Po=r.size();let EA;return EA="final"===Wt?EI(e,u)(st,Ot):null,new bI(Lr,Po,"final"===Wt,EA)},e.maxUploadRetryTime);return mt.headers=ee,mt.body=Me.uploadData(),mt.progressCallback=m||null,mt.errorHandler=py(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(d,eu,o,u);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=zM(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,eu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function KM(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let mt="";for(let st=0;st<2;st++)mt+=Math.random().toString().slice(2);return mt}();d["Content-Type"]="multipart/related; boundary="+w;const D=ZM(e,r,o),x=mA(D,t),q=tl.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+w+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===q)throw PM();const ee={name:D.fullPath},Me=Dc(u,n.host,n._protocol),Ct=n.maxUploadRetryTime,Tt=new nl(Me,"POST",EI(n,t),Ct);return Tt.urlParams=ee,Tt.headers=d,Tt.body=q.uploadData(),Tt.errorHandler=py(e),Tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,eu,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=OM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_A(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new HP(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_A(this._state)){case bs.SUCCESS:gy(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:gy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_A(this._state)){case bs.RUNNING:case bs.PAUSED:e.next&&gy(e.next.bind(e,this.snapshot))();break;case bs.SUCCESS:e.complete&&gy(e.complete.bind(e))();break;default:e.error&&gy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof Qi?t:Qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new Qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $M(this._location.path)}get storage(){return this._service}get parent(){const e=function IP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Qi(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FM(e)}}function eR(n,e,t){return vA.apply(this,arguments)}function vA(){return vA=(0,pe.Z)(function*(n,e,t){const o=yield tR(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield eR(n,e,o.nextPageToken))}),vA.apply(this,arguments)}function tR(n,e){null!=e&&"number"==typeof e.maxResults&&hA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=PP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,eu)}function rk(n){n._throwIfRoot("getDownloadURL");const e=function kP(n,e,t){const o=Dc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new nl(o,"GET",function OP(n,e){return function t(r,o){const u=HM(n,o,e);return rl(null!==u),function xP(n,e,t,r){const o=gA(e);if(null===o||!_I(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(D=>{const R=n.fullPath;return Dc("/b/"+d(n.bucket)+"/o/"+d(R),t,r)+VM({alt:"media",token:D})})[0]}(u,o,n.host,n._protocol)}}(n,t),d);return m.errorHandler=B0(e),m}(n.storage,n._location,U0());return n.storage.makeRequestWithTokens(e,eu).then(t=>{if(null===t)throw function nP(){return new fr("no-download-url","The given file does not have any download URLs.")}();return t})}function nR(n,e){const t=function DP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Qi(n._location.bucket,t);return new Lp(n.storage,r)}function rR(n,e){if(n instanceof wA){const t=n;if(null==t._bucket)throw function eP(){return new fr("no-default-bucket","No default bucket found. Did you set the '"+NM+"' property when initializing the app?")}();const r=new Lp(t,t._bucket);return null!=e?rR(r,e):r}return void 0!==e?nR(n,e):n}function ak(n,e){if(e&&function sk(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof wA)return function ok(n,e){return new Lp(n,e)}(n,e);throw fy("To use ref(service, url), the first argument must be a Storage instance.")}return rR(n,e)}function iR(n,e){const t=null==e?void 0:e[NM];return null==t?null:Qi.makeFromBucketSpec(t,n)}class wA{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=RM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Qi.makeFromBucketSpec(o,this._host):iR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Qi.makeFromBucketSpec(this._url,e):iR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new rP(kM());{const u=function pP(n,e,t,r,o,u){const d=VM(n.urlParams),m=n.url+d,w=Object.assign({},n.headers);return function hP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function cP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function dP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,u),function fP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new lP(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const sR="@firebase/storage";function uR(n,e){return ak(n=(0,vt.m9)(n),e)}function _k(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new wA(t,r,o,e,Zs.SDK_VERSION)}!function vk(){(0,Zs._registerComponent)(new pd.wA("storage",_k,"PUBLIC").setMultipleInstances(!0)),(0,Zs.registerVersion)(sR,"0.9.5",""),(0,Zs.registerVersion)(sR,"0.9.5","esm2017")}();class II{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class lR{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new II(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new II(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?d=>t(new II(d,this,this._ref)):{next:t.next?d=>t.next(new II(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class cR{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Cc(e,this._service))}get items(){return this._delegate.items.map(e=>new Cc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Cc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function mk(n,e){return nR(n,e)}(this._delegate,e);return new Cc(t,this.storage)}get root(){return new Cc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Cc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new lR(function lk(n,e,t){return function JP(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new JM(n,new tl(e),t)}(n=(0,vt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Oo.RAW,r){this._throwIfRoot("putString");const o=pA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new lR(new JM(this._delegate,new tl(o.data,!0),u),this)}listAll(){return function fk(n){return function ek(n){const e={prefixes:[],items:[]};return eR(n,e).then(()=>e)}(n=(0,vt.m9)(n))}(this._delegate).then(e=>new cR(e,this.storage))}list(e){return function hk(n,e){return tR(n=(0,vt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new cR(t,this.storage))}getMetadata(){return function ck(n){return function tk(n){n._throwIfRoot("getMetadata");const e=zM(n.storage,n._location,U0());return n.storage.makeRequestWithTokens(e,eu)}(n=(0,vt.m9)(n))}(this._delegate)}updateMetadata(e){return function dk(n,e){return function nk(n,e){n._throwIfRoot("updateMetadata");const t=function FP(n,e,t,r){const u=Dc(e.fullServerUrl(),n.host,n._protocol),m=mA(t,r),D=n.maxOperationRetryTime,x=new nl(u,"PATCH",EI(n,r),D);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=m,x.errorHandler=B0(e),x}(n.storage,n._location,e,U0());return n.storage.makeRequestWithTokens(t,eu)}(n=(0,vt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function pk(n){return rk(n=(0,vt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function gk(n){return function ik(n){n._throwIfRoot("deleteObject");const e=function LP(n,e){const r=Dc(e.fullServerUrl(),n.host,n._protocol),m=new nl(r,"DELETE",function d(w,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=B0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,eu)}(n=(0,vt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FM(e)}}class dR{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(hR(e))throw fy("ref() expected a child path but got a URL, use refFromURL instead.");return new Cc(uR(this._delegate,e),this)}refFromURL(e){if(!hR(e))throw fy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qi.makeFromUrl(e,this._delegate.host)}catch(t){throw fy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cc(uR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function yk(n,e,t,r={}){!function uk(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,vt.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function hR(n){return/^[A-Za-z]+:\/\//.test(n)}function Ik(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new dR(t,r)}function fR(n){const e=function Ck(n){return new Sr.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function HO(n,e=ia.z){return(0,wr.e)((t,r)=>{let o=null,u=null,d=null;const m=()=>{if(o){o.unsubscribe(),o=null;const D=u;u=null,r.next(D)}};function w(){const D=d+n,x=e.now();if(x<D)return o=this.schedule(void 0,D-x),void r.add(o);m()}t.subscribe((0,Nn.x)(r,D=>{u=D,d=e.now(),o||(o=e.schedule(w,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ft.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function DI(n){return{getDownloadURL:()=>ct(void 0).pipe(Cn.fc,mn(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>ct(void 0).pipe(Cn.fc,mn(()=>n.getMetadata()),Cn.iC),delete:()=>(0,pn.D)(n.delete()),child:e=>DI(n.child(e)),updateMetadata:e=>(0,pn.D)(n.updateMetadata(e)),put:(e,t)=>fR(n.put(e,t)),putString:(e,t,r)=>fR(n.putString(e,t,r)),list:e=>(0,pn.D)(n.list(e)),listAll:()=>(0,pn.D)(n.listAll())}}!function Dk(n){const e={TaskState:bs,TaskEvent:$P,StringFormat:Oo,Storage:dR,Reference:Cc};n.INTERNAL.registerComponent(new pd.wA("storage-compat",Ik,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(Og.Z);const Tk=new f.OlP("angularfire2.storageBucket"),Ak=new f.OlP("angularfire2.storage.maxUploadRetryTime"),Sk=new f.OlP("angularfire2.storage.maxOperationRetryTime"),xk=new f.OlP("angularfire2.storage.use-emulator");let Mk=(()=>{class n{constructor(t,r,o,u,d,m,w,D,x,R){const V=(0,Ai.on)(t,d,r);this.storage=(0,Ai.cc)(`${V.name}.storage.${o}`,"AngularFireStorage",V.name,()=>{const q=d.runOutsideAngular(()=>V.storage(o||void 0)),ee=x;return ee&&q.useEmulator(...ee),w&&q.setMaxUploadRetryTime(w),D&&q.setMaxOperationRetryTime(D),q},[w,D])}ref(t){return DI(this.storage.ref(t))}refFromURL(t){return DI(this.storage.refFromURL(t))}upload(t,r,o){return DI(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ai.Dh),f.LFG(Ai.xv,8),f.LFG(Tk,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(Ak,8),f.LFG(Sk,8),f.LFG(xk,8),f.LFG(_d,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Nk=(()=>{class n{constructor(){Rg.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Mk],imports:[Rk]}),n})();const pR_firebase={apiKey:"AIzaSyDM6g1X-jtmHcCJe1AcjfVJQEa_oJV386E",authDomain:"mystore-fa63b.firebaseapp.com",projectId:"mystore-fa63b",storageBucket:"mystore-fa63b.appspot.com",messagingSenderId:"301514080594",appId:"1:301514080594:web:b26904abd3fdb90afd3a8b",measurementId:"G-T593NQCZ01"};let Ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[$O]}),n.\u0275inj=f.cJS({providers:[],imports:[[Ca,PO,Ai.hO.initializeApp(pR_firebase),Aw,Nk,pN,hO]]}),n})();(0,f.G48)(),pl().bootstrapModule(Ok).catch(n=>console.error(n))},5867:(rt,Ce,k)=>{k.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(9681);(0,f.registerVersion)("firebase","9.6.11","app")},127:(rt,Ce,k)=>{k.d(Ce,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.6.11","app-compat")},820:(rt,Ce,k)=>{k.r(Ce);var f=k(5861),K=k(3942),O=k(2090),ue=k(9681),J=k(655),ge=k(1877),oe=k(4859);const Ne=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new ge.Yd("@firebase/auth");function ze(y,...h){Xe.logLevel<=ge.in.ERROR&&Xe.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function Ie(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function ve(y,h,g){const v=Object.assign(Object.assign({},Fe()),{[h]:g});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function He(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ie(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return fe.create(y,...h)}function te(y,h,...g){if(!y)throw je(h,...g)}function z(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ze(h),new Error(h)}function ne(y,h){y||z(h)}const me=new Map;function ie(y){ne(y instanceof Function,"Expected a class definition");let h=me.get(y);return h?(ne(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,me.set(y,h),h)}function wt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Kt(){return"http:"===Sn()||"https:"===Sn()}function Sn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,g){this.shortDelay=h,this.longDelay=g,ne(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,h){ne(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class gi{static initialize(h,g,v){this.fetchImpl=h,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ji=new sn(3e4,6e4);function Yt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function $t(y,h,g,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(y,h,g,v,T={}){return Qr(y,T,(0,f.Z)(function*(){let N={},G={};v&&("GET"===h?G=v:N={body:JSON.stringify(v)});const se=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),gi.fetch()(Ar(y,y.config.apiHost,g,se),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Qr(y,h,g){return Is.apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},en),h);try{const T=new Xi(y),N=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw es(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const se=N.ok?G.errorMessage:G.error.message,[Ve,Je]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw es(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ve)throw es(y,"email-already-in-use",G);const pt=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw ve(y,pt,Je);Ie(y,pt)}}catch(T){if(T instanceof O.ZR)throw T;Ie(y,"network-request-failed")}})).apply(this,arguments)}function Tr(y,h,g,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y,h,g,v,T={}){const N=yield $t(y,h,g,v,T);return"mfaPendingCredential"in N&&Ie(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ar(y,h,g,v){const T=`${h}${g}?${v}`;return y.config.emulator?on(y.config,T):`${y.config.apiScheme}://${T}`}class Xi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Ji.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function es(y,h,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=_e(y,h,v);return T.customData._tokenResponse=g,T}function Vr(){return(Vr=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Wn(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Jr(y,h){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ma(){return(ma=(0,f.Z)(function*(y,h=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(h),T=tt(v);te(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,G=null==N?void 0:N.sign_in_provider;return{claims:T,token:v,authTime:fn(Ht(T.auth_time)),issuedAtTime:fn(Ht(T.iat)),expirationTime:fn(Ht(T.exp)),signInProvider:G||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ht(y){return 1e3*Number(y)}function tt(y){const[h,g,v]=y.split(".");if(void 0===h||void 0===g||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(ze("Failed to decode base64 JWT payload"),null)}catch(T){return ze("Caught error parsing JWT payload as JSON",T),null}}function rr(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&jt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function jt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ro{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class pr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ir(y){return at.apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(y){var h;const g=y.auth,v=yield y.getIdToken(),T=yield rr(y,Jr(g,{idToken:v}));te(null==T?void 0:T.users.length,g,"internal-error");const N=T.users[0];y._notifyReloadListener(N);const G=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?De(N.providerUserInfo):[],se=We(y.providerData,G),pt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==se?void 0:se.length)),nt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:se,metadata:new pr(N.createdAt,N.lastLoginAt),isAnonymous:pt};Object.assign(y,nt)})).apply(this,arguments)}function Ut(){return(Ut=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield ir(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function We(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function De(y){return y.map(h=>{var{providerId:g}=h,v=(0,J._T)(h,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,f.Z)(function*(y,h){const g=yield Qr(y,{},(0,f.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=y.config,G=Ar(y,T,"/v1/token",`key=${N}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",gi.fetch()(G,{method:"POST",headers:se,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function yt(y){const h=tt(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var v=this;return(0,f.Z)(function*(){return te(!v.accessToken||v.refreshToken,h,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:G}=yield function Ye(y,h){return ut.apply(this,arguments)}(h,g);v.updateTokensAndExpiration(T,N,Number(G))})()}updateTokensAndExpiration(h,g,v){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,g){const{refreshToken:v,accessToken:T,expirationTime:N}=g,G=new Bt;return v&&(te("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),T&&(te("string"==typeof T,"internal-error",{appName:h}),G.accessToken=T),N&&(te("number"==typeof N,"internal-error",{appName:h}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Bt,this.toJSON())}_performRefresh(){return z("not implemented")}}function Pt(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class B{constructor(h){var{uid:g,auth:v,stsTokenManager:T}=h,N=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ro(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new pr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const v=yield rr(g,g.stsTokenManager.getToken(g.auth,h));return te(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(h){return function Ds(y){return ma.apply(this,arguments)}(this,h)}reload(){return function gr(y){return Ut.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new B(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield ir(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield rr(h,function ot(y,h){return Vr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var v,T,N,G,se,Ve,Je,pt;const nt=null!==(v=g.displayName)&&void 0!==v?v:void 0,Dn=null!==(T=g.email)&&void 0!==T?T:void 0,Bi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,zl=null!==(G=g.photoURL)&&void 0!==G?G:void 0,Nu=null!==(se=g.tenantId)&&void 0!==se?se:void 0,Ou=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,Jh=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,qy=null!==(pt=g.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:na,emailVerified:ld,isAnonymous:cd,providerData:Xh,stsTokenManager:dd}=g;te(na&&dd,h,"internal-error");const Rr=Bt.fromJSON(this.name,dd);te("string"==typeof na,h,"internal-error"),Pt(nt,h.name),Pt(Dn,h.name),te("boolean"==typeof ld,h,"internal-error"),te("boolean"==typeof cd,h,"internal-error"),Pt(Bi,h.name),Pt(zl,h.name),Pt(Nu,h.name),Pt(Ou,h.name),Pt(Jh,h.name),Pt(qy,h.name);const ef=new B({uid:na,auth:h,email:Dn,emailVerified:ld,displayName:nt,isAnonymous:cd,photoURL:zl,phoneNumber:Bi,tenantId:Nu,stsTokenManager:Rr,createdAt:Jh,lastLoginAt:qy});return Xh&&Array.isArray(Xh)&&(ef.providerData=Xh.map(cg=>Object.assign({},cg))),Ou&&(ef._redirectEventId=Ou),ef}static _fromIdTokenResponse(h,g,v=!1){return(0,f.Z)(function*(){const T=new Bt;T.updateFromServerResponse(g);const N=new B({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield ir(N),N})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,f.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function ce(y,h,g){return`firebase:${y}:${h}:${g}`}class Y{constructor(h,g,v){this.persistence=h,this.auth=g,this.userKey=v;const{config:T,name:N}=this.auth;this.fullUserKey=ce(this.userKey,T.apiKey,N),this.fullPersistenceKey=ce("persistence",T.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?B._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Y(ie(H),h,v);const T=(yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let N=T[0]||ie(H);const G=ce(v,h.config.apiKey,h.name);let se=null;for(const Je of g)try{const pt=yield Je._get(G);if(pt){const nt=B._fromJSON(h,pt);Je!==N&&(se=nt),N=Je;break}}catch(pt){}const Ve=T.filter(Je=>Je._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],se&&(yield N._set(G,se.toJSON())),yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(pt){if(pt!==N)try{yield pt._remove(G)}catch(nt){}});return function(pt){return Je.apply(this,arguments)}}())),new Y(N,h,v)):new Y(N,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Gt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ft(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(St(h))return"Blackberry";if(ln(h))return"Webos";if(zt(h))return"Safari";if((h.includes("chrome/")||mr(h))&&!h.includes("edge/"))return"Chrome";if(vn(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,O.z$)()){return/firefox\//i.test(y)}function zt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function mr(y=(0,O.z$)()){return/crios\//i.test(y)}function Gt(y=(0,O.z$)()){return/iemobile/i.test(y)}function vn(y=(0,O.z$)()){return/android/i.test(y)}function St(y=(0,O.z$)()){return/blackberry/i.test(y)}function ln(y=(0,O.z$)()){return/webos/i.test(y)}function Kn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ts(y=(0,O.z$)()){return Kn(y)||vn(y)||ln(y)||St(y)||/windows phone/i.test(y)||Gt(y)}function _a(y,h=[]){let g;switch(y){case"Browser":g=Le((0,O.z$)());break;case"Worker":g=`${Le((0,O.z$)())}-${y}`;break;default:g=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${v}`}class Xr{constructor(h,g,v){this.app=h,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mt(this),this.idTokenSubscription=new Mt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,g){var v=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,N;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(N=v.currentUser)||void 0===N?void 0:N.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var v;let T=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const N=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==T?void 0:T._redirectEventId,se=yield g.tryRedirectSignIn(h);(!N||N===G)&&(null==se?void 0:se.user)&&(T=se.user)}return T?T._redirectEventId?(te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield ir(h)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&te(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return h&&te(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,v){return this.registerStateListener(this.authStateSubscription,h,g,v)}onIdTokenChanged(h,g,v){return this.registerStateListener(this.idTokenSubscription,h,g,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=h&&ie(h)||g._popupRedirectResolver;te(v,g,"argument-error"),g.redirectPersistenceManager=yield Y.create(g,[ie(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,v,T){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return te(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,v,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_a(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Oe(y){return(0,O.m9)(y)}class Mt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function On(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class tn{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return z("not implemented")}_getIdTokenResponse(h){return z("not implemented")}_linkToIdToken(h,g){return z("not implemented")}_getReauthenticationResolver(h){return z("not implemented")}}function xn(y,h){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:resetPassword",Yt(y,h))})).apply(this,arguments)}function At(y,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function so(y,h){return va.apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:update",Yt(y,h))})).apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPassword",Yt(y,h))})).apply(this,arguments)}function ns(y,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:sendOobCode",Yt(y,h))})).apply(this,arguments)}function or(y,h){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(y,h){return ns(y,h)})).apply(this,arguments)}function nu(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(y,h){return ns(y,h)})).apply(this,arguments)}function mi(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return ns(y,h)})).apply(this,arguments)}function Tc(y,h){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,f.Z)(function*(y,h){return ns(y,h)})).apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,h))})).apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,h))})).apply(this,arguments)}class su extends tn{constructor(h,g,v,T=null){super("password",v),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new su(h,g,"password")}static _fromEmailAndCode(h,g,v=null){return new su(h,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function As(y,h){return Yn.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function iu(y,h){return Ur.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return At(h,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function wh(y,h){return Ac.apply(this,arguments)}(h,{idToken:g,email:v._email,oobCode:v._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Pn(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithIdp",Yt(y,h))})).apply(this,arguments)}class is extends tn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new is(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ie("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=g,N=(0,J._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const G=new is(v,T);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(h){return Pn(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Pn(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Pn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function Up(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:sendVerificationCode",Yt(y,h))})).apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,h))})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(y,h){const g=yield Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,h));if(g.temporaryProof)throw es(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const jp={USER_NOT_FOUND:"user-not-found"};function Rc(){return(Rc=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),jp)})).apply(this,arguments)}class Fo extends tn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Fo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Fo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function il(y,h){return xs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Bp(y,h){return Mc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function $p(y,h){return Rc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:N}=h;return v||g||T||N?new Fo({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:N}):null}}class oo{constructor(h){var g,v,T,N,G,se;const Ve=(0,O.zd)((0,O.pd)(h)),Je=null!==(g=Ve.apiKey)&&void 0!==g?g:null,pt=null!==(v=Ve.oobCode)&&void 0!==v?v:null,nt=function my(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);te(Je&&pt&&nt,"argument-error"),this.apiKey=Je,this.operation=nt,this.code=pt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Ve.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(se=Ve.tenantId)&&void 0!==se?se:null}static parseLink(h){const g=function ou(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||h||y}(h);try{return new oo(g)}catch(v){return null}}}let sl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return su._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=oo.parseLink(v);return te(T,"argument-error"),su._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ms{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Br extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Lo extends Br{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return te("providerId"in g&&"signInMethod"in g,"argument-error"),is._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Lo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Lo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:N,nonce:G,providerId:se}=h;if(!v&&!T&&!g&&!N||!se)return null;try{return new Lo(se)._credential({idToken:g,accessToken:v,nonce:G,pendingToken:N})}catch(Ve){return null}}}let ao=(()=>{class y extends Br{constructor(){super("facebook.com")}static credential(g){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),wa=(()=>{class y extends Br{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Nc=(()=>{class y extends Br{constructor(){super("github.com")}static credential(g){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Vo extends tn{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Pn(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Pn(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Pn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:N}=g;return v&&T&&N&&v===T?new Vo(v,N):null}static _create(h,g){return new Vo(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends Ms{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Vo.fromJSON(h);return te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:v}=h;if(!g||!v)return null;try{return Vo._create(v,g)}catch(T){return null}}}let au=(()=>{class y extends Br{constructor(){super("twitter.com")}static credential(g,v){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function uu(y,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signUp",Yt(y,h))})).apply(this,arguments)}class ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,v,T=!1){return(0,f.Z)(function*(){const N=yield B._fromIdTokenResponse(h,v,T),G=bh(v);return new ar({user:N,providerId:G,_tokenResponse:v,operationType:g})})()}static _forOperation(h,g,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=bh(v);return new ar({user:h,providerId:T,_tokenResponse:v,operationType:g})})()}}function bh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Oc(){return(Oc=(0,f.Z)(function*(y){var h;const g=Oe(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield uu(g,{returnSecureToken:!0}),T=yield ar._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class cu extends O.ZR{constructor(h,g,v,T){var N;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,g,v,T){return new cu(h,g,v,T)}}function du(y,h,g,v){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?cu._fromErrorAndOperation(y,N,h,v):N})}function ss(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function ol(){return(ol=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);yield Ns(!0,g,h);const{providerUserInfo:v}=yield Wn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=ss(v||[]);return g.providerData=g.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function hn(y,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(y,h,g=!1){const v=yield rr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",v)})).apply(this,arguments)}function Ns(y,h,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(y,h,g){yield ir(h);const T=!1===y?"provider-already-linked":"no-such-provider";te(ss(h.providerData).has(g)===y,h.auth,T)})).apply(this,arguments)}function Pc(y,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y,h,g=!1){const{auth:v}=y,T="reauthenticate";try{const N=yield rr(y,du(v,T,h,y),g);te(N.idToken,v,"internal-error");const G=tt(N.idToken);te(G,v,"internal-error");const{sub:se}=G;return te(y.uid===se,v,"user-mismatch"),ar._forOperation(y,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ie(v,"user-mismatch"),N}})).apply(this,arguments)}function lo(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(y,h,g=!1){const v="signIn",T=yield du(y,v,h),N=yield ar._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Mn(y,h){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h){return lo(Oe(y),h)})).apply(this,arguments)}function yi(y,h){return _r.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);return yield Ns(!1,g,h.providerId),hn(g,h)})).apply(this,arguments)}function Os(y,h){return os.apply(this,arguments)}function os(){return(os=(0,f.Z)(function*(y,h){return Pc((0,O.m9)(y),h)})).apply(this,arguments)}function hu(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(y,h){return Tr(y,"POST","/v1/accounts:signInWithCustomToken",Yt(y,h))})).apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,h){const g=Oe(y),v=yield hu(g,{token:h,returnSecureToken:!0}),T=yield ar._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?fu._fromServerResponse(h,g):Ie(h,"internal-error")}}class fu extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new fu(g)}}function Ia(y,h,g){var v;te((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(te(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(te(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function gu(){return(gu=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};g&&Ia(v,T,g),yield nu(v,T)})).apply(this,arguments)}function al(){return(al=(0,f.Z)(function*(y,h,g){yield xn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(y,h){yield so((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function kt(y,h){return ll.apply(this,arguments)}function ll(){return(ll=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),v=yield xn(g,{oobCode:h}),T=v.requestType;switch(te(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,g,"internal-error");default:te(v.email,g,"internal-error")}let N=null;return v.mfaInfo&&(N=lt._fromServerResponse(Oe(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(y,h){const{data:g}=yield kt((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(y,h,g){const v=Oe(y),T=yield uu(v,{returnSecureToken:!0,email:h,password:g}),N=yield ar._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};te(g.handleCodeInApp,v,"argument-error"),g&&Ia(v,T,g),yield mi(v,T)})).apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T=sl.credentialWithLink(h,g||wt());return te(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mn(v,T)})).apply(this,arguments)}function ur(y,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:createAuthUri",Yt(y,h))})).apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:Kt()?wt():"http://localhost"},{signinMethods:T}=yield ur((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function fl(){return(fl=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ia(g.auth,T,h);const{email:N}=yield or(g.auth,T);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Ia(v.auth,N,g);const{email:G}=yield Tc(v.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function pl(y,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(y,h){return $t(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const v=(0,O.m9)(y),N={idToken:yield v.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield rr(v,pl(v.auth,N));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const se=v.providerData.find(({providerId:Ve})=>"password"===Ve);se&&(se.displayName=v.displayName,se.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function yl(y,h,g){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(y,h,g){const{auth:v}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const G=yield rr(y,At(v,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class ho{constructor(h,g,v={}){this.isNewUser=h,this.providerId=g,this.profile=v}}class Vc extends ho{constructor(h,g,v,T){super(h,g,v),this.username=T}}class Uc extends ho{constructor(h,g){super(h,"facebook.com",g)}}class fo extends Vc{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Vs extends ho{constructor(h,g){super(h,"google.com",g)}}class _l extends Vc{constructor(h,g,v){super(h,"twitter.com",g,v)}}function vr(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Lc(y){var h,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(g=null===(h=tt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new ho(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Uc(N,T);case"github.com":return new fo(N,T);case"google.com":return new Vs(N,T);case"twitter.com":return new _l(N,T,y.screenName||null);case"custom":case"anonymous":return new ho(N,null);default:return new ho(N,v,T)}}(g)}class as{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new as("enroll",h)}static _fromMfaPendingCredential(h){return new as("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,v;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return as._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return as._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ta{constructor(h,g,v){this.session=h,this.hints=g,this.signInResolver=v}static _fromError(h,g){const v=Oe(h),T=g.customData._serverResponse,N=(T.mfaInfo||[]).map(se=>lt._fromServerResponse(v,se));te(T.mfaPendingCredential,v,"internal-error");const G=as._fromMfaPendingCredential(T.mfaPendingCredential);return new Ta(G,N,function(){var se=(0,f.Z)(function*(Ve){const Je=yield Ve._process(v,G);delete T.mfaInfo,delete T.mfaPendingCredential;const pt=Object.assign(Object.assign({},T),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const nt=yield ar._fromIdTokenResponse(v,g.operationType,pt);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return te(g.user,v,"internal-error"),ar._forOperation(g.user,g.operationType,pt);default:Ie(v,"internal-error")}});return function(Ve){return se.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function kn(y,h){return $t(y,"POST","/v2/accounts/mfaEnrollment:start",Yt(y,h))}class us{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>lt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new us(h)}getSession(){var h=this;return(0,f.Z)(function*(){return as._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var v=this;return(0,f.Z)(function*(){const T=h,N=yield v.getSession(),G=yield rr(v.user,T._process(v.user.auth,N,g));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),N=yield rr(g.user,function Gp(y,h){return $t(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(y,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:G})=>G!==v),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const $o=new WeakMap,El="__sak";class po{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(El,"1"),this.storage.removeItem(El),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class y extends po{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $c(){const y=(0,O.z$)();return zt(y)||Kn(y)}()&&function jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ts(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),N=this.localCache[v];T!==N&&g(v,N,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((se,Ve,Je)=>{this.notifyListeners(se,Je)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(T);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const N=()=>{const se=this.storage.getItem(T);!v&&this.localCache[T]===se||this.notifyListeners(T,se)},G=this.storage.getItem(T);!function ya(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const N of Array.from(T))N(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,N=this;return(0,f.Z)(function*(){yield T().call(N,g,v),N.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const N=yield v().call(T,g);return T.localCache[g]=JSON.stringify(N),N})()}_remove(g){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),lr=(()=>{class y extends po{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Sr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(N=>N.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const T=g,{eventId:N,eventType:G,data:se}=T.data,Ve=v.handlersMap[G];if(!(null==Ve?void 0:Ve.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Je=Array.from(Ve).map(function(){var nt=(0,f.Z)(function*(Dn){return Dn(T.origin,se)});return function(Dn){return nt.apply(this,arguments)}}()),pt=yield function Gr(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return h.apply(this,arguments)}}()))}(Je);T.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:pt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ho(y="",h=10){let g="";for(let v=0;v<h;v++)g+=Math.floor(10*Math.random());return y+g}class Hc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,v=50){var T=this;return(0,f.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,se;return new Promise((Ve,Je)=>{const pt=Ho("",20);N.port1.start();const nt=setTimeout(()=>{Je(new Error("unsupported_event"))},v);se={messageChannel:N,onMessage(Dn){const Bi=Dn;if(Bi.data.eventId===pt)switch(Bi.data.status){case"ack":clearTimeout(nt),G=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ve(Bi.data.response);break;default:clearTimeout(nt),clearTimeout(G),Je(new Error("invalid_response"))}}},T.handlers.add(se),N.port1.addEventListener("message",se.onMessage),T.target.postMessage({eventType:h,eventId:pt,data:g},[N.port2])}).finally(()=>{se&&T.removeMessageHandler(se)})})()}}function dn(){return window}function vi(){return void 0!==dn().WorkerGlobalScope&&"function"==typeof dn().importScripts}function ri(){return(ri=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",go="firebaseLocalStorage",Nn="fbase_key";class ls{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Go(y,h){return y.transaction([go],h?"readwrite":"readonly").objectStore(go)}function Bs(){const y=indexedDB.open(bl,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(go,{keyPath:Nn})}catch(T){g(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(go)?h(v):(v.close(),yield function ii(){const y=indexedDB.deleteDatabase(bl);return new ls(y).toPromise()}(),h(yield Bs()))}))})}function Aa(y,h,g){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(y,h,g){const v=Go(y,!0).put({[Nn]:h,value:g});return new ls(v).toPromise()})).apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,h){const g=Go(y,!1).get(h),v=yield new ls(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Pi(y,h){const g=Go(y,!0).delete(h);return new ls(g).toPromise()}const wi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Bs()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const N=yield v._openDb();return yield g(N)}catch(N){if(T++>3)throw N;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return vi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Sr._getInstance(function Gc(){return vi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(T,N){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function bu(){return ri.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Hc(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(v=N[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ft(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Bs();return yield Aa(g,El,"1"),yield Pi(g,El),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(N=>Aa(N,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(N=>function Il(y,h){return js.apply(this,arguments)}(N,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>Pi(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(G=>{const se=Go(G,!1).getAll();return new ls(se).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:G,value:se}of v)N.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(se)&&(g.notifyListeners(G,se),T.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!N.has(G)&&(g.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const N of Array.from(T))N(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function zo(y,h){return $t(y,"POST","/v2/accounts/mfaSignIn:start",Yt(y,h))}function Ei(){return(Ei=(0,f.Z)(function*(y){return(yield $t(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mn(y){return new Promise((h,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const N=_e("internal-error");N.customData=T,g(N)},v.type="text/javascript",v.charset="UTF-8",function Wc(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Wo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Er=1e12;class cs{constructor(h){this.auth=h,this.counter=Er,this._widgets=new Map}render(h,g){const v=this.counter;return this._widgets.set(v,new ki(h,this.auth.name,g||{})),this.counter++,v}reset(h){var g;const v=h||Er;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Er))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(h||Er))||void 0===v||v.execute(),""})()}}class ki{constructor(h,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;te(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function En(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $s=Wo("rcb"),Zc=new sn(3e4,6e4);class zp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dn().grecaptcha}load(h,g=""){return te(function Wp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(dn().grecaptcha):new Promise((v,T)=>{const N=dn().setTimeout(()=>{T(_e(h,"network-request-failed"))},Zc.get());dn()[$s]=()=>{dn().clearTimeout(N),delete dn()[$s];const se=dn().grecaptcha;if(!se)return void T(_e(h,"internal-error"));const Ve=se.render;se.render=(Je,pt)=>{const nt=Ve(Je,pt);return this.counter++,nt},this.hostLanguage=g,v(se)},mn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:$s,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!dn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zp{load(h){return(0,f.Z)(function*(){return new cs(h)})()}clearedOneInstance(){}}const Hs="recaptcha",qr={theme:"light",type:"image"};class Kp{constructor(h,g=Object.assign({},qr),v){this.parameters=g,this.type=Hs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zp:new zp,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(g)||new Promise(N=>{const G=se=>{!se||(h.tokenChangeListeners.delete(G),N(se))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof h)h(g);else if("string"==typeof h){const v=dn()[h];"function"==typeof v&&v(g)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){te(Kt()&&!vi(),h.auth,"internal-error"),yield function Gs(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function wr(y){return Ei.apply(this,arguments)}(h.auth);te(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Fo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function yn(){return(yn=(0,f.Z)(function*(y,h,g){const v=Oe(y),T=yield cr(v,h,(0,O.m9)(g));return new ds(T,N=>Mn(v,N))})).apply(this,arguments)}function Ko(){return(Ko=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);yield Ns(!1,v,"phone");const T=yield cr(v.auth,h,(0,O.m9)(g));return new ds(T,N=>yi(v,N))})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y),T=yield cr(v.auth,h,(0,O.m9)(g));return new ds(T,N=>Os(v,N))})).apply(this,arguments)}function cr(y,h,g){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(y,h,g){var v;const T=yield g.verify();try{let N;if(te("string"==typeof T,y,"argument-error"),te(g.type===Hs,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const G=N.session;if("phoneNumber"in N)return te("enroll"===G.type,y,"internal-error"),(yield kn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===G.type,y,"internal-error");const se=(null===(v=N.multiFactorHint)||void 0===v?void 0:v.uid)||N.multiFactorUid;return te(se,y,"missing-multi-factor-info"),(yield zo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Up(y,{phoneNumber:N.phoneNumber,recaptchaToken:T});return G}}finally{g._reset()}})).apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(y,h){yield hn((0,O.m9)(y),h)})).apply(this,arguments)}let Ii=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Oe(g)}verifyPhoneNumber(g,v){return cr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Fo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?Fo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Fi(y,h){return h?ie(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class xa extends tn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Pn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Pn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Pn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Sl(y){return lo(y.auth,new xa(y),y.bypassAuthState)}function xl(y){const{auth:h,user:g}=y;return te(g,h,"internal-error"),Pc(g,new xa(y),y.bypassAuthState)}function Rt(y){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return te(g,h,"internal-error"),hn(g,new xa(y),y.bypassAuthState)})).apply(this,arguments)}class $n{constructor(h,g,v,T,N=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:N,tenantId:G,error:se,type:Ve}=h;if(se)return void g.reject(se);const Je={auth:g.auth,requestUri:v,sessionId:T,tenantId:G||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Je))}catch(pt){g.reject(pt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Sl;case"linkViaPopup":case"linkViaRedirect":return Rt;case"reauthViaPopup":case"reauthViaRedirect":return xl;default:Ie(this.auth,"internal-error")}}resolve(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rl=new sn(2e3,1e4);function Kc(){return(Kc=(0,f.Z)(function*(y,h,g){const v=Oe(y);He(y,h,Ms);const T=Fi(v,g);return new Vi(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Du(){return(Du=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);He(v.auth,h,Ms);const T=Fi(v.auth,g);return new Vi(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);He(v.auth,h,Ms);const T=Fi(v.auth,g);return new Vi(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Vi=(()=>{class y extends $n{constructor(g,v,T,N,G){super(g,v,N,G),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return te(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){ne(1===g.filter.length,"Popup operations only handle one event");const v=Ho();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Rl.get())};g()}}return y.currentPopupAction=null,y})();const Ui=new Map;class Fn extends $n{constructor(h,g,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=Ui.get(g.auth._key());if(!v){try{const N=(yield function oi(y,h){return Nl.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;v=()=>Promise.resolve(N)}catch(T){v=()=>Promise.reject(T)}Ui.set(g.auth._key(),v)}return g.bypassAuthState||Ui.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,g().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Nl(){return(Nl=(0,f.Z)(function*(y,h){const g=C(h),v=I(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function yo(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h){return I(y)._set(C(h),"true")})).apply(this,arguments)}function I(y){return ie(y._redirectPersistence)}function C(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function W(){return(W=(0,f.Z)(function*(y,h,g){const v=Oe(y);He(y,h,Ms);const T=Fi(v,g);return yield yo(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);He(v.auth,h,Ms);const T=Fi(v.auth,g);yield yo(T,v.auth);const N=yield _o(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(y,h,g){const v=(0,O.m9)(y);He(v.auth,h,Ms);const T=Fi(v.auth,g);yield Ns(!1,v,h.providerId),yield yo(T,v.auth);const N=yield _o(v);return T._openRedirect(v.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(y,h){return yield Oe(y)._initializationPromise,In(y,h,!1)})).apply(this,arguments)}function In(y,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(y,h,g=!1){const v=Oe(y),T=Fi(v,h),G=yield new Fn(v,T,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function _o(y){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(y){const h=Ho(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Di{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(g=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ol(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qc(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var v;if(h.error&&!Qc(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const v=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vo(h))}saveEventToCache(h){this.cachedEventUids.add(vo(h)),this.lastProcessedEventTime=Date.now()}}function vo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Qc({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Pl(y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y,h={}){return $t(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Qp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_y=/^https?/;function fs(){return(fs=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Pl(y);for(const g of h)try{if(kl(g))return}catch(v){}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function kl(y){const h=wt(),{protocol:g,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===v}if(!_y.test(g))return!1;if(Qp.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const wy=new sn(3e4,6e4);function Ey(){const y=dn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Jc=null;function by(y){return Jc=Jc||function Jp(y){return new Promise((h,g)=>{var v,T,N;function G(){Ey(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ey(),g(_e(y,"network-request-failed"))},timeout:wy.get()})}if(null===(T=null===(v=dn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=dn().gapi)||void 0===N?void 0:N.load)){const se=Wo("iframefcb");return dn()[se]=()=>{gapi.load?G():g(_e(y,"network-request-failed"))},mn(`https://apis.google.com/js/api.js?onload=${se}`).catch(Ve=>g(Ve))}G()}}).catch(h=>{throw Jc=null,h})}(y),Jc}const Th=new sn(5e3,15e3),Eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ra(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?on(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},T=Xc.get(y.config.apiHost);T&&(v.eid=T);const N=y._getFrameworks();return N.length&&(v.fw=N.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Jo(){return Jo=(0,f.Z)(function*(y){const h=yield by(y),g=dn().gapi;return te(g,y,"internal-error"),h.open({where:document.body,url:Ra(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eo,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(N,G){yield v.restyle({setHideOnLeave:!1});const se=_e(y,"network-request-failed"),Ve=dn().setTimeout(()=>{G(se)},Th.get());function Je(){dn().clearTimeout(Ve),N(v)}v.ping(Je).then(Je,()=>{G(se)})});return function(N,G){return T.apply(this,arguments)}}()))}),Jo.apply(this,arguments)}const Dy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Mh(y,h,g,v,T,N){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ue.SDK_VERSION,eventId:T};if(h instanceof Ms){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Je]of Object.entries(N||{}))G[Ve]=Je}if(h instanceof Br){const Ve=h.getScopes().filter(Je=>""!==Je);Ve.length>0&&(G.scopes=Ve.join(","))}y.tenantId&&(G.tid=y.tenantId);const se=G;for(const Ve of Object.keys(se))void 0===se[Ve]&&delete se[Ve];return`${function Ty({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(se).slice(1)}`}const zs="webStorageSupport";class Rh extends class Xp{constructor(h){this.factorId=h}_process(h,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,v);case"signin":return this._finalizeSignIn(h,g.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Rh(h)}_finalizeEnroll(h,g,v){return function Bc(y,h){return $t(y,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(y,h))}(h,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Sa(y,h){return $t(y,"POST","/v2/accounts/mfaSignIn:finalize",Yt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ay=(()=>{class y{constructor(){}static assertion(g){return Rh._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Sy="@firebase/auth",Nh="0.19.12";class eg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ws(){return window}function xu(){return(xu=(0,f.Z)(function*(y,h,g){var v;const{BuildInfo:T}=Ws();ne(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Na(h.sessionId),G={};return Kn()?G.ibi=T.packageName:vn()?G.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=N,Mh(y,g,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function Ci(){return(Ci=(0,f.Z)(function*(y){const{BuildInfo:h}=Ws(),g={};Kn()?g.iosBundleId=h.packageName:vn()?g.androidPackageName=h.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Pl(y,g)})).apply(this,arguments)}function id(){return(id=(0,f.Z)(function*(y,h,g){const{cordova:v}=Ws();let T=()=>{};try{yield new Promise((N,G)=>{let se=null;function Ve(){var nt;N();const Dn=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Je(){se||(se=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ve),document.addEventListener("resume",Je,!1),vn()&&document.addEventListener("visibilitychange",pt,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",pt,!1),se&&window.clearTimeout(se)}})}finally{T()}})).apply(this,arguments)}function Na(y){return ng.apply(this,arguments)}function ng(){return(ng=(0,f.Z)(function*(y){const h=Mu(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Mu(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function My(y){(0,ue._registerComponent)(new oe.wA("auth",(h,{options:g})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:N,authDomain:G}=v.options;return((se,Ve)=>{te(N&&!N.includes(":"),"invalid-api-key",{appName:se.name}),te(!(null==G?void 0:G.includes(":")),"argument-error",{appName:se.name});const Je={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_a(y)},pt=new Xr(se,Ve,Je);return function ae(y,h){const g=(null==h?void 0:h.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ie);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(pt,g),pt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,v)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new oe.wA("auth-internal",h=>{const g=Oe(h.getProvider("auth").getImmediate());return new eg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Sy,Nh,function xy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(Sy,Nh,"esm2017")}("Browser");class Fh extends Di{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Vl(y){return ea.apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(y){const h=yield Bl()._get(Vh(y));return h&&(yield Bl()._remove(Vh(y))),h})).apply(this,arguments)}function Ul(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Bl(){return ie(Rn)}function Vh(y){return ce("authEvent",y.config.apiKey,y.name)}function od(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function $h(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function ad(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function ig(y=(0,O.z$)()){return!("file:"!==ad()&&"ionic:"!==ad()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){try{const y=self.localStorage,h=Ho();if(y)return y.setItem(h,"1"),y.removeItem(h),!function ta(y=(0,O.z$)()){return function ky(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return bo()&&(0,O.hl)()}return!1}function bo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hl(){return(function Py(){return"http:"===ad()||"https:"===ad()}()||(0,O.ru)()||ig())&&!function ud(){return(0,O.b$)()||(0,O.UG)()}()&&br()&&!bo()}function Hh(){return ig()&&"undefined"!=typeof document}function Oa(){return(Oa=(0,f.Z)(function*(){return!!Hh()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Pa=te,qh="persistence";function ka(y){return zh.apply(this,arguments)}function zh(){return(zh=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Gl(),g=ce(qh,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Gl(){var y;try{return(null===(y=function Gh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Ly=te;class ui{constructor(){this.browserResolver=ie(class Xo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=In}_openPopup(h,g,v,T){var N=this;return(0,f.Z)(function*(){var G;ne(null===(G=N.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const se=Mh(h,g,v,wt(),T);return function rd(y,h,g,v=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let se="";const Ve=Object.assign(Object.assign({},Dy),{width:v.toString(),height:T.toString(),top:N,left:G}),Je=(0,O.z$)().toLowerCase();g&&(se=mr(Je)?"_blank":g),ft(Je)&&(h=h||"http://localhost",Ve.scrollbars="yes");const pt=Object.entries(Ve).reduce((Dn,[Bi,zl])=>`${Dn}${Bi}=${zl},`,"");if(function tu(y=(0,O.z$)()){var h;return Kn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==se)return function xh(y,h){const g=document.createElement("a");g.href=y,g.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(h||"",se),new nd(null);const nt=window.open(h||"",se,pt);te(nt,y,"popup-blocked");try{nt.focus()}catch(Dn){}return new nd(nt)}(h,se,Ho())})()}_openRedirect(h,g,v,T){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function Ch(y){dn().location.href=y}(Mh(h,g,v,wt(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:N}=this.eventManagers[g];return T?Promise.resolve(T):(ne(N,"If manager is not set, promise should be"),N)}const v=this.initAndGetManager(h);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const v=yield function Iy(y){return Jo.apply(this,arguments)}(h),T=new Di(h);return v.register("authEvent",N=>(te(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(zs,{type:zs},T=>{var N;const G=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[zs];void 0!==G&&g(!!G),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function vy(y){return fs.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ts()||zt()||Kn()}}),this.cordovaResolver=ie(class jh{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In}_initialize(h){var g=this;return(0,f.Z)(function*(){const v=h._key();let T=g.eventManagers.get(v);return T||(T=new Fh(h),g.eventManagers.set(v,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,v,T){var N=this;return(0,f.Z)(function*(){!function sd(y){var h,g,v,T,N,G,se,Ve,Je,pt;const nt=Ws();te("function"==typeof(null===(h=null==nt?void 0:nt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(N=null===(T=null===(v=null==nt?void 0:nt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ve=null===(se=null===(G=null==nt?void 0:nt.cordova)||void 0===G?void 0:G.plugins)||void 0===se?void 0:se.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(pt=null===(Je=null==nt?void 0:nt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield N._initialize(h);yield G.initialized(),G.resetRedirect(),function Tu(){Ui.clear()}(),yield N._originValidation(h);const se=function Lh(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Ul(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,v,T);yield function G0(y,h){return Bl()._set(Vh(y),h)}(h,se);const Ve=yield function Oh(y,h,g){return xu.apply(this,arguments)}(h,se,g),Je=yield function Ll(y){const{cordova:h}=Ws();return new Promise(g=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function io(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Ve);return function tg(y,h,g){return id.apply(this,arguments)}(h,G,Je)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ph(y){return Ci.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:N}=Ws(),G=setTimeout((0,f.Z)(function*(){yield Vl(h),g.onEvent($h())}),500),se=function(){var pt=(0,f.Z)(function*(nt){clearTimeout(G);const Dn=yield Vl(h);let Bi=null;Dn&&(null==nt?void 0:nt.url)&&(Bi=function Ny(y,h){var g,v;const T=function jl(y){const h=od(y),g=h.link?decodeURIComponent(h.link):void 0,v=od(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return od(T).link||T||v||g||y}(h);if(T.includes("/__/auth/callback")){const N=od(T),G=N.firebaseError?function Uh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,se=null===(v=null===(g=null==G?void 0:G.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ve=se?_e(se):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Dn,nt.url)),g.onEvent(Bi||$h())});return function(Dn){return pt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,se);const Ve=T,Je=`${N.packageName.toLowerCase()}://`;Ws().handleOpenURL=function(){var pt=(0,f.Z)(function*(nt){if(nt.toLowerCase().startsWith(Je)&&se({url:nt}),"function"==typeof Ve)try{Ve(nt)}catch(Dn){console.error(Dn)}});return function(nt){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=In}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,v,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,v,T)})()}_openRedirect(h,g,v,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,v,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Hh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ly(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Mr(){return Oa.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function ag(y){return y.unwrap()}function Fa(y){return ug(y)}function ug(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ii.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=wa;break;case"facebook.com":v=ao;break;case"github.com":v=Nc;break;case"twitter.com":v=au;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:se,nonce:Ve}=h;return N||G||T||se?se?g.startsWith("saml.")?Vo._create(g,se):is._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:T,accessToken:N}):new Lo(g).credential({idToken:T,accessToken:N,rawNonce:Ve}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ir(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function Uy(y,h){var g;const v=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new By(y,function Eu(y,h){var g;const v=(0,O.m9)(y),T=h;return te(h.customData.operationType,v,"argument-error"),te(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Ta._fromError(v,T)}(y,h));else if(v){const T=ug(h),N=h;T&&(N.credential=T,N.tenantId=v.tenantId||void 0,N.email=v.email||void 0,N.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Fa(g),additionalUserInfo:vr(g),user:Io.getOrCreate(T)}})}function Wh(y,h){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:v=>Ir(y,g.confirm(v))}})).apply(this,arguments)}class By{constructor(h,g){this.resolver=g,this.auth=function Vy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ir(ag(this.auth),this.resolver.resolveSignIn(h))}}class Io{constructor(h){this._delegate=h,this.multiFactor=function jc(y){const h=(0,O.m9)(y);return $o.has(h)||$o.set(h,us._fromUser(h)),$o.get(h)}(h)}static getOrCreate(h){return Io.USER_MAP.has(h)||Io.USER_MAP.set(h,new Io(h)),Io.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return Ir(g.auth,yi(g._delegate,h))})()}linkWithPhoneNumber(h,g){var v=this;return(0,f.Z)(function*(){return Wh(v.auth,function Cl(y,h,g){return Ko.apply(this,arguments)}(v._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return Ir(g.auth,function Li(y,h,g){return Cu.apply(this,arguments)}(g._delegate,h,ui))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield ka(Oe(g.auth)),function Qe(y,h,g){return function _t(y,h,g){return xt.apply(this,arguments)}(y,h,g)}(g._delegate,h,ui)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return Ir(g.auth,Os(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Wh(this.auth,function Yp(y,h,g){return Tl.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Ir(this.auth,function mo(y,h,g){return Du.apply(this,arguments)}(this._delegate,h,ui))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield ka(Oe(g.auth)),function X(y,h,g){return function Ae(y,h,g){return Se.apply(this,arguments)}(y,h,g)}(g._delegate,h,ui)})()}sendEmailVerification(h){return function _i(y,h){return fl.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function Ea(y,h){return ol.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function ml(y,h){return yl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Fc(y,h){return yl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Al(y,h){return hs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ca(y,h){return gl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function vu(y,h,g){return wu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Io.USER_MAP=new WeakMap;const ql=te;let Kh=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;ql(T,"invalid-api-key",{appName:g.name}),ql(T,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?ui:void 0;this._delegate=v.initialize({options:{persistence:jy(T,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function cn(y,h,g){const v=Oe(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),N=sr(h),{host:G,port:se}=function Cs(y){const h=sr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const N=T[1];return{host:N,port:On(v.substr(N.length+1))}}{const[N,G]=v.split(":");return{host:N,port:On(G)}}}(h);v.config.emulator={url:`${N}//${G}${null===se?"":`:${se}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ni(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function ul(y,h){return Ee.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return kt(this._delegate,g)}confirmPasswordReset(g,v){return function mu(y,h,g){return al.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,f.Z)(function*(){return Ir(T._delegate,function jo(y,h,g){return Hr.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function _u(y,h){return Ls.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function hl(y,h){const g=oo.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){ql(Hl(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function bt(y,h){return Ln.apply(this,arguments)}(g._delegate,ui);return v?Ir(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function rg(y,h){Oe(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:N,error:G,complete:se}=Yh(g,v,T);return this._delegate.onAuthStateChanged(N,G,se)}onIdTokenChanged(g,v,T){const{next:N,error:G,complete:se}=Yh(g,v,T);return this._delegate.onIdTokenChanged(N,G,se)}sendSignInLinkToEmail(g,v){return function dl(y,h,g){return kc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function pu(y,h,g){return gu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let T;switch(function sg(y,h){Pa(Object.values(Ti).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Pa(h!==Ti.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Pa(h===Ti.NONE,y,"unsupported-persistence-type"):bo()?Pa(h===Ti.NONE||h===Ti.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Pa(h===Ti.NONE||br(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Ti.SESSION:T=lr;break;case Ti.LOCAL:T=(yield ie(wi)._isAvailable())?wi:Rn;break;case Ti.NONE:T=H;break;default:return Ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ir(this._delegate,function lu(y){return Oc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ir(this._delegate,Mn(this._delegate,g))}signInWithCustomToken(g){return Ir(this._delegate,function Ps(y,h){return ks.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Ir(this._delegate,function cl(y,h,g){return Mn((0,O.m9)(y),sl.credential(h,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Ir(this._delegate,function yu(y,h,g){return Fs.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Wh(this._delegate,function Iu(y,h,g){return yn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return ql(Hl(),v._delegate,"operation-not-supported-in-this-environment"),Ir(v._delegate,function qs(y,h,g){return Kc.apply(this,arguments)}(v._delegate,g,ui))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return ql(Hl(),v._delegate,"operation-not-supported-in-this-environment"),yield ka(v._delegate),function M(y,h,g){return function F(y,h,g){return W.apply(this,arguments)}(y,h,g)}(v._delegate,g,ui)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function gn(y,h){return Bo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ti,y})();function Yh(y,h,g){let v=y;"function"!=typeof y&&({next:v,error:h,complete:g}=y);const T=v;return{next:G=>T(G&&Io.getOrCreate(G)),error:h,complete:g}}function jy(y,h){const g=function og(y,h){const g=Gl();if(!g)return[];const v=ce(qh,y,h);switch(g.getItem(v)){case Ti.NONE:return[H];case Ti.LOCAL:return[wi,lr];case Ti.SESSION:return[lr];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(wi)&&g.push(wi),"undefined"!=typeof window)for(const v of[Rn,lr])g.includes(v)||g.push(v);return g.includes(H)||g.push(H),g}class Qh{constructor(){this.providerId="phone",this._delegate=new Ii(ag(K.Z.auth()))}static credential(h,g){return Ii.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Qh.PHONE_SIGN_IN_METHOD=Ii.PHONE_SIGN_IN_METHOD,Qh.PROVIDER_ID=Ii.PROVIDER_ID;const $y=te;class Hy{constructor(h,g,v=K.Z.app()){var T;$y(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Kp(h,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function lg(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Kh(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:sl,FacebookAuthProvider:ao,GithubAuthProvider:Nc,GoogleAuthProvider:wa,OAuthProvider:Lo,SAMLAuthProvider:ti,PhoneAuthProvider:Qh,PhoneMultiFactorGenerator:Ay,RecaptchaVerifier:Hy,TwitterAuthProvider:au,Auth:Kh,AuthCredential:tn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},8306:(rt,Ce,k)=>{k.d(Ce,{y:()=>j});var f=k(2961),K=k(727),O=k(8822),ue=k(4671);var oe=k(2416),he=k(576),le=k(2806);let j=(()=>{class Te{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const fe=new Te;return fe.source=this,fe.operator=Fe,fe}subscribe(Fe,fe,we){const Xe=function qe(Te){return Te&&Te instanceof f.Lv||function Q(Te){return Te&&(0,he.m)(Te.next)&&(0,he.m)(Te.error)&&(0,he.m)(Te.complete)}(Te)&&(0,K.Nn)(Te)}(Fe)?Fe:new f.Hp(Fe,fe,we);return(0,le.x)(()=>{const{operator:ze,source:Ie}=this;Xe.add(ze?ze.call(Xe,Ie):Ie?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(fe){Fe.error(fe)}}forEach(Fe,fe){return new(fe=$(fe))((we,Xe)=>{const ze=new f.Hp({next:Ie=>{try{Fe(Ie)}catch(_e){Xe(_e),ze.unsubscribe()}},error:Xe,complete:we});this.subscribe(ze)})}_subscribe(Fe){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Fe)}[O.L](){return this}pipe(...Fe){return function ge(Te){return 0===Te.length?ue.y:1===Te.length?Te[0]:function(Fe){return Te.reduce((fe,we)=>we(fe),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=$(Fe))((fe,we)=>{let Xe;this.subscribe(ze=>Xe=ze,ze=>we(ze),()=>fe(Xe))})}}return Te.create=Ne=>new Te(Ne),Te})();function $(Te){var Ne;return null!==(Ne=null!=Te?Te:oe.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(rt,Ce,k)=>{k.d(Ce,{x:()=>oe});var f=k(8306),K=k(727);const ue=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),ge=k(2806);let oe=(()=>{class le extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new he(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new ue}next($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:qe,observers:Te}=this;return Q||qe?K.Lc:(this.currentObservers=null,Te.push($),new K.w0(()=>{this.currentObservers=null,(0,J.P)(Te,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:qe,isStopped:Te}=this;Q?$.error(qe):Te&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return le.create=(j,$)=>new he(j,$),le})();class he extends oe{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,j)}error(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==Q?Q:K.Lc}}},2961:(rt,Ce,k)=>{k.d(Ce,{Hp:()=>Fe,Lv:()=>Q});var f=k(576),K=k(727),O=k(2416),ue=k(7849);function J(){}const ge=le("C",void 0,void 0);function le(Ie,_e,ve){return{kind:Ie,value:_e,error:ve}}var j=k(3410),$=k(2806);class Q extends K.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,K.Nn)(_e)&&_e.add(this)):this.destination=ze}static create(_e,ve,He){return new Fe(_e,ve,He)}next(_e){this.isStopped?Xe(function he(Ie){return le("N",Ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function oe(Ie){return le("E",void 0,Ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Te(Ie,_e){return qe.call(Ie,_e)}class Ne{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(He){fe(He)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(He){fe(He)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){fe(ve)}}}class Fe extends Q{constructor(_e,ve,He){let je;if(super(),(0,f.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=He?He:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Te(_e.next,te),error:_e.error&&Te(_e.error,te),complete:_e.complete&&Te(_e.complete,te)}):je=_e}this.destination=new Ne(je)}}function fe(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ie):(0,ue.h)(Ie)}function Xe(Ie,_e){const{onStoppedNotification:ve}=O.v;ve&&j.z.setTimeout(()=>ve(Ie,_e))}const ze={closed:!0,next:J,error:function we(Ie){throw Ie},complete:J}},727:(rt,Ce,k)=>{k.d(Ce,{Lc:()=>ge,w0:()=>J,Nn:()=>oe});var f=k(576);const O=(0,k(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,qe)=>`${qe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ue=k(8737);class J{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Te of $)Te.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,f.m)(Q))try{Q()}catch(Te){j=Te instanceof O?Te.errors:[Te]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Te of qe)try{he(Te)}catch(Ne){j=null!=j?j:[],Ne instanceof O?j=[...j,...Ne.errors]:j.push(Ne)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)he(j);else{if(j instanceof J){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,ue.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,ue.P)($,j),j instanceof J&&j._removeParent(this)}}J.EMPTY=(()=>{const le=new J;return le.closed=!0,le})();const ge=J.EMPTY;function oe(le){return le instanceof J||le&&"closed"in le&&(0,f.m)(le.remove)&&(0,f.m)(le.add)&&(0,f.m)(le.unsubscribe)}function he(le){(0,f.m)(le)?le():le.unsubscribe()}},2416:(rt,Ce,k)=>{k.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Ce,k)=>{k.d(Ce,{E:()=>K});const K=new(k(8306).y)(J=>J.complete())},8996:(rt,Ce,k)=>{k.d(Ce,{D:()=>_e});var f=k(8421),K=k(5363),O=k(9468),ge=k(8306),he=k(2202),le=k(576),j=k(9672);function Q(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new ge.y(je=>{(0,j.f)(je,He,()=>{const te=ve[Symbol.asyncIterator]();(0,j.f)(je,He,()=>{te.next().then(z=>{z.done?je.complete():je.next(z.value)})},0,!0)})})}var qe=k(3670),Te=k(8239),Ne=k(1144),Fe=k(6495),fe=k(2206),we=k(4532),Xe=k(3260);function _e(ve,He){return He?function Ie(ve,He){if(null!=ve){if((0,qe.c)(ve))return function ue(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,K.Q)(He))}(ve,He);if((0,Ne.z)(ve))return function oe(ve,He){return new ge.y(je=>{let te=0;return He.schedule(function(){te===ve.length?je.complete():(je.next(ve[te++]),je.closed||this.schedule())})})}(ve,He);if((0,Te.t)(ve))return function J(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,K.Q)(He))}(ve,He);if((0,fe.D)(ve))return Q(ve,He);if((0,Fe.T)(ve))return function $(ve,He){return new ge.y(je=>{let te;return(0,j.f)(je,He,()=>{te=ve[he.h](),(0,j.f)(je,He,()=>{let z,ne;try{({value:z,done:ne}=te.next())}catch(me){return void je.error(me)}ne?je.complete():je.next(z)},0,!0)}),()=>(0,le.m)(null==te?void 0:te.return)&&te.return()})}(ve,He);if((0,Xe.L)(ve))return function ze(ve,He){return Q((0,Xe.Q)(ve),He)}(ve,He)}throw(0,we.z)(ve)}(ve,He):(0,f.Xf)(ve)}},8421:(rt,Ce,k)=>{k.d(Ce,{Xf:()=>qe});var f=k(655),K=k(1144),O=k(8239),ue=k(8306),J=k(3670),ge=k(2206),oe=k(4532),he=k(6495),le=k(3260),j=k(576),$=k(7849),Q=k(8822);function qe(Ie){if(Ie instanceof ue.y)return Ie;if(null!=Ie){if((0,J.c)(Ie))return function Te(Ie){return new ue.y(_e=>{const ve=Ie[Q.L]();if((0,j.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,K.z)(Ie))return function Ne(Ie){return new ue.y(_e=>{for(let ve=0;ve<Ie.length&&!_e.closed;ve++)_e.next(Ie[ve]);_e.complete()})}(Ie);if((0,O.t)(Ie))return function Fe(Ie){return new ue.y(_e=>{Ie.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,$.h)})}(Ie);if((0,ge.D)(Ie))return we(Ie);if((0,he.T)(Ie))return function fe(Ie){return new ue.y(_e=>{for(const ve of Ie)if(_e.next(ve),_e.closed)return;_e.complete()})}(Ie);if((0,le.L)(Ie))return function Xe(Ie){return we((0,le.Q)(Ie))}(Ie)}throw(0,oe.z)(Ie)}function we(Ie){return new ue.y(_e=>{(function ze(Ie,_e){var ve,He,je,te;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ve=(0,f.KL)(Ie);!(He=yield ve.next()).done;)if(_e.next(He.value),_e.closed)return}catch(z){je={error:z}}finally{try{He&&!He.done&&(te=ve.return)&&(yield te.call(ve))}finally{if(je)throw je.error}}_e.complete()})})(Ie,_e).catch(ve=>_e.error(ve))})}},6451:(rt,Ce,k)=>{k.d(Ce,{T:()=>ge});var f=k(8189),K=k(8421),O=k(515),ue=k(7669),J=k(8996);function ge(...oe){const he=(0,ue.yG)(oe),le=(0,ue._6)(oe,1/0),j=oe;return j.length?1===j.length?(0,K.Xf)(j[0]):(0,f.J)(le)((0,J.D)(j,he)):O.E}},5403:(rt,Ce,k)=>{k.d(Ce,{x:()=>K});var f=k(2961);function K(ue,J,ge,oe,he){return new O(ue,J,ge,oe,he)}class O extends f.Lv{constructor(J,ge,oe,he,le,j){super(J),this.onFinalize=le,this.shouldUnsubscribe=j,this._next=ge?function($){try{ge($)}catch(Q){J.error(Q)}}:super._next,this._error=he?function($){try{he($)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch($){J.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(rt,Ce,k)=>{k.d(Ce,{U:()=>O});var f=k(4482),K=k(5403);function O(ue,J){return(0,f.e)((ge,oe)=>{let he=0;ge.subscribe((0,K.x)(oe,le=>{oe.next(ue.call(J,le,he++))}))})}},8189:(rt,Ce,k)=>{k.d(Ce,{J:()=>O});var f=k(5577),K=k(4671);function O(ue=1/0){return(0,f.z)(K.y,ue)}},5577:(rt,Ce,k)=>{k.d(Ce,{z:()=>he});var f=k(4004),K=k(8421),O=k(4482),ue=k(9672),J=k(5403),oe=k(576);function he(le,j,$=1/0){return(0,oe.m)(j)?he((Q,qe)=>(0,f.U)((Te,Ne)=>j(Q,Te,qe,Ne))((0,K.Xf)(le(Q,qe))),$):("number"==typeof j&&($=j),(0,O.e)((Q,qe)=>function ge(le,j,$,Q,qe,Te,Ne,Fe){const fe=[];let we=0,Xe=0,ze=!1;const Ie=()=>{ze&&!fe.length&&!we&&j.complete()},_e=He=>we<Q?ve(He):fe.push(He),ve=He=>{Te&&j.next(He),we++;let je=!1;(0,K.Xf)($(He,Xe++)).subscribe((0,J.x)(j,te=>{null==qe||qe(te),Te?_e(te):j.next(te)},()=>{je=!0},void 0,()=>{if(je)try{for(we--;fe.length&&we<Q;){const te=fe.shift();Ne?(0,ue.f)(j,Ne,()=>ve(te)):ve(te)}Ie()}catch(te){j.error(te)}}))};return le.subscribe((0,J.x)(j,_e,()=>{ze=!0,Ie()})),()=>{null==Fe||Fe()}}(Q,qe,le,$)))}},5363:(rt,Ce,k)=>{k.d(Ce,{Q:()=>ue});var f=k(9672),K=k(4482),O=k(5403);function ue(J,ge=0){return(0,K.e)((oe,he)=>{oe.subscribe((0,O.x)(he,le=>(0,f.f)(he,J,()=>he.next(le),ge),()=>(0,f.f)(he,J,()=>he.complete(),ge),le=>(0,f.f)(he,J,()=>he.error(le),ge)))})}},3099:(rt,Ce,k)=>{k.d(Ce,{B:()=>ge});var f=k(8996),K=k(5698),O=k(7579),ue=k(2961),J=k(4482);function ge(he={}){const{connector:le=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:Q=!0}=he;return qe=>{let Te=null,Ne=null,Fe=null,fe=0,we=!1,Xe=!1;const ze=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Ie=()=>{ze(),Te=Fe=null,we=Xe=!1},_e=()=>{const ve=Te;Ie(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,He)=>{fe++,!Xe&&!we&&ze();const je=Fe=null!=Fe?Fe:le();He.add(()=>{fe--,0===fe&&!Xe&&!we&&(Ne=oe(_e,Q))}),je.subscribe(He),Te||(Te=new ue.Hp({next:te=>je.next(te),error:te=>{Xe=!0,ze(),Ne=oe(Ie,j,te),je.error(te)},complete:()=>{we=!0,ze(),Ne=oe(Ie,$),je.complete()}}),(0,f.D)(ve).subscribe(Te))})(qe)}}function oe(he,le,...j){return!0===le?(he(),null):!1===le?null:le(...j).pipe((0,K.q)(1)).subscribe(()=>he())}},9468:(rt,Ce,k)=>{k.d(Ce,{R:()=>K});var f=k(4482);function K(O,ue=0){return(0,f.e)((J,ge)=>{ge.add(O.schedule(()=>J.subscribe(ge),ue))})}},5698:(rt,Ce,k)=>{k.d(Ce,{q:()=>ue});var f=k(515),K=k(4482),O=k(5403);function ue(J){return J<=0?()=>f.E:(0,K.e)((ge,oe)=>{let he=0;ge.subscribe((0,O.x)(oe,le=>{++he<=J&&(oe.next(le),J<=he&&oe.complete())}))})}},8505:(rt,Ce,k)=>{k.d(Ce,{b:()=>J});var f=k(576),K=k(4482),O=k(5403),ue=k(4671);function J(ge,oe,he){const le=(0,f.m)(ge)||oe||he?{next:ge,error:oe,complete:he}:ge;return le?(0,K.e)((j,$)=>{var Q;null===(Q=le.subscribe)||void 0===Q||Q.call(le);let qe=!0;j.subscribe((0,O.x)($,Te=>{var Ne;null===(Ne=le.next)||void 0===Ne||Ne.call(le,Te),$.next(Te)},()=>{var Te;qe=!1,null===(Te=le.complete)||void 0===Te||Te.call(le),$.complete()},Te=>{var Ne;qe=!1,null===(Ne=le.error)||void 0===Ne||Ne.call(le,Te),$.error(Te)},()=>{var Te,Ne;qe&&(null===(Te=le.unsubscribe)||void 0===Te||Te.call(le)),null===(Ne=le.finalize)||void 0===Ne||Ne.call(le)}))}):ue.y}},4408:(rt,Ce,k)=>{k.d(Ce,{o:()=>J});var f=k(727);class K extends f.w0{constructor(oe,he){super()}schedule(oe,he=0){return this}}const O={setInterval(ge,oe,...he){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(ge,oe,...he):setInterval(ge,oe,...he)},clearInterval(ge){const{delegate:oe}=O;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=k(8737);class J extends K{constructor(oe,he){super(oe,he),this.scheduler=oe,this.work=he,this.pending=!1}schedule(oe,he=0){if(this.closed)return this;this.state=oe;const le=this.id,j=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(j,le,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(j,this.id,he),this}requestAsyncId(oe,he,le=0){return O.setInterval(oe.flush.bind(oe,this),le)}recycleAsyncId(oe,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;O.clearInterval(he)}execute(oe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(oe,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,he){let j,le=!1;try{this.work(oe)}catch($){le=!0,j=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:oe,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(le,this),null!=oe&&(this.id=this.recycleAsyncId(he,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Ce,k)=>{k.d(Ce,{v:()=>O});var f=k(6063);class K{constructor(J,ge=K.now){this.schedulerActionCtor=J,this.now=ge}schedule(J,ge=0,oe){return new this.schedulerActionCtor(this,J).schedule(oe,ge)}}K.now=f.l.now;class O extends K{constructor(J,ge=K.now){super(J,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:ge}=this;if(this._active)return void ge.push(J);let oe;this._active=!0;do{if(oe=J.execute(J.state,J.delay))break}while(J=ge.shift());if(this._active=!1,oe){for(;J=ge.shift();)J.unsubscribe();throw oe}}}},4986:(rt,Ce,k)=>{k.d(Ce,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(rt,Ce,k)=>{k.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(rt,Ce,k)=>{k.d(Ce,{z:()=>f});const f={setTimeout(K,O,...ue){const{delegate:J}=f;return(null==J?void 0:J.setTimeout)?J.setTimeout(K,O,...ue):setTimeout(K,O,...ue)},clearTimeout(K){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(rt,Ce,k)=>{k.d(Ce,{h:()=>K});const K=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Ce,k)=>{k.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,Ce,k)=>{k.d(Ce,{_6:()=>ge,jO:()=>ue,yG:()=>J});var f=k(576);function O(oe){return oe[oe.length-1]}function ue(oe){return(0,f.m)(O(oe))?oe.pop():void 0}function J(oe){return function K(oe){return oe&&(0,f.m)(oe.schedule)}(O(oe))?oe.pop():void 0}function ge(oe,he){return"number"==typeof O(oe)?oe.pop():he}},8737:(rt,Ce,k)=>{function f(K,O){if(K){const ue=K.indexOf(O);0<=ue&&K.splice(ue,1)}}k.d(Ce,{P:()=>f})},3888:(rt,Ce,k)=>{function f(K){const ue=K(J=>{Error.call(J),J.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}k.d(Ce,{d:()=>f})},2806:(rt,Ce,k)=>{k.d(Ce,{O:()=>ue,x:()=>O});var f=k(2416);let K=null;function O(J){if(f.v.useDeprecatedSynchronousErrorHandling){const ge=!K;if(ge&&(K={errorThrown:!1,error:null}),J(),ge){const{errorThrown:oe,error:he}=K;if(K=null,oe)throw he}}else J()}function ue(J){f.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=J)}},9672:(rt,Ce,k)=>{function f(K,O,ue,J=0,ge=!1){const oe=O.schedule(function(){ue(),ge?K.add(this.schedule(null,J)):this.unsubscribe()},J);if(K.add(oe),!ge)return oe}k.d(Ce,{f:()=>f})},4671:(rt,Ce,k)=>{function f(K){return K}k.d(Ce,{y:()=>f})},1144:(rt,Ce,k)=>{k.d(Ce,{z:()=>f});const f=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(rt,Ce,k)=>{k.d(Ce,{D:()=>K});var f=k(576);function K(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,Ce,k)=>{function f(K){return"function"==typeof K}k.d(Ce,{m:()=>f})},3670:(rt,Ce,k)=>{k.d(Ce,{c:()=>O});var f=k(8822),K=k(576);function O(ue){return(0,K.m)(ue[f.L])}},6495:(rt,Ce,k)=>{k.d(Ce,{T:()=>O});var f=k(2202),K=k(576);function O(ue){return(0,K.m)(null==ue?void 0:ue[f.h])}},8239:(rt,Ce,k)=>{k.d(Ce,{t:()=>K});var f=k(576);function K(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(rt,Ce,k)=>{k.d(Ce,{L:()=>ue,Q:()=>O});var f=k(655),K=k(576);function O(J){return(0,f.FC)(this,arguments,function*(){const oe=J.getReader();try{for(;;){const{value:he,done:le}=yield(0,f.qq)(oe.read());if(le)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(he)}}finally{oe.releaseLock()}})}function ue(J){return(0,K.m)(null==J?void 0:J.getReader)}},4482:(rt,Ce,k)=>{k.d(Ce,{A:()=>K,e:()=>O});var f=k(576);function K(ue){return(0,f.m)(null==ue?void 0:ue.lift)}function O(ue){return J=>{if(K(J))return J.lift(function(ge){try{return ue(ge,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,Ce,k)=>{k.d(Ce,{h:()=>O});var f=k(2416),K=k(3410);function O(ue){K.z.setTimeout(()=>{const{onUnhandledError:J}=f.v;if(!J)throw ue;J(ue)})}},4532:(rt,Ce,k)=>{function f(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>f})},655:(rt,Ce,k)=>{function ue(z,ne){var me={};for(var ie in z)Object.prototype.hasOwnProperty.call(z,ie)&&ne.indexOf(ie)<0&&(me[ie]=z[ie]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(ie=Object.getOwnPropertySymbols(z);Re<ie.length;Re++)ne.indexOf(ie[Re])<0&&Object.prototype.propertyIsEnumerable.call(z,ie[Re])&&(me[ie[Re]]=z[ie[Re]])}return me}function he(z,ne,me,ie){return new(me||(me=Promise))(function(ae,wt){function Kt(ht){try{it(ie.next(ht))}catch(sn){wt(sn)}}function Sn(ht){try{it(ie.throw(ht))}catch(sn){wt(sn)}}function it(ht){ht.done?ae(ht.value):function Re(ae){return ae instanceof me?ae:new me(function(wt){wt(ae)})}(ht.value).then(Kt,Sn)}it((ie=ie.apply(z,ne||[])).next())})}function fe(z){return this instanceof fe?(this.v=z,this):new fe(z)}function we(z,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ie=me.apply(z,ne||[]),ae=[];return Re={},wt("next"),wt("throw"),wt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function wt(on){ie[on]&&(Re[on]=function(gi){return new Promise(function(en,Ji){ae.push([on,gi,en,Ji])>1||Kt(on,gi)})})}function Kt(on,gi){try{!function Sn(on){on.value instanceof fe?Promise.resolve(on.value.v).then(it,ht):sn(ae[0][2],on)}(ie[on](gi))}catch(en){sn(ae[0][3],en)}}function it(on){Kt("next",on)}function ht(on){Kt("throw",on)}function sn(on,gi){on(gi),ae.shift(),ae.length&&Kt(ae[0][0],ae[0][1])}}function ze(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=z[Symbol.asyncIterator];return ne?ne.call(z):(z=function Q(z){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&z[ne],ie=0;if(me)return me.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ie>=z.length&&(z=void 0),{value:z&&z[ie++],done:!z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),me={},ie("next"),ie("throw"),ie("return"),me[Symbol.asyncIterator]=function(){return this},me);function ie(ae){me[ae]=z[ae]&&function(wt){return new Promise(function(Kt,Sn){!function Re(ae,wt,Kt,Sn){Promise.resolve(Sn).then(function(it){ae({value:it,done:Kt})},wt)}(Kt,Sn,(wt=z[ae](wt)).done,wt.value)})}}}k.d(Ce,{FC:()=>we,KL:()=>ze,_T:()=>ue,mG:()=>he,qq:()=>fe})},5e3:(rt,Ce,k)=>{k.d(Ce,{$8M:()=>Wo,$Z:()=>em,AFp:()=>Tb,AaK:()=>he,CHM:()=>ll,CRH:()=>fb,CZH:()=>Ka,CqO:()=>Df,EJc:()=>e0,EpF:()=>If,F4k:()=>Tn,FYo:()=>oc,FiY:()=>ai,G48:()=>TC,GfV:()=>lc,Gpc:()=>$,JOm:()=>se,LFG:()=>Qe,LSH:()=>Ru,Lbi:()=>sp,MAs:()=>Sd,NdJ:()=>ev,OlP:()=>bn,Oqu:()=>Nf,PXZ:()=>IC,Q6J:()=>X_,QGY:()=>nm,Qsj:()=>ac,R0b:()=>ys,RDi:()=>ss,Rgc:()=>za,SBq:()=>qf,Sil:()=>$m,Suo:()=>hb,TTD:()=>ao,TgZ:()=>Pd,VLi:()=>Ob,X6Q:()=>Lb,XFs:()=>ot,Xpm:()=>Pt,Y36:()=>Ao,YKP:()=>Rv,YNc:()=>G_,Yjl:()=>mr,Yz7:()=>en,ZZ4:()=>ey,_Bn:()=>Av,_UZ:()=>tm,_Vd:()=>Gf,_c5:()=>yp,_uU:()=>hv,aQg:()=>p0,c2e:()=>Sb,cJS:()=>Yt,cg1:()=>wv,dDg:()=>Ja,deG:()=>zp,dqk:()=>jt,eFA:()=>s0,ekj:()=>ov,g9A:()=>Ab,h0i:()=>eo,hGG:()=>m0,hij:()=>Bd,iGM:()=>pc,ifc:()=>Ht,ip1:()=>uh,kL8:()=>EE,lG2:()=>zt,n5z:()=>Wc,oAB:()=>Y,oxw:()=>nE,q4F:()=>Mv,qLn:()=>Ir,qOj:()=>U_,qZA:()=>sa,sBO:()=>xC,sIi:()=>Kl,s_b:()=>Xf,soG:()=>Xv,tBr:()=>xr,tb:()=>Ya,tp0:()=>vo,uIk:()=>gf,vHH:()=>Ne,vpe:()=>ca,wAp:()=>gt,xp6:()=>kI,z2F:()=>up,zSh:()=>Do,zs3:()=>Co});var f=k(7579),K=k(727),O=k(8306),ue=k(6451),J=k(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function oe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=ge({__forward_ref__:ge});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function Q(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class Ne extends Error{constructor(s,a){super(function Fe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Ne(-201,`No provider for ${we(i)} found${a}`)}function it(i,s){null==i&&function ht(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yt(i){return{providers:i.providers||[],imports:i.imports||[]}}function $t(i){return nr(i,Mi)||nr(i,Xi)}function nr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Tr(i){return i&&(i.hasOwnProperty(Ar)||i.hasOwnProperty(es))?i[Ar]:null}const Mi=ge({\u0275prov:ge}),Ar=ge({\u0275inj:ge}),Xi=ge({ngInjectableDef:ge}),es=ge({ngInjectorDef:ge});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Vr;function Bn(i){const s=Vr;return Vr=i,s}function Jr(i,s,a){const l=$t(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ot.Optional?null:void 0!==s?s:void _e(he(i),"Injector")}function fn(i){return{toString:i}.toString()}var Zn=(()=>((Zn=Zn||{})[Zn.OnPush=0]="OnPush",Zn[Zn.Default=1]="Default",Zn))(),Ht=(()=>{return(i=Ht||(Ht={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ht;var i})();const tt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=tt||"undefined"!=typeof global&&global||yt||rr,ir={},at=[],gr=ge({\u0275cmp:ge}),Ut=ge({\u0275dir:ge}),We=ge({\u0275pipe:ge}),De=ge({\u0275mod:ge}),Ye=ge({\u0275fac:ge}),ut=ge({__NG_ELEMENT_ID__:ge});let Bt=0;function Pt(i){return fn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ht.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Bt++,l.inputs=ft(i.inputs,a),l.outputs=ft(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,l})}function L(i){return Gt(i)||function vn(i){return i[Ut]||null}(i)}function H(i){return function St(i){return i[We]||null}(i)}const ce={};function Y(i){return fn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ce[i.id]=i.type),s})}function ft(i,s){if(null==i)return ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const zt=Pt;function mr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Gt(i){return i[gr]||null}function ln(i,s){const a=i[De]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function mi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ei(i){return Array.isArray(i)&&!0===i[1]}function Tc(i){return 0!=(8&i.flags)}function Ss(i){return 2==(2&i.flags)}function iu(i){return 1==(1&i.flags)}function Ur(i){return null!==i.template}function wh(i){return 0!=(512&i[2])}function Br(i,s){return i.hasOwnProperty(Ye)?i[Ye]:null}class Lo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ao(){return wa}function wa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Hp),Nc}function Nc(){const i=Rs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ir)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Hp(i,s,a,l){const c=Rs(i)||function ti(i,s){return i[Vo]=s}(i,{previous:ir,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Lo(b&&b.currentValue,s,_===ir),i[l]=s}ao.ngInherit=!0;const Vo="__ngSimpleChanges__";function Rs(i){return i[Vo]||null}let du;function ss(i){du=i}function hn(i){return!!i.listen}const Uo={createRenderer:(i,s)=>function Ea(){return void 0!==du?du:"undefined"!=typeof document?document:void 0}()};function rn(i){for(;Array.isArray(i);)i=i[0];return i}function lo(i,s){return rn(s[i])}function yr(i,s){return rn(s[i.index])}function ba(i,s){return i.data[s]}function _r(i,s){const a=s[i];return mi(a)?a:a[0]}function Os(i){return 4==(4&i[2])}function os(i){return 128==(128&i[2])}function $r(i,s){return null==s?null:i[s]}function Ps(i){i[18]=0}function ks(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:ho(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function mu(){return lt.bindingsEnabled}function Ee(){return lt.lFrame.lView}function kt(){return lt.lFrame.tView}function ll(i){return lt.lFrame.contextLView=i,i[8]}function gn(){let i=Bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Bo(){return lt.lFrame.currentTNode}function Hr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function cl(){return lt.lFrame.isParent}function yu(){return lt.isInCheckNoChangesMode}function Fs(i){lt.isInCheckNoChangesMode=i}function Ls(){return lt.lFrame.bindingIndex++}function wu(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Da(s)}function Da(i){lt.lFrame.currentDirectiveIndex=i}function gl(){return lt.lFrame.currentQueryIndex}function ml(i){lt.lFrame.currentQueryIndex=i}function Fc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function yl(i,s,a){if(a&ot.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ot.Host||(c=Fc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=lt.lFrame=Lc();return l.currentTNode=s,l.lView=i,!0}function co(i){const s=Lc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Lc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?ho(i):s}function ho(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Vc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Uc=Vc;function fo(){const i=Vc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return lt.lFrame.selectedIndex}function Us(i){lt.lFrame.selectedIndex=i}function wn(){const i=lt.lFrame;return ba(i.tView,i.selectedIndex)}function as(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ta(i,s,a){Bc(i,s,3,a)}function Eu(i,s,a,l){(3&i[2])===a&&Bc(i,s,a,l)}function kn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Bc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=l&&E>=l)break}else s[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(Gp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Gp(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class $o{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ct(i,s,a){const l=hn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],b=a[c++];l?i.setAttribute(s,E,b,_):s.setAttributeNS(_,E,b)}else{const _=p,E=a[++c];Gr(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function lr(i){return 3===i||4===i||6===i}function Gr(i){return 64===i.charCodeAt(0)}function Sr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Ho(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Ho(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function Hc(i){return-1!==i}function dn(i){return 32767&i}function vi(i,s){let a=function Ch(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let bu=!0;function ri(i){const s=bu;return bu=i,s}let qc=0;function Nn(i,s){const a=Go(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ls(l.data,i),ls(s,null),ls(l.blueprint,null));const c=ii(i,s),p=i.injectorIndex;if(Hc(c)){const _=dn(c),E=vi(c,s),b=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|b[_+A]}return s[p+8]=c,p}function ls(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Go(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ii(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Bs(i,s,a){!function go(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(l=a[ut]),null==l&&(l=a[ut]=qc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Oi(i,s,a){if(a&ot.Optional)return i;_e(s,"NodeInjector")}function Il(i,s,a,l){if(a&ot.Optional&&void 0===l&&(l=null),0==(a&(ot.Self|ot.Host))){const c=i[9],p=Bn(void 0);try{return c?c.get(s,l,a&ot.Optional):Jr(s,l,a&ot.Optional)}finally{Bn(p)}}return Oi(l,s,a)}function js(i,s,a,l=ot.Default,c){if(null!==i){const p=function zo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:Dl:s}(a);if("function"==typeof p){if(!yl(s,i,l))return l&ot.Host?Oi(c,a,l):Il(s,a,l,c);try{const _=p(l);if(null!=_||l&ot.Optional)return _;_e(a)}finally{Uc()}}else if("number"==typeof p){let _=null,E=Go(i,s),b=-1,A=l&ot.Host?s[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(b=-1===E?ii(i,s):s[E+8],-1!==b&&wr(l,!1)?(_=s[1],E=dn(b),s=vi(b,s)):E=-1);-1!==E;){const S=s[1];if(Sa(p,E,S.data)){const P=zc(E,s,a,_,l,A);if(P!==Pi)return P}b=s[E+8],-1!==b&&wr(l,s[1].data[E+8]===A)&&Sa(p,E,s)?(_=S,E=dn(b),s=vi(b,s)):E=-1}}}return Il(s,a,l,c)}const Pi={};function Dl(){return new Ei(gn(),Ee())}function zc(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=qo(E,_,a,null==l?Ss(E)&&bu:l!=_&&0!=(3&E.type),c&ot.Host&&p===E);return null!==S?wi(s,_,S,E):Pi}function qo(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,b=i.directiveStart,S=p>>20,U=c?E+S:i.directiveEnd;for(let Z=l?E:E+S;Z<U;Z++){const ye=_[Z];if(Z<b&&a===ye||Z>=b&&ye.type===a)return Z}if(c){const Z=_[b];if(Z&&Ur(Z)&&Z.type===a)return b}return null}function wi(i,s,a,l){let c=i[a];const p=s.data;if(function jc(i){return i instanceof $o}(c)){const _=c;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(p[a]));const E=ri(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Bn(_.injectImpl):null;yl(i,l,ot.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function wl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=wa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&Bn(b),ri(E),_.resolving=!1,Uc()}}return c}function Sa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wr(i,s){return!(i&ot.Self||i&ot.Host&&s)}class Ei{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return js(this._tNode,this._lView,s,l,a)}}function Wc(i){return fn(()=>{const s=i.prototype.constructor,a=s[Ye]||mn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Ye]||mn(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function mn(i){return qe(i)?()=>{const s=mn(Q(i));return s&&s()}:Br(i)}function Wo(i){return function Aa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(lr(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(gn(),i)}const Zo="__parameters__";function En(i,s,a){return fn(()=>{const l=function ki(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(b,A,S){const P=b.hasOwnProperty(Zo)?b[Zo]:Object.defineProperty(b,Zo,{value:[]})[Zo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class bn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zp=new bn("AnalyzeForEntryComponents");function cr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),cr(l,s)):s!==i&&s.push(l)}return s}function si(i,s){i.forEach(a=>Array.isArray(a)?si(a,s):s(a))}function Al(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function hs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $n(i,s,a){let l=qs(i,s);return l>=0?i[1|l]=a:(l=~l,function Sl(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Rl(i,s){const a=qs(i,s);if(a>=0)return i[1|a]}function qs(i,s){return function mo(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const yo={},Yo="__NG_DI_FLAG__",Tu="ngTempTokenPath",C=/\n/gm,F="__source",W=ge({provide:String,useValue:ge});let X;function Ae(i){const s=X;return X=i,s}function Se(i,s=ot.Default){if(void 0===X)throw new Ne(203,"");return null===X?Jr(i,void 0,s):X.get(i,s&ot.Optional?null:void 0,s)}function Qe(i,s=ot.Default){return(function Wn(){return Vr}()||Se)(Q(i),s)}const xt=Qe;function bt(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let c,p=ot.Default;for(let _=0;_<l.length;_++){const E=l[_],b=In(E);"number"==typeof b?-1===b?c=E.token:p|=b:c=E}s.push(Qe(c,p))}else s.push(Qe(l))}return s}function Ln(i,s){return i[Yo]=s,i.prototype[Yo]=s,i}function In(i){return i[Yo]}const xr=Ln(En("Inject",i=>({token:i})),-1),ai=Ln(En("Optional"),8),vo=Ln(En("SkipSelf"),4);class rd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function zs(i){return i instanceof rd?i.changingThisBreaksApplicationSecurity:i}const Ws=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Oh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function Ru(i){const s=function ta(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Qt.URL,i)||"":function Xo(i,s){const a=function Su(i){return i instanceof rd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?zs(i):function xu(i){return(i=String(i)).match(Ws)||i.match(Oh)?i:"unsafe:"+i}(fe(i))}const Hh="__ngContext__";function Mr(i,s){i[Hh]=s}function Gh(i){const s=function Oa(i){return i[Hh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Fa(i){return i.ngOriginalError}function ug(i,...s){i.error(...s)}class Ir{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Uy(i){return i&&i.ngErrorLogger||ug}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Fa(s);for(;a&&Fa(a);)a=Fa(a);return a||null}}const Hy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function g(i){return i instanceof Function?i():i}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function Je(i,s){return undefined(i,s)}function Dn(i){const s=i[3];return ei(s)?s[3]:s}function Nu(i){return Jh(i[13])}function Ou(i){return Jh(i[4])}function Jh(i){for(;null!==i&&!ei(i);)i=i[4];return i}function na(i,s,a,l,c){if(null!=l){let p,_=!1;ei(l)?p=l:mi(l)&&(_=!0,l=l[0]);const E=rn(l);0===i&&null!==a?null==c?Yy(s,a,E):ps(s,a,E,c||null,!0):1===i&&null!==a?ps(s,a,E,c||null,!0):2===i?function e_(i,s,a){const l=tf(i,s);l&&function TI(i,s,a,l){hn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function xI(i,s,a,l,c){const p=a[7];p!==rn(a)&&na(s,i,l,p,c);for(let E=10;E<a.length;E++){const b=a[E];pg(b[1],b,i,s,l,p)}}(s,i,p,a,c)}}function dd(i,s,a){if(hn(i))return i.createElement(s,a);{const l=null!==a?function cu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function q0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ks(c,-1)),a.splice(l,1)}function Wy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&q0(c,l),s>0&&(i[a-1][4]=l[4]);const p=hs(i,10+s);!function Rr(i,s){pg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Zy(i,s){if(!(256&s[2])){const a=s[11];hn(a)&&a.destroyNode&&pg(i,s,a,3,null,null),function zy(i){let s=i[13];if(!s)return Ky(i[1],i);for(;s;){let a=null;if(mi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)mi(s)&&Ky(s[1],s),s=s[3];null===s&&(s=i),mi(s)&&Ky(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ky(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function W0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof $o)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function z0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):rn(s[_]),b=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&hn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ei(s[3])){a!==s[3]&&q0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function hg(i,s,a){return function CI(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ht.None||c===Ht.Emulated)return null}return yr(l,a)}(i,s.parent,a)}function ps(i,s,a,l,c){hn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Yy(i,s,a){hn(i)?i.appendChild(s,a):s.appendChild(a)}function Z0(i,s,a,l,c){null!==l?ps(i,s,a,l,c):Yy(i,s,a)}function tf(i,s){return hn(i)?i.parentNode(s):s.parentNode}let Qy=function Y0(i,s,a){return 40&i.type?yr(i,a):null};function fg(i,s,a,l){const c=hg(i,l,s),p=s[11],E=function K0(i,s,a){return Qy(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)Z0(p,c,a[b],E,!1);else Z0(p,c,a,E,!1)}function fd(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return Xy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return fd(i,l);{const c=i[s.index];return ei(c)?Xy(-1,c):rn(c)}}if(32&a)return Je(s,i)()||rn(i[s.index]);{const l=J0(i,s);return null!==l?Array.isArray(l)?l[0]:fd(Dn(i[16]),l):fd(i,s.next)}}return null}function J0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Xy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return fd(l,c)}return s[7]}function t_(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===s&&(E&&Mr(rn(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)t_(i,s,a.child,l,c,p,!1),na(s,i,c,E,p);else if(32&b){const A=Je(a,l);let S;for(;S=A();)na(s,i,c,S,p);na(s,i,c,E,p)}else 16&b?pe(i,s,l,a,c,p):na(s,i,c,E,p);a=_?a.projectionNext:a.next}}function pg(i,s,a,l,c,p){t_(a,l,i.firstChild,s,c,p,!1)}function pe(i,s,a,l,c,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)na(s,i,c,b[A],p);else t_(i,s,b,_[3],c,p,!0)}function X0(i,s,a){hn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function n_(i,s,a){hn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function ew(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const r_="ng-template";function i_(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==ew(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Cn(i){return 4===i.type&&i.value!==r_}function Ai(i,s,a){return s===(4!==i.type||a?i.value:r_)}function tw(i,s,a){let l=4;const c=i.attrs||[],p=function s_(i){for(let s=0;s<i.length;s++)if(lr(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!Ai(i,b,a)||""===b&&1===s.length){if(ji(l))return!1;_=!0}}else{const A=8&l?b:s[++E];if(8&l&&null!==i.attrs){if(!i_(i.attrs,A,a)){if(ji(l))return!1;_=!0}continue}const P=RI(8&l?"class":b,c,Cn(i),a);if(-1===P){if(ji(l))return!1;_=!0;continue}if(""!==A){let U;U=P>p?"":c[P+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==ew(Z,A,0)||2&l&&A!==U){if(ji(l))return!1;_=!0}}}}else{if(!_&&!ji(l)&&!ji(b))return!1;if(_&&ji(b))continue;_=!1,l=b|1&l}}return ji(l)||_}function ji(i){return 0==(1&i)}function RI(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function bA(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function NI(i,s,a=!1){for(let l=0;l<s.length;l++)if(tw(i,s[l],a))return!0;return!1}function nw(i,s){return i?":not("+s.trim()+")":s}function PI(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!ji(_)&&(s+=nw(p,c),c=""),l=_,p=p||!ji(l);a++}return""!==c&&(s+=nw(p,c)),s}const Nt={};function kI(i){FI(kt(),Ee(),vr()+i,yu())}function FI(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ta(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Eu(s,p,0,a)}Us(a)}function o_(i,s){return i<<17|s<<2}function ra(i){return i>>17&32767}function vt(i){return 2|i}function li(i){return(131068&i)>>2}function mg(i,s){return-131069&i|s<<2}function a_(i){return 1|i}function y_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];ml(c),_.contentQueries(2,s[p],p)}}}function af(i,s,a,l,c,p,_,E,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ps(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function md(i,s,a,l,c){let p=i.data[s];if(null===p)p=function v_(i,s,a,l,c){const p=Bo(),_=cl(),b=i.data[s]=function zI(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,c),function fl(){return lt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function jo(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Hr(p,!0),p}function La(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Wl(i,s,a){co(s);try{const l=i.viewQuery;null!==l&&Ng(1,l,a);const c=i.template;null!==c&&E_(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&y_(i,s),i.staticViewQueries&&Ng(2,i.viewQuery,a);const p=i.components;null!==p&&function __(i,s){for(let a=0;a<s.length;a++)jA(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,fo()}}function Fu(i,s,a,l){const c=s[2];if(256==(256&c))return;co(s);const p=yu();try{Ps(s),function _u(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&E_(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&Ta(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Eu(s,A,0,null),kn(s,0)}if(function JI(i){for(let s=Nu(i);null!==s;s=Ou(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&ks(p,1),c[2]|=1024}}}(s),function BA(i){for(let s=Nu(i);null!==s;s=Ou(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];os(l)&&Fu(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&y_(i,s),!p)if(_){const A=i.contentCheckHooks;null!==A&&Ta(s,A)}else{const A=i.contentHooks;null!==A&&Eu(s,A,1),kn(s,1)}!function m_(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Us(~c);else{const p=c,_=a[++l],E=a[++l];wu(_,p),E(2,s[p])}}}finally{Us(-1)}}(i,s);const E=i.components;null!==E&&function aw(i,s){for(let a=0;a<s.length;a++)XI(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&Ng(2,b,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&Ta(s,A)}else{const A=i.viewHooks;null!==A&&Eu(s,A,2),kn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ks(s[3],-1))}finally{fo()}}function w_(i,s,a,l){const c=s[10],p=!yu(),_=Os(s);try{p&&!_&&c.begin&&c.begin(),_&&Wl(i,s,l),Fu(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function E_(i,s,a,l,c){const p=vr(),_=2&l;try{Us(-1),_&&s.length>20&&FI(i,s,20,yu()),a(l,c)}finally{Us(p)}}function Tg(i,s,a){!mu()||(function FA(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Nn(a,s),Mr(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const b=i.data[E],A=Ur(b);A&&vw(s,a,b);const S=wi(s,i,E,a);Mr(S,s),null!==_&&UA(0,E-c,S,b,0,_),A&&(_r(a.index,s)[8]=S)}}(i,s,a,yr(a,s)),128==(128&a.flags)&&function KI(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function pl(){return lt.lFrame.currentDirectiveIndex}();try{Us(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];Da(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&YI(A,S)}}finally{Us(-1),Da(E)}}(i,s,a))}function yd(i,s,a=yr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function lw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ag(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ag(i,s,a,l,c,p,_,E,b,A){const S=20+l,P=S+c,U=function qI(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Nt);return a}(S,P),Z="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:E,declTNode:s,data:U.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Z,incompleteFirstPass:!1}}function hw(i,s,a,l){const c=A_(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&S_(i).push(l,c.length-1))}function fw(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function xg(i,s,a,l){let c=!1;if(mu()){const p=function LA(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];NI(a,_.selectors,!1)&&(c||(c=[]),Bs(Nn(a,s),i,_.type),Ur(_)?(Mg(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,D_(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const P=p[S];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,A=La(i,s,p.length,null);for(let S=0;S<p.length;S++){const P=p[S];a.mergedAttrs=Sr(a.mergedAttrs,P.hostAttrs),_w(i,a,s,A,P),QI(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!E&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function WI(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],P=S.inputs,U=null===p||Cn(s)?null:C_(P,p);_.push(U),E=fw(P,A,E),b=fw(S.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=b}(i,a)}_&&function VA(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Ne(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Sr(a.mergedAttrs,a.attrs),c}function I_(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function yw(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,c,_)}}function YI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Mg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function QI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ur(s)&&(a[""]=i)}}function D_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function _w(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=Br(c.type)),_=new $o(p,Ur(c),null);i.blueprint[l]=_,a[l]=_,I_(i,s,0,l,La(i,a,c.hostVars,Nt),c)}function vw(i,s,a){const l=yr(s,i),c=lw(a),p=i[10],_=T_(i,af(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Ys(i,s,a,l,c,p){const _=yr(i,s);!function _d(i,s,a,l,c,p,_){if(null==p)hn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?fe(p):_(p,l||"",c);hn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function UA(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],P=_[b++];null!==E?l.setInput(a,P,A,S):a[S]=P}}}function C_(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function ww(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function XI(i,s){const a=_r(s,i);if(os(a)){const l=a[1];80&a[2]?Fu(l,a,l.template,a[8]):a[5]>0&&Ew(a)}}function Ew(i){for(let l=Nu(i);null!==l;l=Ou(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Fu(_,p,_.template,p[8])}else p[5]>0&&Ew(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=_r(a[l],i);os(c)&&c[5]>0&&Ew(c)}}function jA(i,s){const a=_r(s,i),l=a[1];(function eD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Wl(l,a,a[8])}function T_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function bw(i){for(;i;){i[2]|=64;const s=Dn(i);if(wh(i)&&!s)return i;i=s}return null}function Dw(i,s,a){const l=s[10];l.begin&&l.begin();try{Fu(i,s,i.template,a)}catch(c){throw vd(s,c),c}finally{l.end&&l.end()}}function Rg(i){!function Iw(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Gh(a),c=l[1];w_(c,l,c.template,a)}}(i[8])}function Ng(i,s,a){ml(0),s(i,a)}const Tw=(()=>Promise.resolve(null))();function A_(i){return i[7]||(i[7]=[])}function S_(i){return i.cleanup||(i.cleanup=[])}function vd(i,s){const a=i[9],l=a?a.get(Ir,null):null;l&&l.handleError(s)}function Aw(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,E):b[E]=c}}function ia(i,s,a){const l=lo(s,i);!function cd(i,s,a){hn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function wd(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=le(c,E):2==p&&(l=le(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Og=new bn("INJECTOR",-1);class Sw{get(s,a=yo){if(a===yo){const l=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw l.name="NullInjectorError",l}return a}}const Do=new bn("Set Injector scope."),Ke={},M_={};let Dt;function uf(){return void 0===Dt&&(Dt=new Sw),Dt}function Pg(i,s=null,a=null,l){const c=Ed(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Ed(i,s=null,a=null,l){return new sD(i,a,s||uf(),l)}class sD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&si(a,E=>this.processProvider(E,s,a)),si([s],E=>this.processInjectorType(E,[],p)),this.records.set(Og,Hn(void 0,this));const _=this.records.get(Do);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:he(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=yo,l=ot.Default){this.assertNotDestroyed();const c=Ae(this),p=Bn(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function lD(i){return"function"==typeof i||"object"==typeof i&&i instanceof bn}(s)&&$t(s);E=b&&this.injectableDefInScope(b)?Hn(lf(s),Ke):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ot.Self?uf():this.parent).get(s,a=l&ot.Optional&&a===yo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Tu]=_[Tu]||[]).unshift(he(s)),c)throw _;return function Qo(i,s,a,l){const c=i[Tu];throw s[F]&&c.unshift(s[F]),i.message=function _o(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=he(s);if(Array.isArray(s))c=s.map(he).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Tu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Bn(p),Ae(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(he(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=Tr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=Tr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{si(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:U,providers:Z}=S[P];si(Z,ye=>this.processProvider(ye,U,Z||at))}}this.injectorDefTypes.add(_);const b=Br(_)||(()=>new _);this.records.set(_,Hn(b,Ke));const A=c.providers;if(null!=A&&!E){const S=s;si(A,P=>this.processProvider(P,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=bd(s=Q(s))?s:Q(s&&s.provide);const p=function aD(i,s,a){return cf(i)?Hn(void 0,i.useValue):Hn(xw(i),Ke)}(s);if(bd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Hn(void 0,Ke,!0),_.factory=()=>bt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===Ke&&(a.value=M_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Rw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function lf(i){const s=$t(i),a=null!==s?s.factory:Br(i);if(null!==a)return a;if(i instanceof bn)throw new Ne(204,!1);if(i instanceof Function)return function oD(i){const s=i.length;if(s>0)throw function Ii(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Ne(204,!1);const a=function Qr(i){const s=i&&(i[Mi]||i[Xi]);if(s){const a=function Is(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function xw(i,s,a){let l;if(bd(i)){const c=Q(i);return Br(c)||lf(c)}if(cf(i))l=()=>Q(i.useValue);else if(function Lu(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...bt(i.deps||[]));else if(function Wr(i){return!(!i||!i.useExisting)}(i))l=()=>Qe(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function Mw(i){return!!i.deps}(i))return Br(c)||lf(c);l=()=>new c(...bt(i.deps))}return l}function Hn(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function cf(i){return null!==i&&"object"==typeof i&&W in i}function bd(i){return"function"==typeof i}let Co=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Pg({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Pg({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=yo,i.NULL=new Sw,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>Qe(Og)}),i.__NG_ELEMENT_ID__=-1,i})();function V_(i,s){as(Gh(i)[1],gn())}function U_(i){let s=function Uw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ur(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ne(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Zl(i.inputs),_.declaredInputs=Zl(i.declaredInputs),_.outputs=Zl(i.outputs);const E=c.hostBindings;E&&gD(i,E);const b=c.viewQuery,A=c.contentQueries;if(b&&pD(i,b),A&&pf(i,A),oe(i.inputs,c.inputs),oe(i.declaredInputs,c.declaredInputs),oe(i.outputs,c.outputs),Ur(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===U_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function di(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Sr(c.hostAttrs,a=Sr(a,c.hostAttrs))}}(l)}function Zl(i){return i===ir?{}:i===at?[]:i}function pD(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function pf(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function gD(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Id=null;function Vu(){if(!Id){const i=jt.Symbol;if(i&&i.iterator)Id=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Id=l)}}}return Id}function Kl(i){return!!j_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Vu()in i)}function j_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Nr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function gf(i,s,a,l){const c=Ee();return Nr(c,Ls(),s)&&(kt(),Ys(wn(),c,i,s,a,l)),gf}function G_(i,s,a,l,c,p,_,E){const b=Ee(),A=kt(),S=i+20,P=A.firstCreatePass?function H_(i,s,a,l,c,p,_,E,b){const A=s.consts,S=md(s,i,4,_||null,$r(A,E));xg(s,a,S,$r(A,b)),as(s,S);const P=S.tViews=Ag(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,p,_):A.data[S];Hr(P,!1);const U=b[11].createComment("");fg(A,b,U,P),Mr(U,b),T_(b,b[S]=ww(U,b,U,P)),iu(P)&&Tg(A,b,P),null!=_&&yd(b,P,E)}function Sd(i){return function yi(i,s){return i[s]}(function hl(){return lt.lFrame.contextLView}(),20+i)}function Ao(i,s=ot.Default){const a=Ee();return null===a?Qe(i,s):js(gn(),a,Q(i),s)}function em(){throw new Error("invalid")}function X_(i,s,a){const l=Ee();return Nr(l,Ls(),s)&&function $i(i,s,a,l,c,p,_,E){const b=yr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(Aw(i,a,S,l,c),Ss(s)&&function pw(i,s){const a=_r(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Sg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,hn(p)?p.setProperty(b,l,c):Gr(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}(kt(),wn(),l,i,s,l[11],a,!1),X_}function Ef(i,s,a,l,c){const _=c?"class":"style";Aw(i,a,s.inputs[_],_,l)}function Pd(i,s,a,l){const c=Ee(),p=kt(),_=20+i,E=c[11],b=c[_]=dd(E,s,function yy(){return lt.lFrame.currentNamespace}()),A=p.firstCreatePass?function Od(i,s,a,l,c,p,_){const E=s.consts,A=md(s,i,2,c,$r(E,p));return xg(s,a,A,$r(E,_)),null!==A.attrs&&wd(A,A.attrs,!1),null!==A.mergedAttrs&&wd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];Hr(A,!0);const S=A.mergedAttrs;null!==S&&ct(E,b,S);const P=A.classes;null!==P&&n_(E,b,P);const U=A.styles;return null!==U&&X0(E,b,U),64!=(64&A.flags)&&fg(p,c,b,A),0===function Ia(){return lt.lFrame.elementDepthCount}()&&Mr(b,c),function pu(){lt.lFrame.elementDepthCount++}(),iu(A)&&(Tg(p,c,A),function uw(i,s,a){if(Tc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&yd(c,A),Pd}function sa(){let i=gn();cl()?function dl(){lt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function gu(){lt.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(as(a,i),Tc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Dh(i){return 0!=(16&i.flags)}(s)&&Ef(a,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function qp(i){return 0!=(32&i.flags)}(s)&&Ef(a,s,Ee(),s.stylesWithoutHost,!1),sa}function tm(i,s,a,l){return Pd(i,s,a,l),sa(),tm}function If(){return Ee()}function nm(i){return!!i&&"function"==typeof i.then}function Tn(i){return!!i&&"function"==typeof i.subscribe}const Df=Tn;function ev(i,s,a,l){const c=Ee(),p=kt(),_=gn();return function Fd(i,s,a,l,c,p,_,E){const b=iu(l),S=i.firstCreatePass&&S_(i),P=s[8],U=A_(s);let Z=!0;if(3&l.type||E){const Be=yr(l,s),Ze=E?E(Be):Be,be=U.length,dt=E?qt=>E(rn(qt[l.index])):l.index;if(hn(a)){let qt=null;if(!E&&b&&(qt=function Cf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],b=c[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=p,qt.__ngLastListenerFn__=p,Z=!1;else{p=rm(l,s,P,p,!1);const un=a.listen(Ze,c,p);U.push(p,un),S&&S.push(c,dt,be,be+1)}}else p=rm(l,s,P,p,!0),Ze.addEventListener(c,p,_),U.push(p),S&&S.push(c,dt,be,_)}else p=rm(l,s,P,p,!1);const ye=l.outputs;let ke;if(Z&&null!==ye&&(ke=ye[c])){const Be=ke.length;if(Be)for(let Ze=0;Ze<Be;Ze+=2){const Zi=s[ke[Ze]][ke[Ze+1]].subscribe(p),wc=U.length;U.push(p,Zi),S&&S.push(c,l.index,wc,-(wc+1))}}}(p,c,c[11],_,i,s,!!a,l),ev}function tE(i,s,a,l){try{return!1!==a(l)}catch(c){return vd(i,c),!1}}function rm(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?_r(i.index,s):s;0==(32&s[2])&&bw(E);let b=tE(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=tE(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function nE(i=1){return function Vs(i){return(lt.lFrame.contextLView=function _l(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function im(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?ra(p):li(p),b=!1;for(;0!==E&&(!1===b||_);){const S=i[E+1];aE(i[E],s)&&(b=!0,i[E+1]=l?a_(S):vt(S)),E=l?ra(S):li(S)}b&&(i[a+1]=l?vt(p):a_(p))}function aE(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&qs(i,s)>=0}function ov(i,s){return function Qs(i,s,a,l){const c=Ee(),p=kt(),_=function _i(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function ua(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[vr()],_=function av(i,s){return s>=i.expandoStartIndex}(i,a);(function dv(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function hE(i,s,a,l){const c=function Ca(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=ec(a=am(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=am(c,i,s,a,l),null===p){let b=function RD(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==li(l))return i[ra(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=am(null,i,s,b[1],l),b=ec(b,s.attrs,l),function uv(i,s,a,l){i[ra(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function Sf(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=ec(l,i[p].hostAttrs,a);return ec(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function oE(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=ra(_),b=li(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||qs(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const U=ra(i[E+1]);i[l+1]=o_(U,E),0!==U&&(i[U+1]=mg(i[U+1],l)),i[E+1]=function pd(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=o_(E,0),0!==E&&(i[E+1]=mg(i[E+1],l)),E=l;else i[l+1]=o_(b,0),0===E?E=l:i[b+1]=mg(i[b+1],l),b=l;A&&(i[l+1]=vt(i[l+1])),im(i,S,l,!0),im(i,S,l,!1),function sv(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&qs(p,s)>=0&&(a[l+1]=a_(a[l+1]))}(s,S,i,l,p),_=o_(E,b),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Nt&&Nr(c,_,s)&&function xf(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const b=i.data,A=b[E+1];Mf(function rw(i){return 1==(1&i)}(A)?fE(b,s,a,c,li(A),_):void 0)||(Mf(p)||function Zs(i){return 2==(2&i)}(A)&&(p=fE(b,null,a,c,E,_)),function gg(i,s,a,l,c){const p=hn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:se.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=se.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,lo(vr(),a),c,p))}(p,p.data[vr()],c,c[11],i,c[_+1]=function Rf(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(zs(i)))),i}(s,a),l,_)}(i,s,null,!0),ov}function am(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=ec(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function ec(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$n(i,_,!!a||s[++p]))}return void 0===i?null:i}function fE(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,P=null===S;let U=a[c+1];U===Nt&&(U=P?at:void 0);let Z=P?Rl(U,l):S===l?U:void 0;if(A&&!Mf(Z)&&(Z=Rl(b,l)),Mf(Z)&&(E=Z,_))return E;const ye=i[c+1];c=_?ra(ye):li(ye)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(E=Rl(b,l))}return E}function Mf(i){return void 0!==i}function hv(i,s=""){const a=Ee(),l=kt(),c=i+20,p=l.firstCreatePass?md(l,c,1,s,null):l.data[c],_=a[c]=function ld(i,s){return hn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);fg(l,a,_,p),Hr(p,!1)}function Nf(i){return Bd("",i,""),Nf}function Bd(i,s,a){const l=Ee(),c=function Vn(i,s,a,l){return Nr(i,Ls(),a)?s+fe(a)+l:Nt}(l,i,s,a);return c!==Nt&&ia(l,vr(),c),Bd}const re=void 0;var Or=["en",[["a","p"],["AM","PM"],re],[["AM","PM"],re,re],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],re,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],re,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",re,"{1} 'at' {0}",re],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xe(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let tc={};function wv(i){const s=function ZA(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=bE(s);if(a)return a;const l=s.split("-")[0];if(a=bE(l),a)return a;if("en"===l)return Or;throw new Error(`Missing locale data for the locale "${i}".`)}function EE(i){return wv(i)[gt.PluralCase]}function bE(i){return i in tc||(tc[i]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[i]),tc[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Pf="en-US";let Ev=Pf;function Xd(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let p=0;p<i.length;p++)Xd(i[p],s,a,l,c);else{const p=kt(),_=Ee();let E=bd(i)?i:Q(i.provide),b=xw(i);const A=gn(),S=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(bd(i)||!i.multi){const Z=new $o(b,c,Ao),ye=$f(E,s,c?S:S+U,P);-1===ye?(Bs(Nn(A,_),p,E),jf(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[ye]=Z,_[ye]=Z)}else{const Z=$f(E,s,S+U,P),ye=$f(E,s,S,S+U),ke=Z>=0&&a[Z],Be=ye>=0&&a[ye];if(c&&!Be||!c&&!ke){Bs(Nn(A,_),p,E);const Ze=function Hf(i,s,a,l,c){const p=new $o(i,a,Ao);return p.multi=[],p.index=s,p.componentProviders=0,bm(p,c,l&&!a),p}(c?Xs:eh,a.length,c,l,b);!c&&Be&&(a[ye].providerFactory=Ze),jf(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Ze),_.push(Ze)}else jf(p,i,Z>-1?Z:ye,bm(a[c?ye:Z],b,!c&&l));!c&&l&&Be&&a[ye].componentProviders++}}}function jf(i,s,a,l){const c=bd(s),p=function uD(i){return!!i.useClass}(s);if(c||p){const b=(p?Q(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function bm(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function $f(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function eh(i,s,a,l){return Im(this.multi,[])}function Xs(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=wi(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),Im(c,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],Im(c,p);return p}function Im(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Av(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Em(i,s,a){const l=kt();if(l.firstCreatePass){const c=Ur(i);Xd(a,l.data,l.blueprint,c,!0),Xd(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Dm{}class zE{resolveComponentFactory(s){throw function qE(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Gf=(()=>{class i{}return i.NULL=new zE,i})();function WE(){return qa(gn(),Ee())}function qa(i,s){return new qf(yr(i,s))}let qf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=WE,i})();function KD(i){return i instanceof qf?i.nativeElement:i}class oc{}let ac=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function uc(){const i=Ee(),a=_r(gn().index,i);return function ZE(i){return i[11]}(mi(a)?a:i)}(),i})(),KE=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class lc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Mv=new lc("13.3.3"),Cm={};function Zu(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(rn(p)),ei(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&Zu(b[1],b,A,l)}const _=a.type;if(8&_)Zu(i,s,a.child,l);else if(32&_){const E=Je(a,s);let b;for(;b=E();)l.push(b)}else if(16&_){const E=J0(s,a);if(Array.isArray(E))l.push(...E);else{const b=Dn(s[16]);Zu(b[1],b,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class zf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Zu(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ei(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Wy(s,l),hs(a,l))}this._attachedToViewContainer=!1}Zy(this._lView[1],this._lView)}onDestroy(s){hw(this._lView[1],this._lView,null,s)}markForCheck(){bw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function tD(i,s,a){Fs(!0);try{Dw(i,s,a)}finally{Fs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cg(i,s){pg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=s}}class QD extends zf{constructor(s){super(s),this._view=s}detectChanges(){Rg(this._view)}checkNoChanges(){!function Cw(i){Fs(!0);try{Rg(i)}finally{Fs(!1)}}(this._view)}get context(){return null}}class Xn extends Gf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Gt(s);return new Zf(a,this.ngModule)}}function Wf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Zf extends Dm{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function DA(i){return i.map(PI).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Wf(this.componentDef.inputs)}get outputs(){return Wf(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function JD(i,s){return{get:(a,l,c)=>{const p=i.get(a,Cm,c);return p!==Cm||l===Cm?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(oc,Uo),E=p.get(KE,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function dw(i,s,a){if(hn(i))return i.selectRootElement(s,a===Ht.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):dd(_.createRenderer(null,this.componentDef),A,function Tm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function Vw(i,s){return{components:[],scheduler:i||Hy,clean:Tw,playerHandler:s||null,flags:0}}(),Z=Ag(0,null,null,1,0,null,null,null,null,null),ye=af(null,Z,U,P,null,null,_,b,E,p);let ke,Be;co(ye);try{const Ze=function Lg(i,s,a,l,c,p){const _=a[1];a[20]=i;const b=md(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(wd(b,A,!0),null!==i&&(ct(c,i,A),null!==b.classes&&n_(c,i,b.classes),null!==b.styles&&X0(c,i,b.styles)));const S=l.createRenderer(i,s),P=af(a,lw(s),null,s.onPush?64:16,a[20],b,l,S,p||null,null);return _.firstCreatePass&&(Bs(Nn(b,a),_,s.type),Mg(_,b),D_(b,a.length,1)),T_(a,P),a[20]=P}(S,this.componentDef,ye,_,b);if(S)if(l)ct(b,S,["ng-version",Mv.full]);else{const{attrs:be,classes:dt}=function CA(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!ji(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&ct(b,S,be),dt&&dt.length>0&&n_(b,S,dt.join(" "))}if(Be=ba(Z,20),void 0!==a){const be=Be.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const qt=a[dt];be.push(null!=qt?Array.from(qt):null)}}ke=function Lw(i,s,a,l,c){const p=a[1],_=function mw(i,s,a){const l=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),_w(i,l,s,La(i,s,1,null),a));const c=wi(s,i,l.directiveStart,l);Mr(c,s);const p=yr(l,s);return p&&Mr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=gn();s.contentQueries(1,_,b.directiveStart)}const E=gn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Us(E.index),I_(a[1],E,0,E.directiveStart,E.directiveEnd,s),YI(s,_)),_}(Ze,this.componentDef,ye,U,[V_]),Wl(Z,ye,null)}finally{fo()}return new YE(this.componentType,ke,qa(Be,ye),ye,Be)}}class YE extends class Sv{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new QD(c),this.componentType=s}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class eo{}class Rv{}const cc=new Map;class Ov extends eo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xn(this);const l=ln(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=Ed(s,a,[{provide:eo,useValue:this},{provide:Gf,useValue:this.componentFactoryResolver}],he(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Co.THROW_IF_NOT_FOUND,l=ot.Default){return s===Co||s===eo||s===Og?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Am extends Rv{constructor(s){super(),this.moduleType=s,null!==ln(s)&&function Nv(i){const s=new Set;!function a(l){const c=ln(l,!0),p=c.id;null!==p&&(function th(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${he(s)} vs ${he(s.name)}`)}(p,cc.get(p),l),cc.set(p,l));const _=g(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Ov(this.moduleType,s)}}function Rm(i){return s=>{setTimeout(i,void 0,s)}}const ca=class ib extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=Rm(b),E&&(E=Rm(E)),A&&(A=Rm(A)));const S=super.subscribe({next:E,error:b,complete:A});return s instanceof K.w0&&s.add(S),S}};function iC(){return this._results[Vu()]()}class Pv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Vu(),l=Pv.prototype;l[a]||(l[a]=iC)}get changes(){return this._changes||(this._changes=new ca)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=cr(s);(this._changesDetected=!function Tl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let za=(()=>{class i{}return i.__NG_ELEMENT_ID__=Pr,i})();const sb=za,sC=class extends sb{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=af(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Wl(a,l,s),new zf(l)}};function Pr(){return ih(gn(),Ee())}function ih(i,s){return 4&i.type?new sC(s,i,qa(i,s)):null}let Xf=(()=>{class i{}return i.__NG_ELEMENT_ID__=ep,i})();function ep(){return Fv(gn(),Ee())}const da=Xf,Nm=class extends da{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return qa(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){const s=ii(this._hostTNode,this._hostLView);if(Hc(s)){const a=vi(s,this._hostLView),l=dn(s);return new Ei(a[1].data[l+8],a)}return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=kv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function Ko(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const b=_?s:new Zf(Gt(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const U=(_?A:this.parentInjector).get(eo,null);U&&(p=U)}const S=b.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function hu(i){return ei(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],U=new Nm(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function dg(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],Al(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function hd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=Xy(p,_),b=l[11],A=tf(b,_[7]);return null!==A&&function ef(i,s,a,l,c,p){l[0]=c,l[6]=s,pg(i,l,a,1,c,p)}(c,_[6],b,l,A,E),s.attachToViewContainerRef(),Al(hc(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=kv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Wy(this._lContainer,a);l&&(hs(hc(this._lContainer),a),Zy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Wy(this._lContainer,a);return l&&null!=hs(hc(this._lContainer),a)?new zf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function kv(i){return i[8]}function hc(i){return i[8]||(i[8]=[])}function Fv(i,s){let a;const l=s[i.index];if(ei(l))a=l;else{let c;if(8&i.type)c=rn(l);else{const p=s[11];c=p.createComment("");const _=yr(i,s);ps(p,tf(p,_),c,function AI(i,s){return hn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=ww(l,s,c,i),T_(s,a)}return new Nm(a,i,s)}class Lv{constructor(s){this.queryList=s,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class fc{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new fc(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==jv(s,a).matches&&this.queries[a].setDirty()}}class Om{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Vv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Vv(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Pm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Pm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,ub(a,p)),this.matchTNodeWithReadOption(s,a,qo(a,s,p,!1,!1))}else l===za?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,qo(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===qf||c===Xf||c===za&&4&a.type)this.addMatch(a.index,-2);else{const p=qo(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function ub(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function oC(i,s,a,l){return-1===a?function lb(i,s){return 11&i.type?qa(i,s):4&i.type?ih(i,s):null}(s,i):-2===a?function cb(i,s,a){return a===qf?qa(s,i):a===za?ih(s,i):a===Xf?Fv(s,i):void 0}(i,s,l):wi(i,i[1],a,s)}function db(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const A=_[b];E.push(A<0?null:oC(s,p[A],_[b+1],a.metadata.read))}c.matches=E}return c.matches}function Uv(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=db(i,s,c,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-b];for(let P=10;P<S.length;P++){const U=S[P];U[17]===U[3]&&Uv(U[1],U,A,l)}if(null!==S[9]){const P=S[9];for(let U=0;U<P.length;U++){const Z=P[U];Uv(Z[1],Z,A,l)}}}}}return l}function pc(i){const s=Ee(),a=kt(),l=gl();ml(l+1);const c=jv(a,l);if(i.dirty&&Os(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Uv(a,s,l,[]):db(a,s,c,l);i.reset(p,KD),i.notifyOnChanges()}return!0}return!1}function hb(i,s,a,l){const c=kt();if(c.firstCreatePass){const p=gn();(function fi(i,s,a){null===i.queries&&(i.queries=new Vv),i.queries.track(new Pm(s,a))})(c,new Om(s,a,l),p.index),function uC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Bv(i,s,a){const l=new Pv(4==(4&a));hw(i,s,l,l.destroy),null===s[19]&&(s[19]=new fc),s[19].queries.push(new Lv(l))}(c,Ee(),a)}function fb(){return function aC(i,s){return i[19].queries[s].queryList}(Ee(),gl())}function jv(i,s){return i.queries.getByIndex(s)}function ip(...i){}const uh=new bn("Application Initializer");let Ka=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ip,this.reject=ip,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(nm(p))a.push(p);else if(Df(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Qe(uh,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Tb=new bn("AppId",{providedIn:"root",factory:function Qv(){return`${Jv()}${Jv()}${Jv()}`}});function Jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ab=new bn("Platform Initializer"),sp=new bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ya=new bn("appBootstrapListener");let Sb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Xv=new bn("LocaleId",{providedIn:"root",factory:()=>xt(Xv,ot.Optional|ot.SkipSelf)||function vC(){return"undefined"!=typeof $localize&&$localize.locale||Pf}()}),e0=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ap{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let $m=(()=>{class i{compileModuleSync(a){return new Am(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(ln(a).declarations).reduce((_,E)=>{const b=Gt(E);return b&&_.push(new Zf(b)),_},[]);return new ap(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Wi=(()=>Promise.resolve(0))();function Gm(i){"undefined"==typeof Zone?Wi.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ys{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function qm(){let i=jt.requestAnimationFrame,s=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Mb(i){const s=()=>{!function ch(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Qa(i),i.isCheckStableRunning=!0,pa(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Qa(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return Rb(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),mc(i)}},onInvoke:(a,l,c,p,_,E,b)=>{try{return Rb(i),a.invoke(c,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),mc(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Qa(i),pa(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ys.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ys.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,xb,ip,ip);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const xb={};function pa(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Qa(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Rb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function mc(i){i._nesting--,pa(i)}class Nb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Ja=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ys.assertNotInAngularZone(),Gm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Qe(ys))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),yc=(()=>{class i{constructor(){this._applications=new Map,n0.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return n0.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class t0{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Ob(i){n0=i}let No,n0=new t0;const r0=new bn("AllowMultipleToken");class IC{constructor(s,a){this.name=s,this.token=a}}function s0(i,s,a=[]){const l=`Platform: ${s}`,c=new bn(l);return(p=[])=>{let _=o0();if(!_||_.injector.get(r0,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const E=a.concat(p).concat({provide:c,useValue:!0},{provide:Do,useValue:"platform"});!function DC(i){if(No&&!No.destroyed&&!No.injector.get(r0,!1))throw new Ne(400,"");No=i.get(Pb);const s=i.get(Ab,null);s&&s.forEach(a=>a())}(Co.create({providers:E,name:l}))}return function _c(i){const s=o0();if(!s)throw new Ne(401,"");return s}()}}function o0(){return No&&!No.destroyed?No:null}let Pb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function CC(i,s){let a;return a="noop"===i?new Nb:("zone.js"===i?void 0:i)||new ys({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:ys,useValue:E}];return E.run(()=>{const A=Co.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(Ir,null);if(!P)throw new Ne(402,"");return E.runOutsideAngular(()=>{const U=E.onError.subscribe({next:Z=>{P.handleError(Z)}});S.onDestroy(()=>{vc(this._modules,S),U.unsubscribe()})}),function kb(i,s,a){try{const l=a();return nm(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const U=S.injector.get(Ka);return U.runInitializers(),U.donePromise.then(()=>(function nc(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(Ev=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Xv,Pf)||Pf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Zm({},l);return function bC(i,s,a){const l=new Am(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(up);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Qe(Co))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Zm(i,s){return Array.isArray(s)?s.reduce(Zm,i):Object.assign(Object.assign({},i),s)}let up=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new O.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ys.assertNotInAngularZone(),Gm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{ys.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ue.T)(_,E.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let c;c=a instanceof Dm?a:this._injector.get(Gf).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function zm(i){return i.isBoundToModule}(c)?void 0:this._injector.get(eo),E=c.create(Co.NULL,[],l||c.selector,p),b=E.location.nativeElement,A=E.injector.get(Ja,null),S=A&&E.injector.get(yc);return A&&S&&S.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),vc(this.components,E),S&&S.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;vc(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Ya,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Qe(ys),Qe(Co),Qe(Ir),Qe(Ka))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function vc(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Fb=!0,Km=!1;function Lb(){return Km=!0,Fb}function TC(){if(Km)throw new Error("Cannot enable prod mode after platform setup.");Fb=!1}let xC=(()=>{class i{}return i.__NG_ELEMENT_ID__=Vb,i})();function Vb(i){return function MC(i,s,a){if(Ss(i)&&!a){const l=_r(i.index,s);return new zf(l,l)}return 47&i.type?new zf(s[16],s):null}(gn(),Ee(),16==(16&i))}class Gb{constructor(){}supports(s){return Kl(s)}create(s){return new qb(s)}}const l0=(i,s)=>s;class qb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||l0}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<dh(l,c,p)?a:l,E=dh(_,c,p),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=b-c;if(A!=S){for(let U=0;U<A;U++){const Z=U<p.length?p[U]:p[U]=0,ye=Z+U;S<=ye&&ye<A&&(p[U]=Z+1)}p[_.previousIndex]=S-A}}E!==b&&s(_,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Kl(s))throw new Ne(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function jw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Vu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new zb(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new gp),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class zb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class c0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class gp{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new c0,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dh(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class mp{constructor(){}supports(s){return s instanceof Map||j_(s)}create(){return new d0}}class d0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||j_(s)))throw new Ne(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new h0(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class h0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xm(){return new ey([new Gb])}let ey=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Xm()),deps:[[i,new vo,new ai]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:Xm}),i})();function f0(){return new p0([new mp])}let p0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||f0()),deps:[[i,new vo,new ai]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ne(901,"")}}return i.\u0275prov=en({token:i,providedIn:"root",factory:f0}),i})();const yp=s0(null,"core",[]);let m0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Qe(up))},i.\u0275mod=Y({type:i}),i.\u0275inj=Yt({}),i})()},3942:(rt,Ce,k)=>{k.d(Ce,{Z:()=>Ne});var f=k(2090),K=k(4859),O=k(9681),ue=k(1877);class J{constructor(fe,we){this._delegate=fe,this.firebase=we,(0,O._addComponent)(fe,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,we=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(fe);return!ze.isInitialized()&&"EXPLICIT"===(null===(Xe=ze.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:we})}_removeServiceInstance(fe,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(we)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const Fe=function he(Fe){const fe={},we={__esModule:!0,initializeApp:function Ie(je,te={}){const z=O.initializeApp(je,te);if((0,f.r3)(fe,z.name))return fe[z.name];const ne=new Fe(z,we);return fe[z.name]=ne,ne},app:ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const te=je.name,z=te.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const ne=(me=ze())=>{if("function"!=typeof me[z])throw oe.create("invalid-app-argument",{appName:te});return me[z]()};void 0!==je.serviceProps&&(0,f.ZB)(ne,je.serviceProps),we[z]=ne,Fe.prototype[z]=function(...me){return this._getService.bind(this,te).apply(this,je.multipleInstances?me:[])}}return"PUBLIC"===je.type?we[z]:null},removeApp:function Xe(je){delete fe[je]},useAsService:function He(je,te){return"serverAuth"===te?null:te},modularAPIs:O}};function ze(je){if(!(0,f.r3)(fe,je=je||O._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:je});return fe[je]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(fe).map(je=>fe[je])}}),ze.App=Fe,we}(J);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function fe(we){(0,f.ZB)(Fe,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Fe}(),$=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;!function Te(Fe){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Fe)}()},9681:(rt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Tr,_DEFAULT_ENTRY_NAME:()=>Sn,_addComponent:()=>on,_addOrOverwriteComponent:()=>gi,_apps:()=>ht,_clearComponents:()=>$t,_components:()=>sn,_getProvider:()=>Ji,_registerComponent:()=>en,_removeServiceInstance:()=>Yt,deleteApp:()=>es,getApp:()=>Ar,getApps:()=>Xi,initializeApp:()=>Mi,onLog:()=>Wn,registerVersion:()=>Vr,setLogLevel:()=>Bn});var f=k(5861),K=k(4859),O=k(1877),ue=k(2090);class J{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function ge(We){const De=We.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Ye)){const ut=Ye.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ye=>Ye).join(" ")}}const oe="@firebase/app",le=new O.Yd("@firebase/app"),Sn="[DEFAULT]",it={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,sn=new Map;function on(We,De){try{We.container.addComponent(De)}catch(Ye){le.debug(`Component ${De.name} failed to register with FirebaseApp ${We.name}`,Ye)}}function gi(We,De){We.container.addOrOverwriteComponent(De)}function en(We){const De=We.name;if(sn.has(De))return le.debug(`There were multiple attempts to register component ${De}.`),!1;sn.set(De,We);for(const Ye of ht.values())on(Ye,We);return!0}function Ji(We,De){const Ye=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),We.container.getProvider(De)}function Yt(We,De,Ye=Sn){Ji(We,De).clearInstance(Ye)}function $t(){sn.clear()}const Qr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Is{constructor(De,Ye,ut){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const Tr="9.6.11";function Mi(We,De={}){"object"!=typeof De&&(De={name:De});const Ye=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},De),ut=Ye.name;if("string"!=typeof ut||!ut)throw Qr.create("bad-app-name",{appName:String(ut)});const Bt=ht.get(ut);if(Bt){if((0,ue.vZ)(We,Bt.options)&&(0,ue.vZ)(Ye,Bt.config))return Bt;throw Qr.create("duplicate-app",{appName:ut})}const Pt=new K.H0(ut);for(const L of sn.values())Pt.addComponent(L);const B=new Is(We,Ye,Pt);return ht.set(ut,B),B}function Ar(We=Sn){const De=ht.get(We);if(!De)throw Qr.create("no-app",{appName:We});return De}function Xi(){return Array.from(ht.values())}function es(We){return ot.apply(this,arguments)}function ot(){return(ot=(0,f.Z)(function*(We){const De=We.name;ht.has(De)&&(ht.delete(De),yield Promise.all(We.container.getProviders().map(Ye=>Ye.delete())),We.isDeleted=!0)})).apply(this,arguments)}function Vr(We,De,Ye){var ut;let Bt=null!==(ut=it[We])&&void 0!==ut?ut:We;Ye&&(Bt+=`-${Ye}`);const Pt=Bt.match(/\s|\//),B=De.match(/\s|\//);if(Pt||B){const L=[`Unable to register library "${Bt}" with version "${De}":`];return Pt&&L.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),Pt&&B&&L.push("and"),B&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void le.warn(L.join(" "))}en(new K.wA(`${Bt}-version`,()=>({library:Bt,version:De}),"VERSION"))}function Wn(We,De){if(null!==We&&"function"!=typeof We)throw Qr.create("invalid-log-argument");(0,O.Am)(We,De)}function Bn(We){(0,O.Ub)(We)}const fn="firebase-heartbeat-store";let Zn=null;function Ds(){return Zn||(Zn=(0,ue.X3)("firebase-heartbeat-database",1,(We,De)=>{0===De&&We.createObjectStore(fn)}).catch(We=>{throw Qr.create("storage-open",{originalErrorMessage:We.message})})),Zn}function Ht(){return(Ht=(0,f.Z)(function*(We){try{return(yield Ds()).transaction(fn).objectStore(fn).get(rr(We))}catch(De){throw Qr.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function tt(We,De){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(We,De){try{const ut=(yield Ds()).transaction(fn,"readwrite");return yield ut.objectStore(fn).put(De,rr(We)),ut.complete}catch(Ye){throw Qr.create("storage-set",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function rr(We){return`${We.name}!${We.options.appId}`}class ro{constructor(De){this.container=De,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new at(Ye),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var De=this;return(0,f.Z)(function*(){const ut=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=pr();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!De._heartbeatsCache.heartbeats.some(Pt=>Pt.date===Bt))return De._heartbeatsCache.heartbeats.push({date:Bt,agent:ut}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Pt=>{const B=new Date(Pt.date).valueOf();return Date.now()-B<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,f.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Ye=pr(),{heartbeatsToSend:ut,unsentEntries:Bt}=function ir(We,De=1024){const Ye=[];let ut=We.slice();for(const Bt of We){const Pt=Ye.find(B=>B.agent===Bt.agent);if(Pt){if(Pt.dates.push(Bt.date),gr(Ye)>De){Pt.dates.pop();break}}else if(Ye.push({agent:Bt.agent,dates:[Bt.date]}),gr(Ye)>De){Ye.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:ut}}(De._heartbeatsCache.heartbeats),Pt=(0,ue.L)(JSON.stringify({version:2,heartbeats:ut}));return De._heartbeatsCache.lastSentHeartbeatDate=Ye,Bt.length>0?(De._heartbeatsCache.heartbeats=Bt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Pt})()}}function pr(){return(new Date).toISOString().substring(0,10)}class at{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,f.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function ma(We){return Ht.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Ye=this;return(0,f.Z)(function*(){var ut;if(yield Ye._canUseIndexedDBPromise){const Pt=yield Ye.read();return tt(Ye.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Pt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Ye=this;return(0,f.Z)(function*(){var ut;if(yield Ye._canUseIndexedDBPromise){const Pt=yield Ye.read();return tt(Ye.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...De.heartbeats]})}})()}}function gr(We){return(0,ue.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Ut(We){en(new K.wA("platform-logger",De=>new J(De),"PRIVATE")),en(new K.wA("heartbeat",De=>new ro(De),"PRIVATE")),Vr(oe,"0.7.21",We),Vr(oe,"0.7.21","esm2017"),Vr("fire-js","")}("")},4859:(rt,Ce,k)=>{k.d(Ce,{H0:()=>he,wA:()=>O});var f=k(5861),K=k(2090);class O{constructor(j,$,Q){this.name=j,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ue="[DEFAULT]";class J{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const Q=new K.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:$});qe&&Q.resolve(qe)}catch(qe){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),qe=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(qe)return null;throw Te}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function oe(le){return"EAGER"===le.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ue})}catch($){}for(const[$,Q]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier($);try{const Te=this.getOrInitializeService({instanceIdentifier:qe});Q.resolve(Te)}catch(Te){}}}}clearInstance(j=ue){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ue){return this.instances.has(j)}getOptions(j=ue){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Te,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&Ne.resolve(qe);return qe}onInit(j,$){var Q;const qe=this.normalizeInstanceIdentifier($),Te=null!==(Q=this.onInitCallbacks.get(qe))&&void 0!==Q?Q:new Set;Te.add(j),this.onInitCallbacks.set(qe,Te);const Ne=this.instances.get(qe);return Ne&&j(Ne,qe),()=>{Te.delete(j)}}invokeOnInitCallbacks(j,$){const Q=this.onInitCallbacks.get($);if(Q)for(const qe of Q)try{qe(j,$)}catch(Te){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===ue?void 0:le),options:$}),this.instances.set(j,Q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(qe){}var le;return Q||null}normalizeInstanceIdentifier(j=ue){return this.component?this.component.multipleInstances?j:ue:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new J(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Ce,k)=>{k.d(Ce,{Am:()=>le,Ub:()=>he,Yd:()=>oe,in:()=>K});const f=[];var K=(()=>{return(j=K||(K={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",K;var j})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ue=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ge=(j,$,...Q)=>{if($<j.logLevel)return;const qe=(new Date).toISOString(),Te=J[$];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Te](`[${qe}]  ${j.name}:`,...Q)};class oe{constructor($){this.name=$,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in K))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...$),this._logHandler(this,K.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...$),this._logHandler(this,K.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,K.INFO,...$),this._logHandler(this,K.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,K.WARN,...$),this._logHandler(this,K.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...$),this._logHandler(this,K.ERROR,...$)}}function he(j){f.forEach($=>{$.setLogLevel(j)})}function le(j,$){for(const Q of f){let qe=null;$&&$.level&&(qe=O[$.level]),Q.userLogHandler=null===j?null:(Te,Ne,...Fe)=>{const fe=Fe.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Xe){return null}}).filter(we=>we).join(" ");Ne>=(null!=qe?qe:Te.logLevel)&&j({level:K[Ne].toLowerCase(),message:fe,args:Fe,type:Te.name})}}}},5861:(rt,Ce,k)=>{function f(O,ue,J,ge,oe,he,le){try{var j=O[he](le),$=j.value}catch(Q){return void J(Q)}j.done?ue($):Promise.resolve($).then(ge,oe)}function K(O){return function(){var ue=this,J=arguments;return new Promise(function(ge,oe){var he=O.apply(ue,J);function le($){f(he,ge,oe,le,j,"next",$)}function j($){f(he,ge,oe,le,j,"throw",$)}le(void 0)})}}k.d(Ce,{Z:()=>K})}},rt=>{rt(rt.s=2976)}]);